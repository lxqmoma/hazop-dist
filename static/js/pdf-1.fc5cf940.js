"use strict";(self.webpackChunkhazop_fe=self.webpackChunkhazop_fe||[]).push([["887"],{16102:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{p:()=>pdf_min$1});var vr=Object.defineProperty,br=(t,e,i)=>e in t?vr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,It=(t,e,i)=>(br(t,"symbol"!=typeof e?e+"":e,i),i),ye=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},T=(t,e,i)=>(ye(t,e,"read from private field"),i?i.call(t):e.get(t)),et=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},ut=(t,e,i,r)=>(ye(t,e,"write to private field"),r?r.call(t,i):e.set(t,i),i),ue=(t,e,i,r)=>({set _(a){ut(t,e,a,i)},get _(){return T(t,e,r)}}),nt=(t,e,i)=>(ye(t,e,"access private method"),i),commonjsGlobal="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof global?global:"u">typeof self?self:{};function getDefaultExportFromCjs(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function getAugmentedNamespace(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var i=function t(){if(this instanceof t){var i=[null];return i.push.apply(i,arguments),new(Function.bind.apply(e,i))}return e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach(function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(i,e,r.get?r:{enumerable:!0,get:function(){return t[e]}})}),i}function commonjsRequire(t){throw Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf_min$2={exports:{}};let __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$6=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPath2dPolyfill_min,path2dPolyfill_min={};function requirePath2dPolyfill_min(){return hasRequiredPath2dPolyfill_min||(hasRequiredPath2dPolyfill_min=1,function(){function t(t,e,i){if(i||2==arguments.length)for(var r,n=0,s=e.length;n<s;n++)!r&&n in e||(r||(r=Array.prototype.slice.call(e,0,n)),r[n]=e[n]);return t.concat(r||Array.prototype.slice.call(e))}var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=/([astvzqmhlc])([^astvzqmhlc]*)/gi,r=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function n(n){var s=[],o=String(n).trim();return"M"!==o[0]&&"m"!==o[0]||o.replace(i,function(i,n,o){var l=function(t){var e=t.match(r);return e?e.map(Number):[]}(o),h=n.toLowerCase(),c=n;if("m"===h&&l.length>2&&(s.push(t([c],l.splice(0,2),!0)),h="l",c="m"===c?"l":"L"),l.length<e[h])return"";for(s.push(t([c],l.splice(0,e[h]),!0));l.length>=e[h]&&l.length&&e[h];)s.push(t([c],l.splice(0,e[h]),!0));return""}),s}function s(t,e){var i=t.x*Math.cos(e)-t.y*Math.sin(e),r=t.y*Math.cos(e)+t.x*Math.sin(e);t.x=i,t.y=r}function o(t,e){t.x*=e,t.y*=e}var l=function(){function t(e){var i;this.commands=[],e&&e instanceof t?(i=this.commands).push.apply(i,e.commands):e&&(this.commands=n(e))}return t.prototype.addPath=function(e){var i;e&&e instanceof t&&(i=this.commands).push.apply(i,e.commands)},t.prototype.moveTo=function(t,e){this.commands.push(["M",t,e])},t.prototype.lineTo=function(t,e){this.commands.push(["L",t,e])},t.prototype.arc=function(t,e,i,r,n,s){this.commands.push(["AC",t,e,i,r,n,!!s])},t.prototype.arcTo=function(t,e,i,r,n){this.commands.push(["AT",t,e,i,r,n])},t.prototype.ellipse=function(t,e,i,r,n,s,o,l){this.commands.push(["E",t,e,i,r,n,s,o,!!l])},t.prototype.closePath=function(){this.commands.push(["Z"])},t.prototype.bezierCurveTo=function(t,e,i,r,n,s){this.commands.push(["C",t,e,i,r,n,s])},t.prototype.quadraticCurveTo=function(t,e,i,r){this.commands.push(["Q",t,e,i,r])},t.prototype.rect=function(t,e,i,r){this.commands.push(["R",t,e,i,r])},t.prototype.roundRect=function(t,e,i,r,n){void 0===n?this.commands.push(["RR",t,e,i,r,0]):this.commands.push(["RR",t,e,i,r,n])},t}();function h(t,e){var i,r,n,l,h,c,d,u,p,f,g,m,v,b,y,A,S,_,x,w,C,k,E,T,M=0,P=0,R=null,F=null,O=null,I=null,D=null,L=null;t.beginPath();for(var N=0;N<e.length;++N){"S"!==(_=e[N][0])&&"s"!==_&&"C"!==_&&"c"!==_&&(R=null,F=null),"T"!==_&&"t"!==_&&"Q"!==_&&"q"!==_&&(O=null,I=null);var j=void 0;switch(_){case"m":case"M":j=e[N],"m"===_?(M+=j[1],P+=j[2]):(M=j[1],P=j[2]),"M"!==_&&D||(D={x:M,y:P}),t.moveTo(M,P);break;case"l":M+=(j=e[N])[1],P+=j[2],t.lineTo(M,P);break;case"L":M=(j=e[N])[1],P=j[2],t.lineTo(M,P);break;case"H":M=(j=e[N])[1],t.lineTo(M,P);break;case"h":M+=(j=e[N])[1],t.lineTo(M,P);break;case"V":P=(j=e[N])[1],t.lineTo(M,P);break;case"v":P+=(j=e[N])[1],t.lineTo(M,P);break;case"a":case"A":if(j=e[N],null===L)throw Error("This should never happen");"a"===_?(M+=j[6],P+=j[7]):(M=j[6],P=j[7]),b=j[1],y=j[2],d=j[3]*Math.PI/180,n=!!j[4],l=!!j[5],h={x:M,y:P},s(c={x:(L.x-h.x)/2,y:(L.y-h.y)/2},-d),(u=c.x*c.x/(b*b)+c.y*c.y/(y*y))>1&&(b*=u=Math.sqrt(u),y*=u),p=b*b*y*y,f=b*b*c.y*c.y+y*y*c.x*c.x,o(x={x:b*c.y/y,y:-y*c.x/b},l!==n?Math.sqrt((p-f)/f)||0:-Math.sqrt((p-f)/f)||0),r=Math.atan2((c.y-x.y)/y,(c.x-x.x)/b),i=Math.atan2(-(c.y+x.y)/y,-(c.x+x.x)/b),s(x,d),k=x,E=(h.x+L.x)/2,T=(h.y+L.y)/2,k.x+=E,k.y+=T,t.save(),t.translate(x.x,x.y),t.rotate(d),t.scale(b,y),t.arc(0,0,1,r,i,!l),t.restore();break;case"C":R=(j=e[N])[3],F=j[4],M=j[5],P=j[6],t.bezierCurveTo(j[1],j[2],R,F,M,P);break;case"c":j=e[N],t.bezierCurveTo(j[1]+M,j[2]+P,j[3]+M,j[4]+P,j[5]+M,j[6]+P),R=j[3]+M,F=j[4]+P,M+=j[5],P+=j[6];break;case"S":j=e[N],null!==R&&null!==F||(R=M,F=P),t.bezierCurveTo(2*M-R,2*P-F,j[1],j[2],j[3],j[4]),R=j[1],F=j[2],M=j[3],P=j[4];break;case"s":j=e[N],null!==R&&null!==F||(R=M,F=P),t.bezierCurveTo(2*M-R,2*P-F,j[1]+M,j[2]+P,j[3]+M,j[4]+P),R=j[1]+M,F=j[2]+P,M+=j[3],P+=j[4];break;case"Q":O=(j=e[N])[1],I=j[2],M=j[3],P=j[4],t.quadraticCurveTo(O,I,M,P);break;case"q":O=(j=e[N])[1]+M,I=j[2]+P,M+=j[3],P+=j[4],t.quadraticCurveTo(O,I,M,P);break;case"T":null!==O&&null!==I||(O=M,I=P),O=2*M-O,I=2*P-I,M=(j=e[N])[1],P=j[2],t.quadraticCurveTo(O,I,M,P);break;case"t":null!==O&&null!==I||(O=M,I=P),O=2*M-O,I=2*P-I,M+=(j=e[N])[1],P+=j[2],t.quadraticCurveTo(O,I,M,P);break;case"z":case"Z":D&&(M=D.x,P=D.y),D=null,t.closePath();break;case"AC":M=(j=e[N])[1],P=j[2],v=j[3],r=j[4],i=j[5],w=j[6],t.arc(M,P,v,r,i,w);break;case"AT":g=(j=e[N])[1],m=j[2],M=j[3],P=j[4],v=j[5],t.arcTo(g,m,M,P,v);break;case"E":M=(j=e[N])[1],P=j[2],b=j[3],y=j[4],d=j[5],r=j[6],i=j[7],w=j[8],t.save(),t.translate(M,P),t.rotate(d),t.scale(b,y),t.arc(0,0,1,r,i,w),t.restore();break;case"R":M=(j=e[N])[1],P=j[2],A=j[3],S=j[4],D={x:M,y:P},t.rect(M,P,A,S);break;case"RR":M=(j=e[N])[1],P=j[2],A=j[3],S=j[4],C=j[5],D={x:M,y:P},t.roundRect(M,P,A,S,C)}L?(L.x=M,L.y=P):L={x:M,y:P}}}function c(t,e,i,r,n){var s=this;if(void 0===n&&(n=0),"number"==typeof n&&(n=[n]),Array.isArray(n)){if(0===n.length||n.length>4)throw RangeError("Failed to execute 'roundRect' on '".concat(this.constructor.name,"': ").concat(n.length," radii provided. Between one and four radii are necessary."));if(n.forEach(function(t){if(t<0)throw RangeError("Failed to execute 'roundRect' on '".concat(s.constructor.name,"': Radius value ").concat(t," is negative."))}),1===n.length&&0===n[0])return this.rect(t,e,i,r);var o,l,h,c=Math.min(i,r)/2,d=o=l=h=Math.min(c,n[0]);2===n.length&&(o=h=Math.min(c,n[1])),3===n.length&&(o=h=Math.min(c,n[1]),l=Math.min(c,n[2])),4===n.length&&(o=Math.min(c,n[1]),l=Math.min(c,n[2]),h=Math.min(c,n[3])),this.moveTo(t,e+r-h),this.arcTo(t,e,t+d,e,d),this.arcTo(t+i,e,t+i,e+o,o),this.arcTo(t+i,e+r,t+i-l,e+r,l),this.arcTo(t,e+r,t,e+r-h,h),this.moveTo(t,e)}}(function(t){if(t&&t.CanvasRenderingContext2D&&!t.Path2D){var e=t.CanvasRenderingContext2D,i=e.prototype.fill,r=e.prototype.stroke,n=e.prototype.isPointInPath;e.prototype.fill=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!(t[0]instanceof l))return n=t[0]||"nonzero",i.apply(this,[n]);var r=t[0],n=t[1]||"nonzero";h(this,r.commands),i.apply(this,[n])},e.prototype.stroke=function(t){t&&h(this,t.commands),r.apply(this)},e.prototype.isPointInPath=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t[0]instanceof l){var i=t[0],r=t[1],s=t[2],o=t[3]||"nonzero";return h(this,i.commands),n.apply(this,[r,s,o])}return n.apply(this,t)},t.Path2D=l}})(window),function(t){if(t&&t.CanvasRenderingContext2D){var e=t.CanvasRenderingContext2D,i=t.Path2D;e&&!e.prototype.roundRect&&(e.prototype.roundRect=c),i&&!i.prototype.roundRect&&(i.prototype.roundRect=c)}}(window)}()),path2dPolyfill_min}!function(module,exports){!function(t,e){module.exports=e()}(globalThis,()=>(()=>{var __webpack_modules__=[,(t,e,i)=>{var r,n;Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationStateModelType=e.AnnotationReviewState=e.AnnotationReplyType=e.AnnotationMode=e.AnnotationMarkedState=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=function(t,e){t||h(e)},e.bytesToString=function(t){"object"==typeof t&&(null==t?void 0:t.length)!==void 0||h("Invalid argument for bytesToString");let e=t.length,i=8192;if(e<8192)return String.fromCharCode.apply(null,t);let r=[];for(let n=0;n<e;n+=i){let s=Math.min(n+i,e),o=t.subarray(n,s);r.push(String.fromCharCode.apply(null,o))}return r.join("")},e.createValidAbsoluteUrl=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!t)return null;try{if(i&&"string"==typeof t){if(i.addDefaultProtocol&&t.startsWith("www.")){let e=t.match(/\./g);(null==e?void 0:e.length)>=2&&(t=`http://${t}`)}if(i.tryConvertEncoding)try{t=m(t)}catch{}}let r=e?new URL(t,e):new URL(t);if(function(t){switch(null==t?void 0:t.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r))return r}catch{}return null},e.getModificationDate=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return[t.getUTCFullYear().toString(),(t.getUTCMonth()+1).toString().padStart(2,"0"),t.getUTCDate().toString().padStart(2,"0"),t.getUTCHours().toString().padStart(2,"0"),t.getUTCMinutes().toString().padStart(2,"0"),t.getUTCSeconds().toString().padStart(2,"0")].join("")},e.getVerbosityLevel=function(){return o},e.info=function(t){s.INFOS},e.isArrayBuffer=function(t){return"object"==typeof t&&(null==t?void 0:t.byteLength)!==void 0},e.isArrayEqual=function(t,e){if(t.length!==e.length)return!1;for(let i=0,r=t.length;i<r;i++)if(t[i]!==e[i])return!1;return!0},e.normalizeUnicode=function(t){return v||(v=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,b=new Map([["ﬅ","ſt"]])),t.replaceAll(v,(t,e,i)=>e?e.normalize("NFKC"):b.get(i))},e.objectFromMap=function(t){let e=Object.create(null);for(let[i,r]of t)e[i]=r;return e},e.objectSize=function(t){return Object.keys(t).length},e.setVerbosityLevel=function(t){Number.isInteger(t)&&(o=t)},e.shadow=c,e.string32=function(t){return String.fromCharCode(t>>24&255,t>>16&255,t>>8&255,255&t)},e.stringToBytes=u,e.stringToPDFString=function(t){if(t[0]>="\xef"){let e;if("\xfe"===t[0]&&"\xff"===t[1]?e="utf-16be":"\xff"===t[0]&&"\xfe"===t[1]?e="utf-16le":"\xef"===t[0]&&"\xbb"===t[1]&&"\xbf"===t[2]&&(e="utf-8"),e)try{let i=new TextDecoder(e,{fatal:!0}),r=u(t);return i.decode(r)}catch(t){l(`stringToPDFString: "${t}".`)}}let e=[];for(let i=0,r=t.length;i<r;i++){let r=g[t.charCodeAt(i)];e.push(r?String.fromCharCode(r):t.charAt(i))}return e.join("")},e.stringToUTF8String=m,e.unreachable=h,e.utf8StringToString=function(t){return unescape(encodeURIComponent(t))},e.warn=l,globalThis._pdfjsCompatibilityChecked||(globalThis._pdfjsCompatibilityChecked=!0,i(2)),e.IDENTITY_MATRIX=[1,0,0,1,0,0],e.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],e.MAX_IMAGE_SIZE_TO_CACHE=1e7,e.LINE_FACTOR=1.35,e.LINE_DESCENT_FACTOR=.35,e.BASELINE_FACTOR=.25925925925925924,e.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},e.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},e.AnnotationEditorPrefix="pdfjs_internal_editor_",e.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},e.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},e.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},e.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},e.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},e.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},e.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},e.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},e.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},e.AnnotationReplyType={GROUP:"Group",REPLY:"R"},e.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},e.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:0x1000000,RICHTEXT:0x2000000,RADIOSINUNISON:0x2000000,COMMITONSELCHANGE:0x4000000},e.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},e.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},e.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},e.PageActionEventType={O:"PageOpen",C:"PageClose"};let s={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=s,e.CMapCompressionType={NONE:0,BINARY:1},e.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},e.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let o=s.WARNINGS;function l(t){s.WARNINGS}function h(t){throw Error(t)}function c(t,e,i){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(t,e,{value:i,enumerable:!r,configurable:!0,writable:!1}),i}let d=function(){function t(e,i){this.constructor===t&&h("Cannot initialize BaseException."),this.message=e,this.name=i}return t.prototype=Error(),t.constructor=t,t}();function u(t){"string"!=typeof t&&h("Invalid argument for stringToBytes");let e=t.length,i=new Uint8Array(e);for(let r=0;r<e;++r)i[r]=255&t.charCodeAt(r);return i}e.BaseException=d,e.PasswordException=class extends d{constructor(t,e){super(t,"PasswordException"),this.code=e}},e.UnknownErrorException=class extends d{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}},e.InvalidPDFException=class extends d{constructor(t){super(t,"InvalidPDFException")}},e.MissingPDFException=class extends d{constructor(t){super(t,"MissingPDFException")}},e.UnexpectedResponseException=class extends d{constructor(t,e){super(t,"UnexpectedResponseException"),this.status=e}},e.FormatError=class extends d{constructor(t){super(t,"FormatError")}},e.AbortException=class extends d{constructor(t){super(t,"AbortException")}},e.FeatureTest=class{static get isLittleEndian(){return c(this,"isLittleEndian",function(){let t=new Uint8Array(4);return t[0]=1,1===new Uint32Array(t.buffer,0,1)[0]}())}static get isEvalSupported(){return c(this,"isEvalSupported",function(){try{return Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return c(this,"isOffscreenCanvasSupported","u">typeof OffscreenCanvas)}static get platform(){return typeof navigator>"u"?c(this,"platform",{isWin:!1,isMac:!1}):c(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}};let p=[...Array(256).keys()].map(t=>t.toString(16).padStart(2,"0"));class f{static makeHexColor(t,e,i){return`#${p[t]}${p[e]}${p[i]}`}static scaleMinMax(t,e){let i;t[0]?(t[0]<0&&(i=e[0],e[0]=e[1],e[1]=i),e[0]*=t[0],e[1]*=t[0],t[3]<0&&(i=e[2],e[2]=e[3],e[3]=i),e[2]*=t[3],e[3]*=t[3]):(i=e[0],e[0]=e[2],e[2]=i,i=e[1],e[1]=e[3],e[3]=i,t[1]<0&&(i=e[2],e[2]=e[3],e[3]=i),e[2]*=t[1],e[3]*=t[1],t[2]<0&&(i=e[0],e[0]=e[1],e[1]=i),e[0]*=t[2],e[1]*=t[2]),e[0]+=t[4],e[1]+=t[4],e[2]+=t[5],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e){return[t[0]*e[0]+t[1]*e[2]+e[4],t[0]*e[1]+t[1]*e[3]+e[5]]}static applyInverseTransform(t,e){let i=e[0]*e[3]-e[1]*e[2];return[(t[0]*e[3]-t[1]*e[2]+e[2]*e[5]-e[4]*e[3])/i,(-t[0]*e[1]+t[1]*e[0]+e[4]*e[1]-e[5]*e[0])/i]}static getAxialAlignedBoundingBox(t,e){let i=f.applyTransform(t,e),r=f.applyTransform(t.slice(2,4),e),n=f.applyTransform([t[0],t[3]],e),s=f.applyTransform([t[2],t[1]],e);return[Math.min(i[0],r[0],n[0],s[0]),Math.min(i[1],r[1],n[1],s[1]),Math.max(i[0],r[0],n[0],s[0]),Math.max(i[1],r[1],n[1],s[1])]}static inverseTransform(t){let e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t){let e=[t[0],t[2],t[1],t[3]],i=t[0]*e[0]+t[1]*e[2],r=t[0]*e[1]+t[1]*e[3],n=t[2]*e[0]+t[3]*e[2],s=t[2]*e[1]+t[3]*e[3],o=(i+s)/2,l=Math.sqrt((i+s)**2-4*(i*s-n*r))/2;return[Math.sqrt(o+l||1),Math.sqrt(o-l||1)]}static normalizeRect(t){let e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){let i=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(i>r)return null;let n=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),s=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return n>s?null:[i,n,r,s]}static bezierBoundingBox(t,e,i,r,n,s,o,l){let h,c,d,u,p,f,g,m,v=[],b=[[],[]];for(let b=0;b<2;++b)if(0===b?(c=6*t-12*i+6*n,h=-3*t+9*i-9*n+3*o,d=3*i-3*t):(c=6*e-12*r+6*s,h=-3*e+9*r-9*s+3*l,d=3*r-3*e),1e-12>Math.abs(h)){if(1e-12>Math.abs(c))continue;0<(u=-d/c)&&u<1&&v.push(u)}else m=Math.sqrt(g=c*c-4*d*h),g<0||(0<(p=(-c+m)/(2*h))&&p<1&&v.push(p),0<(f=(-c-m)/(2*h))&&f<1&&v.push(f));let y,A=v.length,S=A;for(;A--;)y=1-(u=v[A]),b[0][A]=y*y*y*t+3*y*y*u*i+3*y*u*u*n+u*u*u*o,b[1][A]=y*y*y*e+3*y*y*u*r+3*y*u*u*s+u*u*u*l;return b[0][S]=t,b[1][S]=e,b[0][S+1]=o,b[1][S+1]=l,b[0].length=b[1].length=S+2,[Math.min(...b[0]),Math.min(...b[1]),Math.max(...b[0]),Math.max(...b[1])]}}e.Util=f;let g=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function m(t){return decodeURIComponent(escape(t))}n=class{constructor(){et(this,r,!1),this.promise=new Promise((t,e)=>{this.resolve=e=>{ut(this,r,!0),t(e)},this.reject=t=>{ut(this,r,!0),e(t)}})}get settled(){return T(this,r)}},r=new WeakMap,e.PromiseCapability=n;let v=null,b=null},(t,e,i)=>{var r=i(3);(function(){!globalThis.DOMMatrix&&r.isNodeJS&&(globalThis.DOMMatrix=require$$6.DOMMatrix)})(),function(){if(globalThis.Path2D||!r.isNodeJS)return;let{CanvasRenderingContext2D:t}=require$$6,{polyfillPath2D:e}=requirePath2dPolyfill_min();globalThis.CanvasRenderingContext2D=t,e(globalThis)}(),function(){Array.prototype.at||i(4)}(),function(){Uint8Array.prototype.at||i(78)}(),function(){globalThis.structuredClone||i(90)}()},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.isNodeJS=void 0,e.isNodeJS=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type)},(t,e,i)=>{i(5),t.exports=i(77)("Array","at")},(t,e,i)=>{var r=i(6),n=i(43),s=i(67),o=i(65),l=i(72);r({target:"Array",proto:!0},{at:function(t){var e=n(this),i=s(e),r=o(t),l=r>=0?r:i+r;return l<0||l>=i?void 0:e[l]}}),l("at")},(t,e,i)=>{var r=i(7),n=i(8).f,s=i(47),o=i(51),l=i(41),h=i(59),c=i(71);t.exports=function(t,e){var i,d,u,p,f,g=t.target,m=t.global,v=t.stat;if(i=m?r:v?r[g]||l(g,{}):(r[g]||{}).prototype)for(d in e){if(p=e[d],u=t.dontCallGetSet?(f=n(i,d))&&f.value:i[d],!c(m?d:g+(v?".":"#")+d,t.forced)&&void 0!==u){if(typeof p==typeof u)continue;h(p,u)}(t.sham||u&&u.sham)&&s(p,"sham",!0),o(i,d,p,t)}}},function(t){var e=function(t){return t&&t.Math==Math&&t};t.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof commonjsGlobal&&commonjsGlobal)||function(){return this}()||this||Function("return this")()},(t,e,i)=>{var r=i(9),n=i(11),s=i(13),o=i(14),l=i(15),h=i(21),c=i(42),d=i(45),u=Object.getOwnPropertyDescriptor;e.f=r?u:function(t,e){if(t=l(t),e=h(e),d)try{return u(t,e)}catch{}if(c(t,e))return o(!n(s.f,t,e),t[e])}},(t,e,i)=>{t.exports=!i(10)(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},t=>{t.exports=function(t){try{return!!t()}catch{return!0}}},(t,e,i)=>{var r=i(12),n=Function.prototype.call;t.exports=r?n.bind(n):function(){return n.apply(n,arguments)}},(t,e,i)=>{t.exports=!i(10)(function(){var t=(function(){}).bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},(t,e)=>{var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor;e.f=r&&!i.call({1:2},1)?function(t){var e=r(this,t);return!!e&&e.enumerable}:i},t=>{t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},(t,e,i)=>{var r=i(16),n=i(19);t.exports=function(t){return r(n(t))}},(t,e,i)=>{var r=i(17),n=i(10),s=i(18),o=Object,l=r("".split);t.exports=n(function(){return!o("z").propertyIsEnumerable(0)})?function(t){return"String"==s(t)?l(t,""):o(t)}:o},(t,e,i)=>{var r=i(12),n=Function.prototype,s=n.call,o=r&&n.bind.bind(s,s);t.exports=r?o:function(t){return function(){return s.apply(t,arguments)}}},(t,e,i)=>{var r=i(17),n=r({}.toString),s=r("".slice);t.exports=function(t){return s(n(t),8,-1)}},(t,e,i)=>{var r=i(20),n=TypeError;t.exports=function(t){if(r(t))throw n("Can't call method on "+t);return t}},t=>{t.exports=function(t){return null==t}},(t,e,i)=>{var r=i(22),n=i(26);t.exports=function(t){var e=r(t,"string");return n(e)?e:e+""}},(t,e,i)=>{var r=i(11),n=i(23),s=i(26),o=i(33),l=i(36),h=i(37),c=TypeError,d=h("toPrimitive");t.exports=function(t,e){if(!n(t)||s(t))return t;var i,h=o(t,d);if(h){if(void 0===e&&(e="default"),!n(i=r(h,t,e))||s(i))return i;throw c("Can't convert object to primitive value")}return void 0===e&&(e="number"),l(t,e)}},(t,e,i)=>{var r=i(24),n=i(25),s=n.all;t.exports=n.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:r(t)||t===s}:function(t){return"object"==typeof t?null!==t:r(t)}},(t,e,i)=>{var r=i(25),n=r.all;t.exports=r.IS_HTMLDDA?function(t){return"function"==typeof t||t===n}:function(t){return"function"==typeof t}},t=>{var e="object"==typeof document&&document.all,i=void 0===e&&void 0!==e;t.exports={all:e,IS_HTMLDDA:i}},(t,e,i)=>{var r=i(27),n=i(24),s=i(28),o=i(29),l=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=r("Symbol");return n(e)&&s(e.prototype,l(t))}},(t,e,i)=>{var r=i(7),n=i(24);t.exports=function(t,e){var i;return arguments.length<2?n(i=r[t])?i:void 0:r[t]&&r[t][e]}},(t,e,i)=>{t.exports=i(17)({}.isPrototypeOf)},(t,e,i)=>{t.exports=i(30)&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},(t,e,i)=>{var r=i(31),n=i(10),s=i(7).String;t.exports=!!Object.getOwnPropertySymbols&&!n(function(){var t=Symbol();return!s(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&r&&r<41})},(t,e,i)=>{var r,n,s=i(7),o=i(32),l=s.process,h=s.Deno,c=l&&l.versions||h&&h.version,d=c&&c.v8;d&&(n=(r=d.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!n&&o&&(!(r=o.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=o.match(/Chrome\/(\d+)/))&&(n=+r[1]),t.exports=n},t=>{t.exports="u">typeof navigator&&String(navigator.userAgent)||""},(t,e,i)=>{var r=i(34),n=i(20);t.exports=function(t,e){var i=t[e];return n(i)?void 0:r(i)}},(t,e,i)=>{var r=i(24),n=i(35),s=TypeError;t.exports=function(t){if(r(t))return t;throw s(n(t)+" is not a function")}},t=>{var e=String;t.exports=function(t){try{return e(t)}catch{return"Object"}}},(t,e,i)=>{var r=i(11),n=i(24),s=i(23),o=TypeError;t.exports=function(t,e){var i,l;if("string"===e&&n(i=t.toString)&&!s(l=r(i,t))||n(i=t.valueOf)&&!s(l=r(i,t))||"string"!==e&&n(i=t.toString)&&!s(l=r(i,t)))return l;throw o("Can't convert object to primitive value")}},(t,e,i)=>{var r=i(7),n=i(38),s=i(42),o=i(44),l=i(30),h=i(29),c=r.Symbol,d=n("wks"),u=h?c.for||c:c&&c.withoutSetter||o;t.exports=function(t){return s(d,t)||(d[t]=l&&s(c,t)?c[t]:u("Symbol."+t)),d[t]}},(t,e,i)=>{var r=i(39),n=i(40);(t.exports=function(t,e){return n[t]||(n[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.30.2",mode:r?"pure":"global",copyright:"\xa9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.2/LICENSE",source:"https://github.com/zloirock/core-js"})},t=>{t.exports=!1},(t,e,i)=>{var r=i(7),n=i(41),s="__core-js_shared__";t.exports=r[s]||n(s,{})},(t,e,i)=>{var r=i(7),n=Object.defineProperty;t.exports=function(t,e){try{n(r,t,{value:e,configurable:!0,writable:!0})}catch{r[t]=e}return e}},(t,e,i)=>{var r=i(17),n=i(43),s=r({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return s(n(t),e)}},(t,e,i)=>{var r=i(19),n=Object;t.exports=function(t){return n(r(t))}},(t,e,i)=>{var r=i(17),n=0,s=Math.random(),o=r(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++n+s,36)}},(t,e,i)=>{var r=i(9),n=i(10),s=i(46);t.exports=!r&&!n(function(){return 7!=Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a})},(t,e,i)=>{var r=i(7),n=i(23),s=r.document,o=n(s)&&n(s.createElement);t.exports=function(t){return o?s.createElement(t):{}}},(t,e,i)=>{var r=i(9),n=i(48),s=i(14);t.exports=r?function(t,e,i){return n.f(t,e,s(1,i))}:function(t,e,i){return t[e]=i,t}},(t,e,i)=>{var r=i(9),n=i(45),s=i(49),o=i(50),l=i(21),h=TypeError,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,u="enumerable",p="configurable",f="writable";e.f=r?s?function(t,e,i){if(o(t),e=l(e),o(i),"function"==typeof t&&"prototype"===e&&"value"in i&&f in i&&!i[f]){var r=d(t,e);r&&r[f]&&(t[e]=i.value,i={configurable:p in i?i[p]:r[p],enumerable:u in i?i[u]:r[u],writable:!1})}return c(t,e,i)}:c:function(t,e,i){if(o(t),e=l(e),o(i),n)try{return c(t,e,i)}catch{}if("get"in i||"set"in i)throw h("Accessors not supported");return"value"in i&&(t[e]=i.value),t}},(t,e,i)=>{var r=i(9),n=i(10);t.exports=r&&n(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},(t,e,i)=>{var r=i(23),n=String,s=TypeError;t.exports=function(t){if(r(t))return t;throw s(n(t)+" is not an object")}},(t,e,i)=>{var r=i(24),n=i(48),s=i(52),o=i(41);t.exports=function(t,e,i,l){l||(l={});var h=l.enumerable,c=void 0!==l.name?l.name:e;if(r(i)&&s(i,c,l),l.global)h?t[e]=i:o(e,i);else{try{l.unsafe?t[e]&&(h=!0):delete t[e]}catch{}h?t[e]=i:n.f(t,e,{value:i,enumerable:!1,configurable:!l.nonConfigurable,writable:!l.nonWritable})}return t}},(t,e,i)=>{var r=i(17),n=i(10),s=i(24),o=i(42),l=i(9),h=i(53).CONFIGURABLE,c=i(54),d=i(55),u=d.enforce,p=d.get,f=String,g=Object.defineProperty,m=r("".slice),v=r("".replace),b=r([].join),y=l&&!n(function(){return 8!==g(function(){},"length",{value:8}).length}),A=String(String).split("String"),S=t.exports=function(t,e,i){"Symbol("===m(f(e),0,7)&&(e="["+v(f(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),i&&i.getter&&(e="get "+e),i&&i.setter&&(e="set "+e),(!o(t,"name")||h&&t.name!==e)&&(l?g(t,"name",{value:e,configurable:!0}):t.name=e),y&&i&&o(i,"arity")&&t.length!==i.arity&&g(t,"length",{value:i.arity});try{i&&o(i,"constructor")&&i.constructor?l&&g(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch{}var r=u(t);return o(r,"source")||(r.source=b(A,"string"==typeof e?e:"")),t};Function.prototype.toString=S(function(){return s(this)&&p(this).source||c(this)},"toString")},(t,e,i)=>{var r=i(9),n=i(42),s=Function.prototype,o=r&&Object.getOwnPropertyDescriptor,l=n(s,"name"),h=l&&"something"===(function(){}).name,c=l&&(!r||r&&o(s,"name").configurable);t.exports={EXISTS:l,PROPER:h,CONFIGURABLE:c}},(t,e,i)=>{var r=i(17),n=i(24),s=i(40),o=r(Function.toString);n(s.inspectSource)||(s.inspectSource=function(t){return o(t)}),t.exports=s.inspectSource},(t,e,i)=>{var r,n,s,o=i(56),l=i(7),h=i(23),c=i(47),d=i(42),u=i(40),p=i(57),f=i(58),g="Object already initialized",m=l.TypeError,v=l.WeakMap;if(o||u.state){var b=u.state||(u.state=new v);b.get=b.get,b.has=b.has,b.set=b.set,r=function(t,e){if(b.has(t))throw m(g);return e.facade=t,b.set(t,e),e},n=function(t){return b.get(t)||{}},s=function(t){return b.has(t)}}else{var y=p("state");f[y]=!0,r=function(t,e){if(d(t,y))throw m(g);return e.facade=t,c(t,y,e),e},n=function(t){return d(t,y)?t[y]:{}},s=function(t){return d(t,y)}}t.exports={set:r,get:n,has:s,enforce:function(t){return s(t)?n(t):r(t,{})},getterFor:function(t){return function(e){var i;if(!h(e)||(i=n(e)).type!==t)throw m("Incompatible receiver, "+t+" required");return i}}}},(t,e,i)=>{var r=i(7),n=i(24),s=r.WeakMap;t.exports=n(s)&&/native code/.test(String(s))},(t,e,i)=>{var r=i(38),n=i(44),s=r("keys");t.exports=function(t){return s[t]||(s[t]=n(t))}},t=>{t.exports={}},(t,e,i)=>{var r=i(42),n=i(60),s=i(8),o=i(48);t.exports=function(t,e,i){for(var l=n(e),h=o.f,c=s.f,d=0;d<l.length;d++){var u=l[d];r(t,u)||i&&r(i,u)||h(t,u,c(e,u))}}},(t,e,i)=>{var r=i(27),n=i(17),s=i(61),o=i(70),l=i(50),h=n([].concat);t.exports=r("Reflect","ownKeys")||function(t){var e=s.f(l(t)),i=o.f;return i?h(e,i(t)):e}},(t,e,i)=>{var r=i(62),n=i(69).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,n)}},(t,e,i)=>{var r=i(17),n=i(42),s=i(15),o=i(63).indexOf,l=i(58),h=r([].push);t.exports=function(t,e){var i,r=s(t),c=0,d=[];for(i in r)!n(l,i)&&n(r,i)&&h(d,i);for(;e.length>c;)n(r,i=e[c++])&&(~o(d,i)||h(d,i));return d}},(t,e,i)=>{var r=i(15),n=i(64),s=i(67),o=function(t){return function(e,i,o){var l,h=r(e),c=s(h),d=n(o,c);if(t&&i!=i){for(;c>d;)if((l=h[d++])!=l)return!0}else for(;c>d;d++)if((t||d in h)&&h[d]===i)return t||d||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},(t,e,i)=>{var r=i(65),n=Math.max,s=Math.min;t.exports=function(t,e){var i=r(t);return i<0?n(i+e,0):s(i,e)}},(t,e,i)=>{var r=i(66);t.exports=function(t){var e=+t;return e!=e||0===e?0:r(e)}},t=>{var e=Math.ceil,i=Math.floor;t.exports=Math.trunc||function(t){var r=+t;return(r>0?i:e)(r)}},(t,e,i)=>{var r=i(68);t.exports=function(t){return r(t.length)}},(t,e,i)=>{var r=i(65),n=Math.min;t.exports=function(t){return t>0?n(r(t),0x1fffffffffffff):0}},t=>{t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(t,e)=>{e.f=Object.getOwnPropertySymbols},(t,e,i)=>{var r=i(10),n=i(24),s=/#|\.prototype\./,o=function(t,e){var i=h[l(t)];return i==d||i!=c&&(n(e)?r(e):!!e)},l=o.normalize=function(t){return String(t).replace(s,".").toLowerCase()},h=o.data={},c=o.NATIVE="N",d=o.POLYFILL="P";t.exports=o},(t,e,i)=>{var r=i(37),n=i(73),s=i(48).f,o=r("unscopables"),l=Array.prototype;null==l[o]&&s(l,o,{configurable:!0,value:n(null)}),t.exports=function(t){l[o][t]=!0}},(t,e,i)=>{var r,n=i(50),s=i(74),o=i(69),l=i(58),h=i(76),c=i(46),d=i(57),u="prototype",p="script",f=d("IE_PROTO"),g=function(){},m=function(t){return"<"+p+">"+t+"</"+p+">"},v=function(t){t.write(m("")),t.close();var e=t.parentWindow.Object;return t=null,e},b=function(){try{r=new ActiveXObject("htmlfile")}catch{}b="u">typeof document?document.domain&&r?v(r):function(){var t,e=c("iframe"),i="java"+p+":";return e.style.display="none",h.appendChild(e),e.src=String(i),(t=e.contentWindow.document).open(),t.write(m("document.F=Object")),t.close(),t.F}():v(r);for(var t=o.length;t--;)delete b[u][o[t]];return b()};l[f]=!0,t.exports=Object.create||function(t,e){var i;return null!==t?(g[u]=n(t),i=new g,g[u]=null,i[f]=t):i=b(),void 0===e?i:s.f(i,e)}},(t,e,i)=>{var r=i(9),n=i(49),s=i(48),o=i(50),l=i(15),h=i(75);e.f=r&&!n?Object.defineProperties:function(t,e){o(t);for(var i,r=l(e),n=h(e),c=n.length,d=0;c>d;)s.f(t,i=n[d++],r[i]);return t}},(t,e,i)=>{var r=i(62),n=i(69);t.exports=Object.keys||function(t){return r(t,n)}},(t,e,i)=>{t.exports=i(27)("document","documentElement")},(t,e,i)=>{var r=i(7),n=i(17);t.exports=function(t,e){return n(r[t].prototype[e])}},(t,e,i)=>{i(79)},(t,e,i)=>{var r=i(80),n=i(67),s=i(65),o=r.aTypedArray;(0,r.exportTypedArrayMethod)("at",function(t){var e=o(this),i=n(e),r=s(t),l=r>=0?r:i+r;return l<0||l>=i?void 0:e[l]})},(t,e,i)=>{var r,n,s,o=i(81),l=i(9),h=i(7),c=i(24),d=i(23),u=i(42),p=i(82),f=i(35),g=i(47),m=i(51),v=i(84),b=i(28),y=i(85),A=i(87),S=i(37),_=i(44),x=i(55),w=x.enforce,C=x.get,k=h.Int8Array,E=k&&k.prototype,T=h.Uint8ClampedArray,M=T&&T.prototype,P=k&&y(k),R=E&&y(E),F=Object.prototype,O=h.TypeError,I=S("toStringTag"),D=_("TYPED_ARRAY_TAG"),L="TypedArrayConstructor",N=o&&!!A&&"Opera"!==p(h.opera),j=!1,W={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},B={BigInt64Array:8,BigUint64Array:8},U=function(t){var e=y(t);if(d(e)){var i=C(e);return i&&u(i,L)?i[L]:U(e)}},G=function(t){if(!d(t))return!1;var e=p(t);return u(W,e)||u(B,e)};for(r in W)(s=(n=h[r])&&n.prototype)?w(s)[L]=n:N=!1;for(r in B)(s=(n=h[r])&&n.prototype)&&(w(s)[L]=n);if((!N||!c(P)||P===Function.prototype)&&(P=function(){throw O("Incorrect invocation")},N))for(r in W)h[r]&&A(h[r],P);if((!N||!R||R===F)&&(R=P.prototype,N))for(r in W)h[r]&&A(h[r].prototype,R);if(N&&y(M)!==R&&A(M,R),l&&!u(R,I))for(r in j=!0,v(R,I,{configurable:!0,get:function(){return d(this)?this[D]:void 0}}),W)h[r]&&g(h[r],D,r);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:N,TYPED_ARRAY_TAG:j&&D,aTypedArray:function(t){if(G(t))return t;throw O("Target is not a typed array")},aTypedArrayConstructor:function(t){if(c(t)&&(!A||b(P,t)))return t;throw O(f(t)+" is not a typed array constructor")},exportTypedArrayMethod:function(t,e,i,r){if(l){if(i)for(var n in W){var s=h[n];if(s&&u(s.prototype,t))try{delete s.prototype[t]}catch{try{s.prototype[t]=e}catch{}}}R[t]&&!i||m(R,t,i?e:N&&E[t]||e,r)}},exportTypedArrayStaticMethod:function(t,e,i){var r,n;if(l){if(A){if(i){for(r in W)if((n=h[r])&&u(n,t))try{delete n[t]}catch{}}if(P[t]&&!i)return;try{return m(P,t,i?e:N&&P[t]||e)}catch{}}for(r in W)(n=h[r])&&(!n[t]||i)&&m(n,t,e)}},getTypedArrayConstructor:U,isView:function(t){if(!d(t))return!1;var e=p(t);return"DataView"===e||u(W,e)||u(B,e)},isTypedArray:G,TypedArray:P,TypedArrayPrototype:R}},t=>{t.exports="u">typeof ArrayBuffer&&"u">typeof DataView},(t,e,i)=>{var r=i(83),n=i(24),s=i(18),o=i(37)("toStringTag"),l=Object,h="Arguments"==s(function(){return arguments}());t.exports=r?s:function(t){var e,i,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch{}}(e=l(t),o))?i:h?s(e):"Object"==(r=s(e))&&n(e.callee)?"Arguments":r}},(t,e,i)=>{var r={};r[i(37)("toStringTag")]="z",t.exports="[object z]"===String(r)},(t,e,i)=>{var r=i(52),n=i(48);t.exports=function(t,e,i){return i.get&&r(i.get,e,{getter:!0}),i.set&&r(i.set,e,{setter:!0}),n.f(t,e,i)}},(t,e,i)=>{var r=i(42),n=i(24),s=i(43),o=i(57),l=i(86),h=o("IE_PROTO"),c=Object,d=c.prototype;t.exports=l?c.getPrototypeOf:function(t){var e=s(t);if(r(e,h))return e[h];var i=e.constructor;return n(i)&&e instanceof i?i.prototype:e instanceof c?d:null}},(t,e,i)=>{t.exports=!i(10)(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},(t,e,i)=>{var r=i(88),n=i(50),s=i(89);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=r(Object.prototype,"__proto__","set"))(i,[]),e=i instanceof Array}catch{}return function(i,r){return n(i),s(r),e?t(i,r):i.__proto__=r,i}}():void 0)},(t,e,i)=>{var r=i(17),n=i(34);t.exports=function(t,e,i){try{return r(n(Object.getOwnPropertyDescriptor(t,e)[i]))}catch{}}},(t,e,i)=>{var r=i(24),n=String,s=TypeError;t.exports=function(t){if("object"==typeof t||r(t))return t;throw s("Can't set "+n(t)+" as a prototype")}},(t,e,i)=>{i(91),i(98),i(100),i(123),i(125),t.exports=i(137).structuredClone},(t,e,i)=>{var r=i(15),n=i(72),s=i(92),o=i(55),l=i(48).f,h=i(93),c=i(97),d=i(39),u=i(9),p="Array Iterator",f=o.set,g=o.getterFor(p);t.exports=h(Array,"Array",function(t,e){f(this,{type:p,target:r(t),index:0,kind:e})},function(){var t=g(this),e=t.target,i=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,c(void 0,!0)):c("keys"==i?r:"values"==i?e[r]:[r,e[r]],!1)},"values");var m=s.Arguments=s.Array;if(n("keys"),n("values"),n("entries"),!d&&u&&"values"!==m.name)try{l(m,"name",{value:"values"})}catch{}},t=>{t.exports={}},(t,e,i)=>{var r=i(6),n=i(11),s=i(39),o=i(53),l=i(24),h=i(94),c=i(85),d=i(87),u=i(96),p=i(47),f=i(51),g=i(37),m=i(92),v=i(95),b=o.PROPER,y=o.CONFIGURABLE,A=v.IteratorPrototype,S=v.BUGGY_SAFARI_ITERATORS,_=g("iterator"),x="keys",w="values",C="entries",k=function(){return this};t.exports=function(t,e,i,o,g,v,E){h(i,e,o);var T,M,P,R=function(t){if(t===g&&L)return L;if(!S&&t in I)return I[t];switch(t){case x:case w:case C:return function(){return new i(this,t)}}return function(){return new i(this)}},F=e+" Iterator",O=!1,I=t.prototype,D=I[_]||I["@@iterator"]||g&&I[g],L=!S&&D||R(g),N="Array"==e&&I.entries||D;if(N&&(T=c(N.call(new t)))!==Object.prototype&&T.next&&(s||c(T)===A||(d?d(T,A):l(T[_])||f(T,_,k)),u(T,F,!0,!0),s&&(m[F]=k)),b&&g==w&&D&&D.name!==w&&(!s&&y?p(I,"name",w):(O=!0,L=function(){return n(D,this)})),g)if(M={values:R(w),keys:v?L:R(x),entries:R(C)},E)for(P in M)!S&&!O&&P in I||f(I,P,M[P]);else r({target:e,proto:!0,forced:S||O},M);return s&&!E||I[_]===L||f(I,_,L,{name:g}),m[e]=L,M}},(t,e,i)=>{var r=i(95).IteratorPrototype,n=i(73),s=i(14),o=i(96),l=i(92),h=function(){return this};t.exports=function(t,e,i,c){var d=e+" Iterator";return t.prototype=n(r,{next:s(+!c,i)}),o(t,d,!1,!0),l[d]=h,t}},(t,e,i)=>{var r,n,s,o=i(10),l=i(24),h=i(23),c=i(73),d=i(85),u=i(51),p=i(37),f=i(39),g=p("iterator"),m=!1;[].keys&&("next"in(s=[].keys())?(n=d(d(s)))!==Object.prototype&&(r=n):m=!0),!h(r)||o(function(){var t={};return r[g].call(t)!==t})?r={}:f&&(r=c(r)),l(r[g])||u(r,g,function(){return this}),t.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:m}},(t,e,i)=>{var r=i(48).f,n=i(42),s=i(37)("toStringTag");t.exports=function(t,e,i){t&&!i&&(t=t.prototype),t&&!n(t,s)&&r(t,s,{configurable:!0,value:e})}},t=>{t.exports=function(t,e){return{value:t,done:e}}},(t,e,i)=>{var r=i(83),n=i(51),s=i(99);r||n(Object.prototype,"toString",s,{unsafe:!0})},(t,e,i)=>{var r=i(83),n=i(82);t.exports=r?({}).toString:function(){return"[object "+n(this)+"]"}},(t,e,i)=>{i(101)},(t,e,i)=>{i(102)("Map",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},i(120))},(t,e,i)=>{var r=i(6),n=i(7),s=i(17),o=i(71),l=i(51),h=i(103),c=i(110),d=i(117),u=i(24),p=i(20),f=i(23),g=i(10),m=i(118),v=i(96),b=i(119);t.exports=function(t,e,i){var y=-1!==t.indexOf("Map"),A=-1!==t.indexOf("Weak"),S=y?"set":"add",_=n[t],x=_&&_.prototype,w=_,C={},k=function(t){var e=s(x[t]);l(x,t,"add"==t?function(t){return e(this,0===t?0:t),this}:"delete"==t?function(t){return!(A&&!f(t))&&e(this,0===t?0:t)}:"get"==t?function(t){return A&&!f(t)?void 0:e(this,0===t?0:t)}:"has"==t?function(t){return!(A&&!f(t))&&e(this,0===t?0:t)}:function(t,i){return e(this,0===t?0:t,i),this})};if(o(t,!u(_)||!(A||x.forEach&&!g(function(){new _().entries().next()}))))w=i.getConstructor(e,t,y,S),h.enable();else if(o(t,!0)){var E=new w,T=E[S](A?{}:-0,1)!=E,M=g(function(){E.has(1)}),P=m(function(t){new _(t)}),R=!A&&g(function(){for(var t=new _,e=5;e--;)t[S](e,e);return!t.has(-0)});P||((w=e(function(t,e){d(t,x);var i=b(new _,t,w);return p(e)||c(e,i[S],{that:i,AS_ENTRIES:y}),i})).prototype=x,x.constructor=w),(M||R)&&(k("delete"),k("has"),y&&k("get")),(R||T)&&k(S),A&&x.clear&&delete x.clear}return C[t]=w,r({global:!0,constructor:!0,forced:w!=_},C),v(w,t),A||i.setStrong(w,t,y),w}},(t,e,i)=>{var r=i(6),n=i(17),s=i(58),o=i(23),l=i(42),h=i(48).f,c=i(61),d=i(104),u=i(107),p=i(44),f=i(109),g=!1,m=p("meta"),v=0,b=function(t){h(t,m,{value:{objectID:"O"+v++,weakData:{}}})},y=t.exports={enable:function(){y.enable=function(){},g=!0;var t=c.f,e=n([].splice),i={};i[m]=1,t(i).length&&(c.f=function(i){for(var r=t(i),n=0,s=r.length;n<s;n++)if(r[n]===m){e(r,n,1);break}return r},r({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:d.f}))},fastKey:function(t,e){if(!o(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!l(t,m)){if(!u(t))return"F";if(!e)return"E";b(t)}return t[m].objectID},getWeakData:function(t,e){if(!l(t,m)){if(!u(t))return!0;if(!e)return!1;b(t)}return t[m].weakData},onFreeze:function(t){return f&&g&&u(t)&&!l(t,m)&&b(t),t}};s[m]=!0},(t,e,i)=>{var r=i(18),n=i(15),s=i(61).f,o=i(105),l="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return l&&"Window"==r(t)?function(t){try{return s(t)}catch{return o(l)}}(t):s(n(t))}},(t,e,i)=>{var r=i(64),n=i(67),s=i(106),o=Array,l=Math.max;t.exports=function(t,e,i){for(var h=n(t),c=r(e,h),d=r(void 0===i?h:i,h),u=o(l(d-c,0)),p=0;c<d;c++,p++)s(u,p,t[c]);return u.length=p,u}},(t,e,i)=>{var r=i(21),n=i(48),s=i(14);t.exports=function(t,e,i){var o=r(e);o in t?n.f(t,o,s(0,i)):t[o]=i}},(t,e,i)=>{var r=i(10),n=i(23),s=i(18),o=i(108),l=Object.isExtensible;t.exports=r(function(){})||o?function(t){return!!n(t)&&(!o||"ArrayBuffer"!=s(t))&&(!l||l(t))}:l},(t,e,i)=>{t.exports=i(10)(function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})},(t,e,i)=>{t.exports=!i(10)(function(){return Object.isExtensible(Object.preventExtensions({}))})},(t,e,i)=>{var r=i(111),n=i(11),s=i(50),o=i(35),l=i(113),h=i(67),c=i(28),d=i(114),u=i(115),p=i(116),f=TypeError,g=function(t,e){this.stopped=t,this.result=e},m=g.prototype;t.exports=function(t,e,i){var v,b,y,A,S,_,x,w=i&&i.that,C=!(!i||!i.AS_ENTRIES),k=!(!i||!i.IS_RECORD),E=!(!i||!i.IS_ITERATOR),T=!(!i||!i.INTERRUPTED),M=r(e,w),P=function(t){return v&&p(v,"normal",t),new g(!0,t)},R=function(t){return C?(s(t),T?M(t[0],t[1],P):M(t[0],t[1])):T?M(t,P):M(t)};if(k)v=t.iterator;else if(E)v=t;else{if(!(b=u(t)))throw f(o(t)+" is not iterable");if(l(b)){for(y=0,A=h(t);A>y;y++)if((S=R(t[y]))&&c(m,S))return S;return new g(!1)}v=d(t,b)}for(_=k?t.next:v.next;!(x=n(_,v)).done;){try{S=R(x.value)}catch(t){p(v,"throw",t)}if("object"==typeof S&&S&&c(m,S))return S}return new g(!1)}},(t,e,i)=>{var r=i(112),n=i(34),s=i(12),o=r(r.bind);t.exports=function(t,e){return n(t),void 0===e?t:s?o(t,e):function(){return t.apply(e,arguments)}}},(t,e,i)=>{var r=i(18),n=i(17);t.exports=function(t){if("Function"===r(t))return n(t)}},(t,e,i)=>{var r=i(37),n=i(92),s=r("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||o[s]===t)}},(t,e,i)=>{var r=i(11),n=i(34),s=i(50),o=i(35),l=i(115),h=TypeError;t.exports=function(t,e){var i=arguments.length<2?l(t):e;if(n(i))return s(r(i,t));throw h(o(t)+" is not iterable")}},(t,e,i)=>{var r=i(82),n=i(33),s=i(20),o=i(92),l=i(37)("iterator");t.exports=function(t){if(!s(t))return n(t,l)||n(t,"@@iterator")||o[r(t)]}},(t,e,i)=>{var r=i(11),n=i(50),s=i(33);t.exports=function(t,e,i){var o,l;n(t);try{if(!(o=s(t,"return"))){if("throw"===e)throw i;return i}o=r(o,t)}catch(t){l=!0,o=t}if("throw"===e)throw i;if(l)throw o;return n(o),i}},(t,e,i)=>{var r=i(28),n=TypeError;t.exports=function(t,e){if(r(e,t))return t;throw n("Incorrect invocation")}},(t,e,i)=>{var r=i(37)("iterator"),n=!1;try{var s=0,o={next:function(){return{done:!!s++}},return:function(){n=!0}};o[r]=function(){return this},Array.from(o,function(){throw 2})}catch{}t.exports=function(t,e){if(!e&&!n)return!1;var i=!1;try{var s={};s[r]=function(){return{next:function(){return{done:i=!0}}}},t(s)}catch{}return i}},(t,e,i)=>{var r=i(24),n=i(23),s=i(87);t.exports=function(t,e,i){var o,l;return s&&r(o=e.constructor)&&o!==i&&n(l=o.prototype)&&l!==i.prototype&&s(t,l),t}},(t,e,i)=>{var r=i(73),n=i(84),s=i(121),o=i(111),l=i(117),h=i(20),c=i(110),d=i(93),u=i(97),p=i(122),f=i(9),g=i(103).fastKey,m=i(55),v=m.set,b=m.getterFor;t.exports={getConstructor:function(t,e,i,d){var u=t(function(t,n){l(t,p),v(t,{type:e,index:r(null),first:void 0,last:void 0,size:0}),f||(t.size=0),h(n)||c(n,t[d],{that:t,AS_ENTRIES:i})}),p=u.prototype,m=b(e),y=function(t,e,i){var r,n,s=m(t),o=A(t,e);return o?o.value=i:(s.last=o={index:n=g(e,!0),key:e,value:i,previous:r=s.last,next:void 0,removed:!1},s.first||(s.first=o),r&&(r.next=o),f?s.size++:t.size++,"F"!==n&&(s.index[n]=o)),t},A=function(t,e){var i,r=m(t),n=g(e);if("F"!==n)return r.index[n];for(i=r.first;i;i=i.next)if(i.key==e)return i};return s(p,{clear:function(){for(var t=m(this),e=t.index,i=t.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete e[i.index],i=i.next;t.first=t.last=void 0,f?t.size=0:this.size=0},delete:function(t){var e=this,i=m(e),r=A(e,t);if(r){var n=r.next,s=r.previous;delete i.index[r.index],r.removed=!0,s&&(s.next=n),n&&(n.previous=s),i.first==r&&(i.first=n),i.last==r&&(i.last=s),f?i.size--:e.size--}return!!r},forEach:function(t){for(var e,i=m(this),r=o(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:i.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!A(this,t)}}),s(p,i?{get:function(t){var e=A(this,t);return e&&e.value},set:function(t,e){return y(this,0===t?0:t,e)}}:{add:function(t){return y(this,t=0===t?0:t,t)}}),f&&n(p,"size",{configurable:!0,get:function(){return m(this).size}}),u},setStrong:function(t,e,i){var r=e+" Iterator",n=b(e),s=b(r);d(t,e,function(t,e){v(this,{type:r,target:t,state:n(t),kind:e,last:void 0})},function(){for(var t=s(this),e=t.kind,i=t.last;i&&i.removed;)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?u("keys"==e?i.key:"values"==e?i.value:[i.key,i.value],!1):(t.target=void 0,u(void 0,!0))},i?"entries":"values",!i,!0),p(e)}}},(t,e,i)=>{var r=i(51);t.exports=function(t,e,i){for(var n in e)r(t,n,e[n],i);return t}},(t,e,i)=>{var r=i(27),n=i(84),s=i(37),o=i(9),l=s("species");t.exports=function(t){var e=r(t);o&&e&&!e[l]&&n(e,l,{configurable:!0,get:function(){return this}})}},(t,e,i)=>{i(124)},(t,e,i)=>{i(102)("Set",function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},i(120))},(t,e,i)=>{var r,n=i(39),s=i(6),o=i(7),l=i(27),h=i(17),c=i(10),d=i(44),u=i(24),p=i(126),f=i(20),g=i(23),m=i(26),v=i(110),b=i(50),y=i(82),A=i(42),S=i(106),_=i(47),x=i(67),w=i(127),C=i(128),k=i(130),E=i(131),T=i(132),M=i(133),P=o.Object,R=o.Array,F=o.Date,O=o.Error,I=o.EvalError,D=o.RangeError,L=o.ReferenceError,N=o.SyntaxError,j=o.TypeError,W=o.URIError,B=o.PerformanceMark,U=o.WebAssembly,G=U&&U.CompileError||O,H=U&&U.LinkError||O,q=U&&U.RuntimeError||O,z=l("DOMException"),V=k.Map,X=k.has,$=k.get,Y=k.set,K=E.Set,J=E.add,Q=l("Object","keys"),Z=h([].push),tt=h((!0).valueOf),te=h(1..valueOf),ti=h("".valueOf),tr=h(F.prototype.getTime),tn=d("structuredClone"),ta="DataCloneError",ts="Transferring",to=function(t){return!c(function(){var e=new o.Set([7]),i=t(e),r=t(P(7));return i==e||!i.has(7)||"object"!=typeof r||7!=r})&&t},tl=function(t,e){return!c(function(){var i=new e,r=t({a:i,b:i});return!(r&&r.a===r.b&&r.a instanceof e&&r.a.stack===i.stack)})},th=o.structuredClone,tc=n||!tl(th,O)||!tl(th,z)||(r=th,!!c(function(){var t=r(new o.AggregateError([1],tn,{cause:3}));return"AggregateError"!=t.name||1!=t.errors[0]||t.message!=tn||3!=t.cause})),td=!th&&to(function(t){return new B(tn,{detail:t}).detail}),tu=to(th)||td,tp=function(t){throw new z("Uncloneable type: "+t,ta)},tf=function(t,e){throw new z((e||"Cloning")+" of "+t+" cannot be properly polyfilled in this engine",ta)},tg=function(t,e){return tu||tf(e),tu(t)},tm=function(t,e){if(m(t)&&tp("Symbol"),!g(t))return t;if(e){if(X(e,t))return $(e,t)}else e=new V;var i,r,n,s,h,c,d,p,f,v,b,w=y(t),k=!1;switch(w){case"Array":n=R(x(t)),k=!0;break;case"Object":n={},k=!0;break;case"Map":n=new V,k=!0;break;case"Set":n=new K,k=!0;break;case"RegExp":n=new RegExp(t.source,C(t));break;case"Error":switch(r=t.name){case"AggregateError":n=l("AggregateError")([]);break;case"EvalError":n=I();break;case"RangeError":n=D();break;case"ReferenceError":n=L();break;case"SyntaxError":n=N();break;case"TypeError":n=j();break;case"URIError":n=W();break;case"CompileError":n=G();break;case"LinkError":n=H();break;case"RuntimeError":n=q();break;default:n=O()}k=!0;break;case"DOMException":n=new z(t.message,t.name),k=!0;break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":g(i=o[w])||tf(w),n=new i(tm(t.buffer,e),t.byteOffset,"DataView"===w?t.byteLength:t.length);break;case"DOMQuad":try{n=new DOMQuad(tm(t.p1,e),tm(t.p2,e),tm(t.p3,e),tm(t.p4,e))}catch{n=tg(t,w)}break;case"File":if(tu)try{n=tu(t),y(n)!==w&&(n=void 0)}catch{}if(!n)try{n=new File([t],t.name,t)}catch{}n||tf(w);break;case"FileList":if(s=function(){var t;try{t=new o.DataTransfer}catch{try{t=new o.ClipboardEvent("").clipboardData}catch{}}return t&&t.items&&t.files?t:null}()){for(h=0,c=x(t);h<c;h++)s.items.add(tm(t[h],e));n=s.files}else n=tg(t,w);break;case"ImageData":try{n=new ImageData(tm(t.data,e),t.width,t.height,{colorSpace:t.colorSpace})}catch{n=tg(t,w)}break;default:if(tu)n=tu(t);else switch(w){case"BigInt":n=P(t.valueOf());break;case"Boolean":n=P(tt(t));break;case"Number":n=P(te(t));break;case"String":n=P(ti(t));break;case"Date":n=new F(tr(t));break;case"ArrayBuffer":(i=o.DataView)||"function"==typeof t.slice||tf(w);try{if("function"!=typeof t.slice||t.resizable)for(c=t.byteLength,b=("maxByteLength"in t)?{maxByteLength:t.maxByteLength}:void 0,n=new ArrayBuffer(c,b),f=new i(t),v=new i(n),h=0;h<c;h++)v.setUint8(h,f.getUint8(h));else n=t.slice(0)}catch{throw new z("ArrayBuffer is detached",ta)}break;case"SharedArrayBuffer":n=t;break;case"Blob":try{n=t.slice(0,t.size,t.type)}catch{tf(w)}break;case"DOMPoint":case"DOMPointReadOnly":i=o[w];try{n=i.fromPoint?i.fromPoint(t):new i(t.x,t.y,t.z,t.w)}catch{tf(w)}break;case"DOMRect":case"DOMRectReadOnly":i=o[w];try{n=i.fromRect?i.fromRect(t):new i(t.x,t.y,t.width,t.height)}catch{tf(w)}break;case"DOMMatrix":case"DOMMatrixReadOnly":i=o[w];try{n=i.fromMatrix?i.fromMatrix(t):new i(t)}catch{tf(w)}break;case"AudioData":case"VideoFrame":u(t.clone)||tf(w);try{n=t.clone()}catch{tp(w)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":tf(w);default:tp(w)}}if(Y(e,t,n),k)switch(w){case"Array":case"Object":for(d=Q(t),h=0,c=x(d);h<c;h++)p=d[h],S(n,p,tm(t[p],e));break;case"Map":t.forEach(function(t,i){Y(n,tm(i,e),tm(t,e))});break;case"Set":t.forEach(function(t){J(n,tm(t,e))});break;case"Error":_(n,"message",tm(t.message,e)),A(t,"cause")&&_(n,"cause",tm(t.cause,e)),"AggregateError"==r&&(n.errors=tm(t.errors,e));case"DOMException":T&&_(n,"stack",tm(t.stack,e))}return n};s({global:!0,enumerable:!0,sham:!M,forced:tc},{structuredClone:function(t){var e,i=w(arguments.length,1)>1&&!f(arguments[1])?b(arguments[1]):void 0,r=i?i.transfer:void 0;return void 0!==r&&function(t,e){if(!g(t))throw j("Transfer option cannot be converted to a sequence");var i=[];v(t,function(t){Z(i,b(t))});var r,n,s,l,h,c,d=0,f=x(i);if(M)for(l=th(i,{transfer:i});d<f;)Y(e,i[d],l[d++]);else for(;d<f;){if(X(e,r=i[d++]))throw new z("Duplicate transferable",ta);switch(n=y(r)){case"ImageBitmap":p(s=o.OffscreenCanvas)||tf(n,ts);try{(c=new s(r.width,r.height)).getContext("bitmaprenderer").transferFromImageBitmap(r),h=c.transferToImageBitmap()}catch{}break;case"AudioData":case"VideoFrame":u(r.clone)&&u(r.close)||tf(n,ts);try{h=r.clone(),r.close()}catch{}break;case"ArrayBuffer":u(r.transfer)||tf(n,ts),h=r.transfer();break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":tf(n,ts)}if(void 0===h)throw new z("This object cannot be transferred: "+n,ta);Y(e,r,h)}}(r,e=new V),tm(t,e)}})},(t,e,i)=>{var r=i(17),n=i(10),s=i(24),o=i(82),l=i(27),h=i(54),c=function(){},d=[],u=l("Reflect","construct"),p=/^\s*(?:class|function)\b/,f=r(p.exec),g=!p.exec(c),m=function(t){if(!s(t))return!1;try{return u(c,d,t),!0}catch{return!1}},v=function(t){if(!s(t))return!1;switch(o(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return g||!!f(p,h(t))}catch{return!0}};v.sham=!0,t.exports=!u||n(function(){var t;return m(m.call)||!m(Object)||!m(function(){t=!0})||t})?v:m},t=>{var e=TypeError;t.exports=function(t,i){if(t<i)throw e("Not enough arguments");return t}},(t,e,i)=>{var r=i(11),n=i(42),s=i(28),o=i(129),l=RegExp.prototype;t.exports=function(t){var e=t.flags;return void 0!==e||"flags"in l||n(t,"flags")||!s(l,t)?e:r(o,t)}},(t,e,i)=>{var r=i(50);t.exports=function(){var t=r(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},(t,e,i)=>{var r=i(17),n=Map.prototype;t.exports={Map,set:r(n.set),get:r(n.get),has:r(n.has),remove:r(n.delete),proto:n}},(t,e,i)=>{var r=i(17),n=Set.prototype;t.exports={Set,add:r(n.add),has:r(n.has),remove:r(n.delete),proto:n}},(t,e,i)=>{var r=i(10),n=i(14);t.exports=!r(function(){var t=Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",n(1,7)),7!==t.stack)})},(t,e,i)=>{var r=i(7),n=i(10),s=i(31),o=i(134),l=i(135),h=i(136),c=r.structuredClone;t.exports=!!c&&!n(function(){if(l&&s>92||h&&s>94||o&&s>97)return!1;var t=new ArrayBuffer(8),e=c(t,{transfer:[t]});return 0!=t.byteLength||8!=e.byteLength})},(t,e,i)=>{var r=i(135),n=i(136);t.exports=!r&&!n&&"object"==typeof window&&"object"==typeof document},t=>{t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},(t,e,i)=>{var r=i(18);t.exports="u">typeof process&&"process"==r(process)},(t,e,i)=>{t.exports=i(7)},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var k,t,e,a,re,w,pe,p,h,l,c,b,L,m,Ae,x,I,_e,i,A,_document,_document$currentScri,_util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(139),_display_utils=__w_pdfjs_require__(142),_font_loader=__w_pdfjs_require__(145),_canvas=__w_pdfjs_require__(146),_worker_options=__w_pdfjs_require__(149),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(150),_metadata=__w_pdfjs_require__(151),_optional_content_config=__w_pdfjs_require__(152),_transport_stream=__w_pdfjs_require__(153),_xfa_text=__w_pdfjs_require__(154);let DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){let{NodeCanvasFactory:s,NodeCMapReaderFactory:r,NodeFilterFactory:u,NodeStandardFontDataFactory:C}=__w_pdfjs_require__(155);exports.DefaultCanvasFactory=DefaultCanvasFactory=s,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=r,exports.DefaultFilterFactory=DefaultFilterFactory=u,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=C}if(_is_node.isNodeJS){let{PDFNodeStream:s}=__w_pdfjs_require__(156);createPDFNetworkStream=t=>new s(t)}else{let{PDFNetworkStream:s}=__w_pdfjs_require__(159),{PDFFetchStream:r}=__w_pdfjs_require__(160);createPDFNetworkStream=t=>(0,_display_utils.isValidFetchUrl)(t.url)?new r(t):new s(t)}function getDocument(t){if("string"==typeof t||t instanceof URL?t={url:t}:(0,_util.isArrayBuffer)(t)&&(t={data:t}),"object"!=typeof t)throw Error("Invalid parameter in getDocument, need parameter object.");if(!t.url&&!t.data&&!t.range)throw Error("Invalid parameter object: need either .data, .range or .url");let e=new PDFDocumentLoadingTask,{docId:i}=e,r=t.url?getUrlProp(t.url):null,n=t.data?getDataProp(t.data):null,s=t.httpHeaders||null,o=!0===t.withCredentials,l=t.password??null,h=t.range instanceof PDFDataRangeTransport?t.range:null,c=Number.isInteger(t.rangeChunkSize)&&t.rangeChunkSize>0?t.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE,d=t.worker instanceof PDFWorker?t.worker:null,u=t.verbosity,p="string"!=typeof t.docBaseUrl||(0,_display_utils.isDataScheme)(t.docBaseUrl)?null:t.docBaseUrl,f="string"==typeof t.cMapUrl?t.cMapUrl:null,g=!1!==t.cMapPacked,m=t.CMapReaderFactory||DefaultCMapReaderFactory,v="string"==typeof t.standardFontDataUrl?t.standardFontDataUrl:null,b=t.StandardFontDataFactory||DefaultStandardFontDataFactory,y=!0!==t.stopAtErrors,A=Number.isInteger(t.maxImageSize)&&t.maxImageSize>-1?t.maxImageSize:-1,S=!1!==t.isEvalSupported,_="boolean"==typeof t.isOffscreenCanvasSupported?t.isOffscreenCanvasSupported:!_is_node.isNodeJS,x=Number.isInteger(t.canvasMaxAreaInBytes)?t.canvasMaxAreaInBytes:-1,w="boolean"==typeof t.disableFontFace?t.disableFontFace:_is_node.isNodeJS,C=!0===t.fontExtraProperties,k=!0===t.enableXfa,E=t.ownerDocument||globalThis.document,T=!0===t.disableRange,M=!0===t.disableStream,P=!0===t.disableAutoFetch,R=!0===t.pdfBug,F=h?h.length:t.length??NaN,O="boolean"==typeof t.useSystemFonts?t.useSystemFonts:!_is_node.isNodeJS&&!w,I="boolean"==typeof t.useWorkerFetch?t.useWorkerFetch:m===_display_utils.DOMCMapReaderFactory&&b===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(f,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(v,document.baseURI),D=t.canvasFactory||new DefaultCanvasFactory({ownerDocument:E}),L=t.filterFactory||new DefaultFilterFactory({docId:i,ownerDocument:E});(0,_util.setVerbosityLevel)(u);let N={canvasFactory:D,filterFactory:L};if(I||(N.cMapReaderFactory=new m({baseUrl:f,isCompressed:g}),N.standardFontDataFactory=new b({baseUrl:v})),!d){let t={verbosity:u,port:_worker_options.GlobalWorkerOptions.workerPort};e._worker=d=t.port?PDFWorker.fromPort(t):new PDFWorker(t)}let j={docId:i,apiVersion:"3.7.107",data:n,password:l,disableAutoFetch:P,rangeChunkSize:c,length:F,docBaseUrl:p,enableXfa:k,evaluatorOptions:{maxImageSize:A,disableFontFace:w,ignoreErrors:y,isEvalSupported:S,isOffscreenCanvasSupported:_,canvasMaxAreaInBytes:x,fontExtraProperties:C,useSystemFonts:O,cMapUrl:I?f:null,standardFontDataUrl:I?v:null}},W={ignoreErrors:y,isEvalSupported:S,disableFontFace:w,fontExtraProperties:C,enableXfa:k,ownerDocument:E,disableAutoFetch:P,pdfBug:R,styleElement:null};return d.promise.then(function(){if(e.destroyed)throw Error("Loading aborted");return Promise.all([_fetchDocument(d,j),new Promise(function(t){let e;h?e=new _transport_stream.PDFDataTransportStream({length:F,initialData:h.initialData,progressiveDone:h.progressiveDone,contentDispositionFilename:h.contentDispositionFilename,disableRange:T,disableStream:M},h):n||(e=createPDFNetworkStream({url:r,length:F,httpHeaders:s,withCredentials:o,rangeChunkSize:c,disableRange:T,disableStream:M})),t(e)})]).then(function(t){let[r,n]=t;if(e.destroyed)throw Error("Loading aborted");let s=new _message_handler.MessageHandler(i,r,d.port),o=new WorkerTransport(s,e,n,W,N);e._transport=o,s.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(t,e){if(t.destroyed)throw Error("Worker was destroyed");let i=await t.messageHandler.sendWithPromise("GetDocRequest",e,e.data?[e.data.buffer]:null);if(t.destroyed)throw Error("Worker was destroyed");return i}function getUrlProp(t){if(t instanceof URL)return t.href;try{return new URL(t,window.location).href}catch{if(_is_node.isNodeJS&&"string"==typeof t)return t}throw Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(t){if(_is_node.isNodeJS&&"u">typeof Buffer&&t instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(t);if(t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength)return t;if("string"==typeof t)return(0,_util.stringToBytes)(t);if("object"==typeof t&&!isNaN(null==t?void 0:t.length)||(0,_util.isArrayBuffer)(t))return new Uint8Array(t);throw Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}let d=class{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId="d"+ue(d,k)._++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var t;this.destroyed=!0,await (null==(t=this._transport)?void 0:t.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}},PDFDocumentLoadingTask=d;k=new WeakMap,et(PDFDocumentLoadingTask,k,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.length=t,this.initialData=e,this.progressiveDone=i,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(let i of this._rangeListeners)i(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(let i of this._progressListeners)i(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(let e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(let t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(i,r,n){et(this,a),et(this,w),et(this,t,null),et(this,e,!1);let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._pageIndex=i,this._pageInfo=r,this._transport=n,this._stats=s?new _display_utils.StatTimer:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:i,rotation:r=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:o=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale:i,rotation:r,offsetX:n,offsetY:s,dontFlip:o})}getAnnotations(){let{intent:i="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this._transport.getRenderingIntent(i);return this._transport.getAnnotations(this._pageIndex,r.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var i;return(null==(i=this._transport._htmlForXfa)?void 0:i.children[this._pageIndex])||null}render(i){var r,n,s;let{canvasContext:o,viewport:l,intent:h="display",annotationMode:c=_util.AnnotationMode.ENABLE,transform:d=null,background:u=null,optionalContentConfigPromise:p=null,annotationCanvasMap:f=null,pageColors:g=null,printAnnotationStorage:m=null}=i;if(null!=(r=arguments[0])&&r.canvasFactory)throw Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");null==(n=this._stats)||n.time("Overall");let v=this._transport.getRenderingIntent(h,c,m);ut(this,e,!1),nt(this,w,pe).call(this),p||(p=this._transport.getOptionalContentConfig());let b=this._intentStates.get(v.cacheKey);b||(b=Object.create(null),this._intentStates.set(v.cacheKey,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);let y=!!(v.renderingIntent&_util.RenderingIntentFlag.PRINT);b.displayReadyCapability||(b.displayReadyCapability=new _util.PromiseCapability,b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(s=this._stats)||s.time("Page Request"),this._pumpOperatorList(v));let A=i=>{var r,n;b.renderTasks.delete(S),(this._maybeCleanupAfterRender||y)&&ut(this,e,!0),nt(this,a,re).call(this,!y),i?(S.capability.reject(i),this._abortOperatorList({intentState:b,reason:i instanceof Error?i:Error(i)})):S.capability.resolve(),null==(r=this._stats)||r.timeEnd("Rendering"),null==(n=this._stats)||n.timeEnd("Overall")},S=new InternalRenderTask({callback:A,params:{canvasContext:o,viewport:l,transform:d,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!y,pdfBug:this._pdfBug,pageColors:g});(b.renderTasks||(b.renderTasks=new Set)).add(S);let _=S.task;return Promise.all([b.displayReadyCapability.promise,p]).then(i=>{var r;let[n,s]=i;T(this,e)?A():(null==(r=this._stats)||r.time("Rendering"),S.initializeGraphics({transparency:n,optionalContentConfig:s}),S.operatorListChanged())}).catch(A),_}getOperatorList(){let{intent:i="display",annotationMode:r=_util.AnnotationMode.ENABLE,printAnnotationStorage:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=this._transport.getRenderingIntent(i,r,n,!0),o,l=this._intentStates.get(s.cacheKey);if(l||(l=Object.create(null),this._intentStates.set(s.cacheKey,l)),!l.opListReadCapability){var h;(o=Object.create(null)).operatorListChanged=function(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(o))},l.opListReadCapability=new _util.PromiseCapability,(l.renderTasks||(l.renderTasks=new Set)).add(o),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null==(h=this._stats)||h.time("Page Request"),this._pumpOperatorList(s)}return l.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:i=!1,disableNormalization:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===i,disableNormalization:!0===r},{highWaterMark:100,size:i=>i.items.length})}getTextContent(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(i=>_xfa_text.XfaText.textContent(i));let r=this.streamTextContent(i);return new Promise(function(i,n){let s=r.getReader(),o={items:[],styles:Object.create(null)};!function r(){s.read().then(function(n){let{value:s,done:l}=n;l?i(o):(Object.assign(o.styles,s.styles),o.items.push(...s.items),r())},n)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;let i=[];for(let r of this._intentStates.values())if(this._abortOperatorList({intentState:r,reason:Error("Page was destroyed."),force:!0}),!r.opListReadCapability)for(let n of r.renderTasks)i.push(n.completed),n.cancel();return this.objs.clear(),ut(this,e,!1),nt(this,w,pe).call(this),Promise.all(i)}cleanup(){let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];ut(this,e,!0);let r=nt(this,a,re).call(this,!1);return i&&r&&this._stats&&(this._stats=new _display_utils.StatTimer),r}_startRenderPage(i,r){var n,s;let o=this._intentStates.get(r);o&&(null==(n=this._stats)||n.timeEnd("Page Request"),null==(s=o.displayReadyCapability)||s.resolve(i))}_renderPageChunk(i,r){for(let n=0,s=i.length;n<s;n++)r.operatorList.fnArray.push(i.fnArray[n]),r.operatorList.argsArray.push(i.argsArray[n]);for(let n of(r.operatorList.lastChunk=i.lastChunk,r.operatorList.separateAnnots=i.separateAnnots,r.renderTasks))n.operatorListChanged();i.lastChunk&&nt(this,a,re).call(this,!0)}_pumpOperatorList(i){let{renderingIntent:r,cacheKey:n,annotationStorageMap:s}=i,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:r,cacheKey:n,annotationStorage:s}).getReader(),l=this._intentStates.get(n);l.streamReader=o;let h=()=>{o.read().then(i=>{let{value:r,done:n}=i;n?l.streamReader=null:this._transport.destroyed||(this._renderPageChunk(r,l),h())},i=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){for(let i of(l.operatorList.lastChunk=!0,l.renderTasks))i.operatorListChanged();nt(this,a,re).call(this,!0)}if(l.displayReadyCapability)l.displayReadyCapability.reject(i);else{if(!l.opListReadCapability)throw i;l.opListReadCapability.reject(i)}}})};h()}_abortOperatorList(i){let{intentState:r,reason:n,force:s=!1}=i;if(r.streamReader){if(r.streamReaderCancelTimeout&&(clearTimeout(r.streamReaderCancelTimeout),r.streamReaderCancelTimeout=null),!s){if(r.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException){let i=RENDERING_CANCELLED_TIMEOUT;n.extraDelay>0&&n.extraDelay<1e3&&(i+=n.extraDelay),r.streamReaderCancelTimeout=setTimeout(()=>{r.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:r,reason:n,force:!0})},i);return}}if(r.streamReader.cancel(new _util.AbortException(n.message)).catch(()=>{}),r.streamReader=null,!this._transport.destroyed){for(let[i,n]of this._intentStates)if(n===r){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}t=new WeakMap,e=new WeakMap,a=new WeakSet,re=function(){let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(nt(this,w,pe).call(this),!T(this,e))return!1;if(i)return ut(this,t,setTimeout(()=>{ut(this,t,null),nt(this,a,re).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(let{renderTasks:i,operatorList:r}of this._intentStates.values())if(i.size>0||!r.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ut(this,e,!1),!0},w=new WeakSet,pe=function(){T(this,t)&&(clearTimeout(T(this,t)),ut(this,t,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){et(this,p,new Set),et(this,h,Promise.resolve())}postMessage(t,e){let i={data:structuredClone(t,null)};T(this,h).then(()=>{for(let t of T(this,p))t.call(this,i)})}addEventListener(t,e){T(this,p).add(e)}removeEventListener(t,e){T(this,p).delete(e)}terminate(){T(this,p).clear()}}p=new WeakMap,h=new WeakMap,exports.LoopbackPort=LoopbackPort;let PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS&&1)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){let s=null==(_document=document)||null==(_document$currentScri=_document.currentScript)?void 0:_document$currentScri.src;s&&(PDFWorkerUtil.fallbackWorkerSrc=s.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(t,e){let i;try{if(!(i=new URL(t)).origin||"null"===i.origin)return!1}catch{return!1}let r=new URL(e,i);return i.origin===r.origin},PDFWorkerUtil.createCDNWrapper=function(t){let e=`importScripts("${t}");`;return URL.createObjectURL(new Blob([e]))};let _PDFWorker=class{constructor(){let{name:t=null,port:e=null,verbosity:i=(0,_util.getVerbosityLevel)()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e&&T(_PDFWorker,l).has(e))throw Error("Cannot use more than one PDFWorker per port.");this.name=t,this.destroyed=!1,this.verbosity=i,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,e?(T(_PDFWorker,l).set(e,this),this._initializeFromPort(e)):this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new _message_handler.MessageHandler("main","worker",t),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:t}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,t)||(t=PDFWorkerUtil.createCDNWrapper(new URL(t,window.location).href));let e=new Worker(t),i=new _message_handler.MessageHandler("main","worker",e),r=()=>{e.removeEventListener("error",n),i.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(Error("Worker was destroyed")):this._setupFakeWorker()},n=()=>{this._webWorker||r()};e.addEventListener("error",n),i.on("test",t=>{e.removeEventListener("error",n),this.destroyed?r():t?(this._messageHandler=i,this._port=e,this._webWorker=e,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),i.destroy(),e.terminate())}),i.on("ready",t=>{if(e.removeEventListener("error",n),this.destroyed)r();else try{s()}catch{this._setupFakeWorker()}});let s=()=>{let t=new Uint8Array;i.send("test",t,[t.buffer])};s();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(t=>{if(this.destroyed)return void this._readyCapability.reject(Error("Worker was destroyed"));let e=new LoopbackPort;this._port=e;let i="fake"+PDFWorkerUtil.fakeWorkerId++,r=new _message_handler.MessageHandler(i+"_worker",i,e);t.setup(r,e);let n=new _message_handler.MessageHandler(i,i+"_worker",e);this._messageHandler=n,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})}).catch(t=>{this._readyCapability.reject(Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),T(_PDFWorker,l).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(t){if(null==t||!t.port)throw Error("PDFWorker.fromPort - invalid method signature.");return T(this,l).has(t.port)?T(this,l).get(t.port):new _PDFWorker(t)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{var t;return(null==(t=globalThis.pdfjsWorker)?void 0:t.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){let loader=async()=>{let mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&1){let worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await (0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}},PDFWorker=_PDFWorker;l=new WeakMap,et(PDFWorker,l,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(t,e,i,r,n){et(this,m),et(this,c,new Map),et(this,b,new Map),et(this,L,new Map),this.messageHandler=t,this.loadingTask=e,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this._params=r,this.canvasFactory=n.canvasFactory,this.filterFactory=n.filterFactory,this.cMapReaderFactory=n.cMapReaderFactory,this.standardFontDataFactory=n.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=i,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_util.AnnotationMode.ENABLE,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=_util.RenderingIntentFlag.DISPLAY,s=null;switch(t){case"any":n=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":n=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${t}`)}switch(e){case _util.AnnotationMode.DISABLE:n+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:n+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:n+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,s=(n&_util.RenderingIntentFlag.PRINT&&i instanceof _annotation_storage.PrintAnnotationStorage?i:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${e}`)}return r&&(n+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:n,cacheKey:`${n}_${_annotation_storage.AnnotationStorage.getHash(s)}`,annotationStorageMap:s}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(Error("Worker was destroyed during onPassword callback"));let t=[];for(let e of T(this,b).values())t.push(e._destroy());T(this,b).clear(),T(this,L).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();let e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),T(this,c).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){let{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(t,e)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=t=>{this._lastProgress={loaded:t.loaded,total:t.total}},e.onPull=()=>{this._fullReader.read().then(function(t){let{value:i,done:r}=t;r?e.close():((0,_util.assert)(i instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(i),1,[i]))}).catch(t=>{e.error(t)})},e.onCancel=t=>{this._fullReader.cancel(t),e.ready.catch(t=>{if(!this.destroyed)throw t})}}),t.on("ReaderHeadersReady",t=>{let i=new _util.PromiseCapability,r=this._fullReader;return r.headersReady.then(()=>{if(!r.isStreamingSupported||!r.isRangeSupported){if(this._lastProgress){var t;null==(t=e.onProgress)||t.call(e,this._lastProgress)}r.onProgress=t=>{var i;null==(i=e.onProgress)||i.call(e,{loaded:t.loaded,total:t.total})}}i.resolve({isStreamingSupported:r.isStreamingSupported,isRangeSupported:r.isRangeSupported,contentLength:r.contentLength})},i.reject),i.promise}),t.on("GetRangeReader",(t,e)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");let i=this._networkStream.getRangeReader(t.begin,t.end);i?(e.onPull=()=>{i.read().then(function(t){let{value:i,done:r}=t;r?e.close():((0,_util.assert)(i instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),e.enqueue(new Uint8Array(i),1,[i]))}).catch(t=>{e.error(t)})},e.onCancel=t=>{i.cancel(t),e.ready.catch(t=>{if(!this.destroyed)throw t})}):e.close()}),t.on("GetDoc",t=>{let{pdfInfo:i}=t;this._numPages=i.numPages,this._htmlForXfa=i.htmlForXfa,delete i.htmlForXfa,e._capability.resolve(new PDFDocumentProxy(i,this))}),t.on("DocException",function(t){let i;switch(t.name){case"PasswordException":i=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":i=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":i=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":i=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":i=new _util.UnknownErrorException(t.message,t.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}e._capability.reject(i)}),t.on("PasswordRequest",t=>{if(this._passwordCapability=new _util.PromiseCapability,e.onPassword){let i=t=>{t instanceof Error?this._passwordCapability.reject(t):this._passwordCapability.resolve({password:t})};try{e.onPassword(i,t.code)}catch(t){this._passwordCapability.reject(t)}}else this._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return this._passwordCapability.promise}),t.on("DataLoaded",t=>{var i;null==(i=e.onProgress)||i.call(e,{loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)}),t.on("StartRenderPage",t=>{this.destroyed||T(this,b).get(t.pageIndex)._startRenderPage(t.transparency,t.cacheKey)}),t.on("commonobj",e=>{var i;let[r,n,s]=e;if(!this.destroyed&&!this.commonObjs.has(r))switch(n){case"Font":let o=this._params;if("error"in s){let t=s.error;(0,_util.warn)(`Error during font loading: ${t}`),this.commonObjs.resolve(r,t);break}let l=o.pdfBug&&null!=(i=globalThis.FontInspector)&&i.enabled?(t,e)=>globalThis.FontInspector.fontAdded(t,e):null,h=new _font_loader.FontFaceObject(s,{isEvalSupported:o.isEvalSupported,disableFontFace:o.disableFontFace,ignoreErrors:o.ignoreErrors,inspectFont:l});this.fontLoader.bind(h).catch(e=>t.sendWithPromise("FontFallback",{id:r})).finally(()=>{!o.fontExtraProperties&&h.data&&(h.data=null),this.commonObjs.resolve(r,h)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,s);break;default:throw Error(`Got unknown common object type ${n}`)}}),t.on("obj",t=>{let[e,i,r,n]=t;if(this.destroyed)return;let s=T(this,b).get(i);if(!s.objs.has(e))switch(r){case"Image":if(s.objs.resolve(e,n),n){let t;if(n.bitmap){let{width:e,height:i}=n;t=e*i*4}else{var o;t=(null==(o=n.data)?void 0:o.length)||0}t>_util.MAX_IMAGE_SIZE_TO_CACHE&&(s._maybeCleanupAfterRender=!0)}break;case"Pattern":s.objs.resolve(e,n);break;default:throw Error(`Got unknown object type ${r}`)}}),t.on("DocProgress",t=>{var i;this.destroyed||null==(i=e.onProgress)||i.call(e,{loaded:t.loaded,total:t.total})}),t.on("FetchBuiltInCMap",t=>this.destroyed?Promise.reject(Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(t):Promise.reject(Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",t=>this.destroyed?Promise.reject(Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(t):Promise.reject(Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var t;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:(null==(t=this._fullReader)?void 0:t.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(Error("Invalid page request."));let e=t-1,i=T(this,L).get(e);if(i)return i;let r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(t=>{if(this.destroyed)throw Error("Transport destroyed");let i=new PDFPageProxy(e,t,this,this._params.pdfBug);return T(this,b).set(e,i),i});return T(this,L).set(e,r),r}getPageIndex(t){return"object"!=typeof t||null===t||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return nt(this,m,Ae).call(this,"GetFieldObjects")}hasJSActions(){return nt(this,m,Ae).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return"string"!=typeof t?Promise.reject(Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(t=>new _optional_content_config.OptionalContentConfig(t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){let t="GetMetadata",e=T(this,c).get(t);if(e)return e;let i=this.messageHandler.sendWithPromise(t,null).then(t=>{var e,i;return{info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:(null==(e=this._fullReader)?void 0:e.filename)??null,contentLength:(null==(i=this._fullReader)?void 0:i.contentLength)??null}});return T(this,c).set(t,i),i}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){for(let t of(await this.messageHandler.sendWithPromise("Cleanup",null),T(this,b).values()))if(!t.cleanup())throw Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),T(this,c).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){let{disableAutoFetch:t,enableXfa:e}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t,enableXfa:e})}}c=new WeakMap,b=new WeakMap,L=new WeakMap,m=new WeakSet,Ae=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=T(this,c).get(t);if(i)return i;let r=this.messageHandler.sendWithPromise(t,e);return T(this,c).set(t,r),r};class PDFObjects{constructor(){et(this,I),et(this,x,Object.create(null))}get(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){let i=nt(this,I,_e).call(this,t);return i.capability.promise.then(()=>e(i.data)),null}let i=T(this,x)[t];if(null==i||!i.capability.settled)throw Error(`Requesting object that isn't resolved yet ${t}.`);return i.data}has(t){let e=T(this,x)[t];return(null==e?void 0:e.capability.settled)||!1}resolve(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=nt(this,I,_e).call(this,t);i.data=e,i.capability.resolve()}clear(){for(let e in T(this,x)){var t;let{data:i}=T(this,x)[e];null==i||null==(t=i.bitmap)||t.close()}ut(this,x,Object.create(null))}}x=new WeakMap,I=new WeakSet,_e=function(t){return T(this,x)[t]||(T(this,x)[t]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(t){et(this,i,null),ut(this,i,t),this.onContinue=null}get promise(){return T(this,i).capability.promise}cancel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;T(this,i).cancel(null,t)}get separateAnnots(){let{separateAnnots:t}=T(this,i).operatorList;if(!t)return!1;let{annotationCanvasMap:e}=T(this,i);return t.form||t.canvas&&(null==e?void 0:e.size)>0}}i=new WeakMap,exports.RenderTask=RenderTask;let n=class{constructor(t){let{callback:e,params:i,objs:r,commonObjs:n,annotationCanvasMap:s,operatorList:o,pageIndex:l,canvasFactory:h,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:u=!1,pageColors:p=null}=t;this.callback=e,this.params=i,this.objs=r,this.commonObjs=n,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=h,this.filterFactory=c,this._pdfBug=u,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===d&&"u">typeof window,this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(t){var e,i;let{transparency:r=!1,optionalContentConfig:s}=t;if(this.cancelled)return;if(this._canvas){if(T(n,A).has(this._canvas))throw Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");T(n,A).add(this._canvas)}this._pdfBug&&null!=(e=globalThis.StepperManager)&&e.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());let{canvasContext:o,viewport:l,transform:h,background:c}=this.params;this.gfx=new _canvas.CanvasGraphics(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:s},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:h,viewport:l,transparency:r,background:c}),this.operatorListIdx=0,this.graphicsReady=!0,null==(i=this.graphicsReadyCallback)||i.call(this)}cancel(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null==(t=this.gfx)||t.endDrawing(),this._canvas&&T(n,A).delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",i))}operatorListChanged(){var t;this.graphicsReady?(null==(t=this.stepper)||t.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&T(n,A).delete(this._canvas),this.callback())))}},InternalRenderTask=n;A=new WeakMap,et(InternalRenderTask,A,new WeakSet);let version="3.7.107";exports.version=version;let build="036f855dc";exports.build=build},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var r,n,s,o,l,h=i(1),c=i(140),d=i(144);class u{constructor(){et(this,s),et(this,r,!1),et(this,n,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){let i=T(this,n).get(t);return void 0===i?e:Object.assign(e,i)}getRawValue(t){return T(this,n).get(t)}remove(t){if(T(this,n).delete(t),0===T(this,n).size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(let t of T(this,n).values())if(t instanceof c.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(t,e){let i=T(this,n).get(t),r=!1;if(void 0!==i)for(let[t,n]of Object.entries(e))i[t]!==n&&(r=!0,i[t]=n);else r=!0,T(this,n).set(t,e);r&&nt(this,s,o).call(this),e instanceof c.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(e.constructor._type)}has(t){return T(this,n).has(t)}getAll(){return T(this,n).size>0?(0,h.objectFromMap)(T(this,n)):null}setAll(t){for(let[e,i]of Object.entries(t))this.setValue(e,i)}get size(){return T(this,n).size}resetModified(){T(this,r)&&(ut(this,r,!1),"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new p(this)}get serializable(){if(0===T(this,n).size)return null;let t=new Map;for(let[e,i]of T(this,n)){let r=i instanceof c.AnnotationEditor?i.serialize():i;r&&t.set(e,r)}return t}static getHash(t){if(!t)return"";let e=new d.MurmurHash3_64;for(let[i,r]of t)e.update(`${i}:${JSON.stringify(r)}`);return e.hexdigest()}}r=new WeakMap,n=new WeakMap,s=new WeakSet,o=function(){T(this,r)||(ut(this,r,!0),"function"==typeof this.onSetModified&&this.onSetModified())},e.AnnotationStorage=u;class p extends u{constructor(t){super(),et(this,l,null),ut(this,l,structuredClone(t.serializable))}get print(){(0,h.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return T(this,l)}}l=new WeakMap,e.PrintAnnotationStorage=p},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var r,n,s,o,l,h,c=i(141),d=i(1);let u=class{constructor(t){et(this,r,this.focusin.bind(this)),et(this,n,this.focusout.bind(this)),et(this,s,!1),et(this,o,!1),et(this,l,!1),It(this,"_uiManager",null),et(this,h,u._zIndex++),this.constructor===u&&(0,d.unreachable)("Cannot initialize AnnotationEditor."),this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager;let{rotation:e,rawDims:{pageWidth:i,pageHeight:c,pageX:p,pageY:f}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[i,c],this.pageTranslation=[p,f];let[g,m]=this.parentDimensions;this.x=t.x/g,this.y=t.y/m,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,d.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=T(this,h)}setParent(t){null!==t&&(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions),this.parent=t}focusin(t){T(this,s)?ut(this,s,!1):this.parent.setSelected(this)}focusout(t){var e;if(!this.isAttachedToDOM)return;let i=t.relatedTarget;(null==i||!i.closest(`#${this.id}`))&&(t.preventDefault(),null!=(e=this.parent)&&e.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(t){let e=this.parent.div.getBoundingClientRect();this.startX=t.clientX-e.x,this.startY=t.clientY-e.y,t.dataTransfer.setData("text/plain",this.id),t.dataTransfer.effectAllowed="move"}setAt(t,e,i,r){let[n,s]=this.parentDimensions;[i,r]=this.screenToPageTranslation(i,r),this.x=(t+i)/n,this.y=(e+r)/s,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}translate(t,e){let[i,r]=this.parentDimensions;[t,e]=this.screenToPageTranslation(t,e),this.x+=t/i,this.y+=e/r,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}screenToPageTranslation(t,e){switch(this.parentRotation){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){let{realScale:t}=this._uiManager.viewParameters,[e,i]=this.pageDimensions;return[e*t,i*t]}setDims(t,e){let[i,r]=this.parentDimensions;this.div.style.width=100*t/i+"%",this.div.style.height=100*e/r+"%"}fixDims(){let{style:t}=this.div,{height:e,width:i}=t,r=i.endsWith("%"),n=e.endsWith("%");if(r&&n)return;let[s,o]=this.parentDimensions;r||(t.width=100*parseFloat(i)/s+"%"),n||(t.height=100*parseFloat(e)/o+"%")}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",T(this,r)),this.div.addEventListener("focusout",T(this,n));let[t,e]=this.getInitialTranslation();return this.translate(t,e),(0,c.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(t){let{isMac:e}=d.FeatureTest.platform;0!==t.button||t.ctrlKey&&e?t.preventDefault():(t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this),ut(this,s,!0))}getRect(t,e){let i=this.parentScale,[r,n]=this.pageDimensions,[s,o]=this.pageTranslation,l=t/i,h=e/i,c=this.x*r,d=this.y*n,u=this.width*r,p=this.height*n;switch(this.rotation){case 0:return[c+l+s,n-d-h-p+o,c+l+u+s,n-d-h+o];case 90:return[c+h+s,n-d+l+o,c+h+p+s,n-d+l+u+o];case 180:return[c-l-u+s,n-d+h+o,c-l+s,n-d+h+p+o];case 270:return[c-h-p+s,n-d-l-u+o,c-h+s,n-d-l+o];default:throw Error("Invalid rotation")}}getRectInCurrentCoords(t,e){let[i,r,n,s]=t,o=n-i,l=s-r;switch(this.rotation){case 0:return[i,e-s,o,l];case 90:return[i,e-r,l,o];case 180:return[n,e-r,o,l];case 270:return[n,e-s,l,o];default:throw Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ut(this,l,!0)}disableEditMode(){ut(this,l,!1)}isInEditMode(){return T(this,l)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var t;null==(t=this.div)||t.addEventListener("focusin",T(this,r))}serialize(){(0,d.unreachable)("An editor must be serializable")}static deserialize(t,e,i){let r=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:i});r.rotation=t.rotation;let[n,s]=r.pageDimensions,[o,l,h,c]=r.getRectInCurrentCoords(t.rect,s);return r.x=o/n,r.y=l/s,r.width=h/n,r.height=c/s,r}remove(){this.div.removeEventListener("focusin",T(this,r)),this.div.removeEventListener("focusout",T(this,n)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var t;null==(t=this.div)||t.classList.add("selectedEditor")}unselect(){var t;null==(t=this.div)||t.classList.remove("selectedEditor")}updateParams(t,e){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return T(this,o)}set isEditing(t){ut(this,o,t),t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}},p=u;r=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,h=new WeakMap,It(p,"_colorManager",new c.ColorManager),It(p,"_zIndex",1),e.AnnotationEditor=p},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=function(t,e,i){for(let r of i)e.addEventListener(r,t[r].bind(t))},e.opacityToHex=function(t){return Math.round(Math.min(255,Math.max(1,255*t))).toString(16).padStart(2,"0")};var r,n,s,o,l,h,c,d,u,p,f,g,m,v,b,y,A,S,_,x,w,C,k,E,M,P,R,F,O,I,D,L,N,j,W,B,U,G,H,q,z,V,X,$,Y,K,J,Q,Z,tt,te,ti,tr=i(1),tn=i(142);class ta{constructor(){et(this,r,0)}getId(){return`${tr.AnnotationEditorPrefix}${ue(this,r)._++}`}}r=new WeakMap;class ts{constructor(){et(this,n,[]),et(this,s,!1),et(this,o,void 0),et(this,l,-1);let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;ut(this,o,t)}add(t){let{cmd:e,undo:i,mustExec:r,type:h=NaN,overwriteIfSameType:c=!1,keepUndo:d=!1}=t;if(r&&e(),T(this,s))return;let u={cmd:e,undo:i,type:h};if(-1===T(this,l)){T(this,n).length>0&&(T(this,n).length=0),ut(this,l,0),T(this,n).push(u);return}if(c&&T(this,n)[T(this,l)].type===h){d&&(u.undo=T(this,n)[T(this,l)].undo),T(this,n)[T(this,l)]=u;return}let p=T(this,l)+1;p===T(this,o)?T(this,n).splice(0,1):(ut(this,l,p),p<T(this,n).length&&T(this,n).splice(p)),T(this,n).push(u)}undo(){-1!==T(this,l)&&(ut(this,s,!0),T(this,n)[T(this,l)].undo(),ut(this,s,!1),ut(this,l,T(this,l)-1))}redo(){T(this,l)<T(this,n).length-1&&(ut(this,l,T(this,l)+1),ut(this,s,!0),T(this,n)[T(this,l)].cmd(),ut(this,s,!1))}hasSomethingToUndo(){return -1!==T(this,l)}hasSomethingToRedo(){return T(this,l)<T(this,n).length-1}destroy(){ut(this,n,null)}}n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,e.CommandManager=ts;class to{constructor(t){et(this,h),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;let{isMac:e}=tr.FeatureTest.platform;for(let[i,r]of t)for(let t of i){let i=t.startsWith("mac+");e&&i?(this.callbacks.set(t.slice(4),r),this.allKeys.add(t.split("+").at(-1))):e||i||(this.callbacks.set(t,r),this.allKeys.add(t.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;let i=this.callbacks.get(nt(this,h,c).call(this,e));i&&(i.bind(t)(),e.stopPropagation(),e.preventDefault())}}h=new WeakSet,c=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);let e=this.buffer.join("+");return this.buffer.length=0,e},e.KeyboardManager=to;let tl=class{get _colors(){let t=new Map([["CanvasText",null],["Canvas",null]]);return(0,tn.getColorValues)(t),(0,tr.shadow)(this,"_colors",t)}convert(t){let e=(0,tn.getRGB)(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(let[t,i]of this._colors)if(i.every((t,i)=>t===e[i]))return tl._colorsMapping.get(t);return e}getHexCode(t){let e=this._colors.get(t);return e?tr.Util.makeHexColor(...e):t}},th=tl;It(th,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),e.ColorManager=th;let tc=class{constructor(t,e,i){et(this,D),et(this,N),et(this,W),et(this,U),et(this,H),et(this,z),et(this,X),et(this,Y),et(this,J),et(this,Z),et(this,te),et(this,d,null),et(this,u,new Map),et(this,p,new Map),et(this,f,null),et(this,g,new ts),et(this,m,0),et(this,v,null),et(this,b,new Set),et(this,y,null),et(this,A,new ta),et(this,S,!1),et(this,_,tr.AnnotationEditorType.NONE),et(this,x,new Set),et(this,w,this.copy.bind(this)),et(this,C,this.cut.bind(this)),et(this,k,this.paste.bind(this)),et(this,E,this.keydown.bind(this)),et(this,M,this.onEditingAction.bind(this)),et(this,P,this.onPageChanging.bind(this)),et(this,R,this.onScaleChanging.bind(this)),et(this,F,this.onRotationChanging.bind(this)),et(this,O,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1}),et(this,I,null),ut(this,I,t),ut(this,y,e),T(this,y)._on("editingaction",T(this,M)),T(this,y)._on("pagechanging",T(this,P)),T(this,y)._on("scalechanging",T(this,R)),T(this,y)._on("rotationchanging",T(this,F)),ut(this,f,i),this.viewParameters={realScale:tn.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){for(let t of(nt(this,N,j).call(this),T(this,y)._off("editingaction",T(this,M)),T(this,y)._off("pagechanging",T(this,P)),T(this,y)._off("scalechanging",T(this,R)),T(this,y)._off("rotationchanging",T(this,F)),T(this,p).values()))t.destroy();T(this,p).clear(),T(this,u).clear(),T(this,b).clear(),ut(this,d,null),T(this,x).clear(),T(this,g).destroy()}onPageChanging(t){let{pageNumber:e}=t;ut(this,m,e-1)}focusMainContainer(){T(this,I).focus()}addShouldRescale(t){T(this,b).add(t)}removeShouldRescale(t){T(this,b).delete(t)}onScaleChanging(t){let{scale:e}=t;for(let t of(this.commitOrRemove(),this.viewParameters.realScale=e*tn.PixelsPerInch.PDF_TO_CSS_UNITS,T(this,b)))t.onScaleChanging()}onRotationChanging(t){let{pagesRotation:e}=t;this.commitOrRemove(),this.viewParameters.rotation=e}addToAnnotationStorage(t){t.isEmpty()||!T(this,f)||T(this,f).has(t.id)||T(this,f).setValue(t.id,t)}copy(t){if(t.preventDefault(),T(this,d)&&T(this,d).commitOrRemove(),!this.hasSelection)return;let e=[];for(let t of T(this,x))t.isEmpty()||e.push(t.serialize());0!==e.length&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}paste(t){t.preventDefault();let e=t.clipboardData.getData("application/pdfjs");if(!e)return;try{e=JSON.parse(e)}catch(t){(0,tr.warn)(`paste: "${t.message}".`);return}if(!Array.isArray(e))return;this.unselectAll();let i=T(this,p).get(T(this,m));try{let t=[];for(let r of e){let e=i.deserialize(r);if(!e)return;t.push(e)}let r=()=>{for(let e of t)nt(this,J,Q).call(this,e);nt(this,te,ti).call(this,t)},n=()=>{for(let e of t)e.remove()};this.addCommands({cmd:r,undo:n,mustExec:!0})}catch(t){(0,tr.warn)(`paste: "${t.message}".`)}}keydown(t){var e;null!=(e=this.getActive())&&e.shouldGetKeyboardEvents()||tc._keyboardManager.exec(this,t)}onEditingAction(t){["undo","redo","delete","selectAll"].includes(t.name)&&this[t.name]()}setEditingState(t){t?(nt(this,D,L).call(this),nt(this,W,B).call(this),nt(this,H,q).call(this,{isEditing:T(this,_)!==tr.AnnotationEditorType.NONE,isEmpty:nt(this,Z,tt).call(this),hasSomethingToUndo:T(this,g).hasSomethingToUndo(),hasSomethingToRedo:T(this,g).hasSomethingToRedo(),hasSelectedEditor:!1})):(nt(this,N,j).call(this),nt(this,U,G).call(this),nt(this,H,q).call(this,{isEditing:!1}))}registerEditorTypes(t){if(!T(this,v))for(let e of(ut(this,v,t),T(this,v)))nt(this,z,V).call(this,e.defaultPropertiesToUpdate)}getId(){return T(this,A).getId()}get currentLayer(){return T(this,p).get(T(this,m))}get currentPageIndex(){return T(this,m)}addLayer(t){T(this,p).set(t.pageIndex,t),T(this,S)?t.enable():t.disable()}removeLayer(t){T(this,p).delete(t.pageIndex)}updateMode(t){if(ut(this,_,t),t===tr.AnnotationEditorType.NONE)this.setEditingState(!1),nt(this,Y,K).call(this);else for(let e of(this.setEditingState(!0),nt(this,X,$).call(this),T(this,p).values()))e.updateMode(t)}updateToolbar(t){t!==T(this,_)&&T(this,y).dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){if(T(this,v)){for(let i of T(this,x))i.updateParams(t,e);for(let i of T(this,v))i.updateDefaultParams(t,e)}}getEditors(t){let e=[];for(let i of T(this,u).values())i.pageIndex===t&&e.push(i);return e}getEditor(t){return T(this,u).get(t)}addEditor(t){T(this,u).set(t.id,t)}removeEditor(t){var e;T(this,u).delete(t.id),this.unselect(t),null==(e=T(this,f))||e.remove(t.id)}setActiveEditor(t){T(this,d)!==t&&(ut(this,d,t),t&&nt(this,z,V).call(this,t.propertiesToUpdate))}toggleSelected(t){T(this,x).has(t)?(T(this,x).delete(t),t.unselect(),nt(this,H,q).call(this,{hasSelectedEditor:this.hasSelection})):(T(this,x).add(t),t.select(),nt(this,z,V).call(this,t.propertiesToUpdate),nt(this,H,q).call(this,{hasSelectedEditor:!0}))}setSelected(t){for(let e of T(this,x))e!==t&&e.unselect();T(this,x).clear(),T(this,x).add(t),t.select(),nt(this,z,V).call(this,t.propertiesToUpdate),nt(this,H,q).call(this,{hasSelectedEditor:!0})}isSelected(t){return T(this,x).has(t)}unselect(t){t.unselect(),T(this,x).delete(t),nt(this,H,q).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==T(this,x).size}undo(){T(this,g).undo(),nt(this,H,q).call(this,{hasSomethingToUndo:T(this,g).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:nt(this,Z,tt).call(this)})}redo(){T(this,g).redo(),nt(this,H,q).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:T(this,g).hasSomethingToRedo(),isEmpty:nt(this,Z,tt).call(this)})}addCommands(t){T(this,g).add(t),nt(this,H,q).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:nt(this,Z,tt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;let t=[...T(this,x)];this.addCommands({cmd:()=>{for(let e of t)e.remove()},undo:()=>{for(let e of t)nt(this,J,Q).call(this,e)},mustExec:!0})}commitOrRemove(){var t;null==(t=T(this,d))||t.commitOrRemove()}selectAll(){for(let t of T(this,x))t.commit();nt(this,te,ti).call(this,T(this,u).values())}unselectAll(){if(T(this,d))T(this,d).commitOrRemove();else if(0!==T(this,x).size){for(let t of T(this,x))t.unselect();T(this,x).clear(),nt(this,H,q).call(this,{hasSelectedEditor:!1})}}isActive(t){return T(this,d)===t}getActive(){return T(this,d)}getMode(){return T(this,_)}},td=tc;d=new WeakMap,u=new WeakMap,p=new WeakMap,f=new WeakMap,g=new WeakMap,m=new WeakMap,v=new WeakMap,b=new WeakMap,y=new WeakMap,A=new WeakMap,S=new WeakMap,_=new WeakMap,x=new WeakMap,w=new WeakMap,C=new WeakMap,k=new WeakMap,E=new WeakMap,M=new WeakMap,P=new WeakMap,R=new WeakMap,F=new WeakMap,O=new WeakMap,I=new WeakMap,D=new WeakSet,L=function(){T(this,I).addEventListener("keydown",T(this,E))},N=new WeakSet,j=function(){T(this,I).removeEventListener("keydown",T(this,E))},W=new WeakSet,B=function(){document.addEventListener("copy",T(this,w)),document.addEventListener("cut",T(this,C)),document.addEventListener("paste",T(this,k))},U=new WeakSet,G=function(){document.removeEventListener("copy",T(this,w)),document.removeEventListener("cut",T(this,C)),document.removeEventListener("paste",T(this,k))},H=new WeakSet,q=function(t){Object.entries(t).some(t=>{let[e,i]=t;return T(this,O)[e]!==i})&&T(this,y).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(T(this,O),t)})},z=new WeakSet,V=function(t){T(this,y).dispatch("annotationeditorparamschanged",{source:this,details:t})},X=new WeakSet,$=function(){if(!T(this,S))for(let t of(ut(this,S,!0),T(this,p).values()))t.enable()},Y=new WeakSet,K=function(){if(this.unselectAll(),T(this,S))for(let t of(ut(this,S,!1),T(this,p).values()))t.disable()},J=new WeakSet,Q=function(t){let e=T(this,p).get(t.pageIndex);e?e.addOrRebuild(t):this.addEditor(t)},Z=new WeakSet,tt=function(){if(0===T(this,u).size)return!0;if(1===T(this,u).size)for(let t of T(this,u).values())return t.isEmpty();return!1},te=new WeakSet,ti=function(t){for(let e of(T(this,x).clear(),t))e.isEmpty()||(T(this,x).add(e),e.select());nt(this,H,q).call(this,{hasSelectedEditor:!0})},It(td,"_keyboardManager",new to([[["ctrl+a","mac+meta+a"],tc.prototype.selectAll],[["ctrl+z","mac+meta+z"],tc.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],tc.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],tc.prototype.delete],[["Escape","mac+Escape"],tc.prototype.unselectAll]])),e.AnnotationEditorUIManager=td},(t,e,i)=>{let r;Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=e.AnnotationPrefix=void 0,e.deprecated=function(t){},e.getColorValues=function(t){let e=document.createElement("span");for(let i of(e.style.visibility="hidden",document.body.append(e),t.keys())){e.style.color=i;let r=window.getComputedStyle(e).color;t.set(i,D(r))}e.remove()},e.getCurrentTransform=function(t){let{a:e,b:i,c:r,d:n,e:s,f:o}=t.getTransform();return[e,i,r,n,s,o]},e.getCurrentTransformInverse=function(t){let{a:e,b:i,c:r,d:n,e:s,f:o}=t.getTransform().invertSelf();return[e,i,r,n,s,o]},e.getFilenameFromUrl=function(t){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||([t]=t.split(/[#?]/,1)),t.substring(t.lastIndexOf("/")+1)},e.getPdfFilenameFromUrl=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!=typeof t)return e;if(O(t))return(0,A.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;let i=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(t),n=i.exec(r[1])||i.exec(r[2])||i.exec(r[3]);if(n&&(n=n[0]).includes("%"))try{n=i.exec(decodeURIComponent(n))[0]}catch{}return n||e},e.getRGB=D,e.getXfaPageViewport=function(t,e){let{scale:i=1,rotation:r=0}=e,{width:n,height:s}=t.attributes.style;return new R({viewBox:[0,0,parseInt(n),parseInt(s)],scale:i,rotation:r})},e.isDataScheme=O,e.isPdfFile=function(t){return"string"==typeof t&&/\.pdf$/i.test(t)},e.isValidFetchUrl=I,e.loadScript=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((i,r)=>{let n=document.createElement("script");n.src=t,n.onload=function(t){e&&n.remove(),i(t)},n.onerror=function(){r(Error(`Cannot load script at: ${n.src}`))},(document.head||document.documentElement).append(n)})},e.setLayerDimensions=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e instanceof R){let{pageWidth:r,pageHeight:n}=e.rawDims,{style:s}=t,o=`calc(var(--scale-factor) * ${r}px)`,l=`calc(var(--scale-factor) * ${n}px)`;i&&e.rotation%180!=0?(s.width=l,s.height=o):(s.width=o,s.height=l)}r&&t.setAttribute("data-main-rotation",e.rotation)};var n,s,o,l,h,c,d,u,p,f,g,m,v,b,y=i(143),A=i(1);let S="http://www.w3.org/2000/svg";e.AnnotationPrefix="pdfjs_internal_id_";let _=class{},x=_;It(x,"CSS",96),It(x,"PDF",72),It(x,"PDF_TO_CSS_UNITS",_.CSS/_.PDF),e.PixelsPerInch=x;class w extends y.BaseFilterFactory{constructor(){let{docId:t,ownerDocument:e=globalThis.document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),et(this,p),et(this,g),et(this,v),et(this,n,void 0),et(this,s,void 0),et(this,o,void 0),et(this,l,void 0),et(this,h,void 0),et(this,c,void 0),et(this,d,void 0),et(this,u,0),ut(this,o,t),ut(this,l,e)}addFilter(t){if(!t)return"none";let e,i,r,n,s=T(this,p,f).get(t);if(s)return s;if(1===t.length){let s=t[0],o=Array(256);for(let t=0;t<256;t++)o[t]=s[t]/255;n=e=i=r=o.join(",")}else{let[s,o,l]=t,h=Array(256),c=Array(256),d=Array(256);for(let t=0;t<256;t++)h[t]=s[t]/255,c[t]=o[t]/255,d[t]=l[t]/255;e=h.join(","),i=c.join(","),r=d.join(","),n=`${e}${i}${r}`}if(s=T(this,p,f).get(n))return T(this,p,f).set(t,s),s;let h=`g_${T(this,o)}_transfer_map_${ue(this,u)._++}`,c=`url(#${h})`;T(this,p,f).set(t,c),T(this,p,f).set(n,c);let d=T(this,l).createElementNS(S,"filter",S);d.setAttribute("id",h),d.setAttribute("color-interpolation-filters","sRGB");let y=T(this,l).createElementNS(S,"feComponentTransfer");return d.append(y),nt(this,v,b).call(this,y,"feFuncR",e),nt(this,v,b).call(this,y,"feFuncG",i),nt(this,v,b).call(this,y,"feFuncB",r),T(this,g,m).append(d),c}addHCMFilter(t,e){var i;let r=`${t}-${e}`;if(T(this,c)===r||(ut(this,c,r),ut(this,d,"none"),null==(i=T(this,h))||i.remove(),!t||!e))return T(this,d);T(this,g,m).style.color=t;let n=D(t=getComputedStyle(T(this,g,m)).getPropertyValue("color"));t=A.Util.makeHexColor(...n),T(this,g,m).style.color=e;let s=D(e=getComputedStyle(T(this,g,m)).getPropertyValue("color"));if(e=A.Util.makeHexColor(...s),T(this,g,m).style.color="","#000000"===t&&"#ffffff"===e||t===e)return T(this,d);let u=Array(256);for(let t=0;t<=255;t++){let e=t/255;u[t]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}let p=u.join(","),f=`g_${T(this,o)}_hcm_filter`,y=ut(this,h,T(this,l).createElementNS(S,"filter",S));y.setAttribute("id",f),y.setAttribute("color-interpolation-filters","sRGB");let _=T(this,l).createElementNS(S,"feComponentTransfer");y.append(_),nt(this,v,b).call(this,_,"feFuncR",p),nt(this,v,b).call(this,_,"feFuncG",p),nt(this,v,b).call(this,_,"feFuncB",p);let x=T(this,l).createElementNS(S,"feColorMatrix");x.setAttribute("type","matrix"),x.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),y.append(x),_=T(this,l).createElementNS(S,"feComponentTransfer"),y.append(_);let w=(t,e)=>{let i=n[t]/255,r=s[t]/255,o=Array(e+1);for(let t=0;t<=e;t++)o[t]=i+t/e*(r-i);return o.join(",")};return nt(this,v,b).call(this,_,"feFuncR",w(0,5)),nt(this,v,b).call(this,_,"feFuncG",w(1,5)),nt(this,v,b).call(this,_,"feFuncB",w(2,5)),T(this,g,m).append(y),ut(this,d,`url(#${f})`),T(this,d)}destroy(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&T(this,d)||(T(this,s)&&(T(this,s).parentNode.parentNode.remove(),ut(this,s,null)),T(this,n)&&(T(this,n).clear(),ut(this,n,null)),ut(this,u,0))}}n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,h=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,p=new WeakSet,f=function(){return T(this,n)||ut(this,n,new Map)},g=new WeakSet,m=function(){if(!T(this,s)){let t=T(this,l).createElement("div"),{style:e}=t;e.visibility="hidden",e.contain="strict",e.width=e.height=0,e.position="absolute",e.top=e.left=0,e.zIndex=-1;let i=T(this,l).createElementNS(S,"svg");i.setAttribute("width",0),i.setAttribute("height",0),ut(this,s,T(this,l).createElementNS(S,"defs")),t.append(i),i.append(T(this,s)),T(this,l).body.append(t)}return T(this,s)},v=new WeakSet,b=function(t,e,i){let r=T(this,l).createElementNS(S,e);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),t.append(r)},e.DOMFilterFactory=w;class C extends y.BaseCanvasFactory{constructor(){let{ownerDocument:t=globalThis.document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._document=t}_createCanvas(t,e){let i=this._document.createElement("canvas");return i.width=t,i.height=e,i}}async function k(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(I(t,document.baseURI)){let i=await fetch(t);if(!i.ok)throw Error(i.statusText);return e?new Uint8Array(await i.arrayBuffer()):(0,A.stringToBytes)(await i.text())}return new Promise((i,r)=>{let n=new XMLHttpRequest;n.open("GET",t,!0),e&&(n.responseType="arraybuffer"),n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(200===n.status||0===n.status){let t;if(e&&n.response?t=new Uint8Array(n.response):!e&&n.responseText&&(t=(0,A.stringToBytes)(n.responseText)),t)return void i(t)}r(Error(n.statusText))}},n.send(null)})}e.DOMCanvasFactory=C;class E extends y.BaseCMapReaderFactory{_fetchData(t,e){return k(t,this.isCompressed).then(t=>({cMapData:t,compressionType:e}))}}e.DOMCMapReaderFactory=E;class M extends y.BaseStandardFontDataFactory{_fetchData(t){return k(t,!0)}}e.DOMStandardFontDataFactory=M;class P extends y.BaseSVGFactory{_createSVG(t){return document.createElementNS(S,t)}}e.DOMSVGFactory=P;class R{constructor(t){let e,i,r,n,s,o,l,h,{viewBox:c,scale:d,rotation:u,offsetX:p=0,offsetY:f=0,dontFlip:g=!1}=t;this.viewBox=c,this.scale=d,this.rotation=u,this.offsetX=p,this.offsetY=f;let m=(c[2]+c[0])/2,v=(c[3]+c[1])/2;switch((u%=360)<0&&(u+=360),u){case 180:e=-1,i=0,r=0,n=1;break;case 90:e=0,i=1,r=1,n=0;break;case 270:e=0,i=-1,r=-1,n=0;break;case 0:e=1,i=0,r=0,n=-1;break;default:throw Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}g&&(r=-r,n=-n),0===e?(s=Math.abs(v-c[1])*d+p,o=Math.abs(m-c[0])*d+f,l=(c[3]-c[1])*d,h=(c[2]-c[0])*d):(s=Math.abs(m-c[0])*d+p,o=Math.abs(v-c[1])*d+f,l=(c[2]-c[0])*d,h=(c[3]-c[1])*d),this.transform=[e*d,i*d,r*d,n*d,s-e*d*m-r*d*v,o-i*d*m-n*d*v],this.width=l,this.height=h}get rawDims(){let{viewBox:t}=this;return(0,A.shadow)(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone(){let{scale:t=this.scale,rotation:e=this.rotation,offsetX:i=this.offsetX,offsetY:r=this.offsetY,dontFlip:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new R({viewBox:this.viewBox.slice(),scale:t,rotation:e,offsetX:i,offsetY:r,dontFlip:n})}convertToViewportPoint(t,e){return A.Util.applyTransform([t,e],this.transform)}convertToViewportRectangle(t){let e=A.Util.applyTransform([t[0],t[1]],this.transform),i=A.Util.applyTransform([t[2],t[3]],this.transform);return[e[0],e[1],i[0],i[1]]}convertToPdfPoint(t,e){return A.Util.applyInverseTransform([t,e],this.transform)}}e.PageViewport=R;class F extends A.BaseException{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(t,"RenderingCancelledException"),this.type=e,this.extraDelay=i}}function O(t){let e=t.length,i=0;for(;i<e&&""===t[i].trim();)i++;return"data:"===t.substring(i,i+5).toLowerCase()}function I(t,e){try{let{protocol:i}=e?new URL(t,e):new URL(t);return"http:"===i||"https:"===i}catch{return!1}}function D(t){if(t.startsWith("#")){let e=parseInt(t.slice(1),16);return[(0xff0000&e)>>16,(65280&e)>>8,255&e]}return t.startsWith("rgb(")?t.slice(4,-1).split(",").map(t=>parseInt(t)):t.startsWith("rgba(")?t.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):((0,A.warn)(`Not a valid color format: "${t}"`),[0,0,0])}e.RenderingCancelledException=F,e.StatTimer=class{constructor(){It(this,"started",Object.create(null)),It(this,"times",[])}time(t){t in this.started&&(0,A.warn)(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||(0,A.warn)(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){let t=[],e=0;for(let{name:t}of this.times)e=Math.max(t.length,e);for(let{name:i,start:r,end:n}of this.times)t.push(`${i.padEnd(e)} ${n-r}ms
`);return t.join("")}},e.PDFDateString=class{static toDateObject(t){if(!t||"string"!=typeof t)return null;r||(r=RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));let e=r.exec(t);if(!e)return null;let i=parseInt(e[1],10),n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let s=parseInt(e[3],10);s=s>=1&&s<=31?s:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let h=parseInt(e[6],10);h=h>=0&&h<=59?h:0;let c=e[7]||"Z",d=parseInt(e[8],10);d=d>=0&&d<=23?d:0;let u=parseInt(e[9],10)||0;return u=u>=0&&u<=59?u:0,"-"===c?(o+=d,l+=u):"+"===c&&(o-=d,l-=u),new Date(Date.UTC(i,n,s,o,l,h))}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var r=i(1);class n{constructor(){this.constructor===n&&(0,r.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(t){return"none"}addHCMFilter(t,e){return"none"}destroy(){}}e.BaseFilterFactory=n;class s{constructor(){this.constructor===s&&(0,r.unreachable)("Cannot initialize BaseCanvasFactory.")}create(t,e){if(t<=0||e<=0)throw Error("Invalid canvas size");let i=this._createCanvas(t,e);return{canvas:i,context:i.getContext("2d")}}reset(t,e,i){if(!t.canvas)throw Error("Canvas is not specified");if(e<=0||i<=0)throw Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=i}destroy(t){if(!t.canvas)throw Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){(0,r.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=s;class o{constructor(t){let{baseUrl:e=null,isCompressed:i=!0}=t;this.constructor===o&&(0,r.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=e,this.isCompressed=i}async fetch(t){let{name:e}=t;if(!this.baseUrl)throw Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!e)throw Error("CMap name must be specified.");let i=this.baseUrl+e+(this.isCompressed?".bcmap":""),n=this.isCompressed?r.CMapCompressionType.BINARY:r.CMapCompressionType.NONE;return this._fetchData(i,n).catch(t=>{throw Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}_fetchData(t,e){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=o;class l{constructor(t){let{baseUrl:e=null}=t;this.constructor===l&&(0,r.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=e}async fetch(t){let{filename:e}=t;if(!this.baseUrl)throw Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!e)throw Error("Font filename must be specified.");let i=`${this.baseUrl}${e}`;return this._fetchData(i).catch(t=>{throw Error(`Unable to load font data at: ${i}`)})}_fetchData(t){(0,r.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=l;class h{constructor(){this.constructor===h&&(0,r.unreachable)("Cannot initialize BaseSVGFactory.")}create(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t<=0||e<=0)throw Error("Invalid SVG dimensions");let r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),i||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${e}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${e}`),r}createElement(t){if("string"!=typeof t)throw Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){(0,r.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=h},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var r=i(1);let n=0xc3d2e1f0,s=0xffff0000,o=65535;e.MurmurHash3_64=class{constructor(t){this.h1=t?0|t:n,this.h2=t?0|t:n}update(t){let e,i;if("string"==typeof t){e=new Uint8Array(2*t.length),i=0;for(let r=0,n=t.length;r<n;r++){let n=t.charCodeAt(r);n<=255?e[i++]=n:(e[i++]=n>>>8,e[i++]=255&n)}}else{if(!(0,r.isArrayBuffer)(t))throw Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");i=(e=t.slice()).byteLength}let n=i>>2,l=i-4*n,h=new Uint32Array(e.buffer,0,n),c=0,d=0,u=this.h1,p=this.h2,f=0xcc9e2d51,g=0x1b873593,m=11601,v=13715;for(let t=0;t<n;t++)1&t?(u^=c=(c=(c=(c=h[t])*f&s|c*m&o)<<15|c>>>17)*g&s|c*v&o,u=5*(u=u<<13|u>>>19)+0xe6546b64):(p^=d=(d=(d=(d=h[t])*f&s|d*m&o)<<15|d>>>17)*g&s|d*v&o,p=5*(p=p<<13|p>>>19)+0xe6546b64);switch(c=0,l){case 3:c^=e[4*n+2]<<16;case 2:c^=e[4*n+1]<<8;case 1:c^=e[4*n],c=(c=(c=c*f&s|c*m&o)<<15|c>>>17)*g&s|c*v&o,1&n?u^=c:p^=c}this.h1=u,this.h2=p}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=0xed558ccd*t&s|36045*t&o,e=0xff51afd7*e&s|(0xafd7ed55*(e<<16|t>>>16)&s)>>>16,t^=e>>>1,t=0x1a85ec53*t&s|60499*t&o,e=0xc4ceb9fe*e&s|(0xb9fe1a85*(e<<16|t>>>16)&s)>>>16,((t^=e>>>1)>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var r,n,s=i(1),o=i(3);n=class{constructor(t){et(this,r,new Set);let{ownerDocument:e=globalThis.document,styleElement:i=null}=t;this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));let e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(let t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),T(this,r).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(t){if(t&&!T(this,r).has(t.loadedName))if((0,s.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){let{loadedName:e,src:i,style:n}=t,o=new FontFace(e,i,n);this.addNativeFontFace(o);try{await o.load(),T(this,r).add(e)}catch{(0,s.warn)(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(o)}}else(0,s.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo)return void await this.loadSystemFont(t.systemFontInfo);if(this.isFontLoadingAPISupported){let e=t.createNativeFontFace();if(e){this.addNativeFontFace(e);try{await e.loaded}catch(i){throw(0,s.warn)(`Failed to load font '${e.family}': '${i}'.`),t.disableFontFace=!0,i}}return}let e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(e=>{let i=this._queueLoadingCallback(e);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){var t;let e=!(null==(t=this._document)||!t.fonts);return(0,s.shadow)(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let t=!1;return(o.isNodeJS||"u">typeof navigator&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(t=!0),(0,s.shadow)(this,"isSyncFontLoadingSupported",t)}_queueLoadingCallback(t){let{loadingRequests:e}=this,i={done:!1,complete:function(){for((0,s.assert)(!i.done,"completeRequest() cannot be called twice."),i.done=!0;e.length>0&&e[0].done;)setTimeout(e.shift().callback,0)},callback:t};return e.push(i),i}get _loadTestFont(){let t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,s.shadow)(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){let i,r;function n(t,e){return t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|255&t.charCodeAt(e+3)}function o(t,e,i,r){return t.substring(0,e)+r+t.substring(e+i)}let l=this._document.createElement("canvas");l.width=1,l.height=1;let h=l.getContext("2d"),c=0,d=`lt${Date.now()}${this.loadTestFontId++}`,u=this._loadTestFont;u=o(u,976,d.length,d);let p=0x58585858,f=n(u,16);for(i=0,r=d.length-3;i<r;i+=4)f=f-p+n(d,i)|0;i<d.length&&(f=f-p+n(d+"XXX",i)|0),u=o(u,16,4,(0,s.string32)(f));let g=`@font-face {font-family:"${d}";src:url(data:font/opentype;base64,${btoa(u)});}`;this.insertRule(g);let m=this._document.createElement("div");for(let e of(m.style.visibility="hidden",m.style.width=m.style.height="10px",m.style.position="absolute",m.style.top=m.style.left="0px",[t.loadedName,d])){let t=this._document.createElement("span");t.textContent="Hi",t.style.fontFamily=e,m.append(t)}this._document.body.append(m),function t(e,i){if(++c>30){(0,s.warn)("Load test font never loaded."),i();return}h.font="30px "+e,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0?i():setTimeout(t.bind(null,e,i))}(d,()=>{m.remove(),e.complete()})}},r=new WeakMap,e.FontLoader=n,e.FontFaceObject=class{constructor(t,e){let{isEvalSupported:i=!0,disableFontFace:r=!1,ignoreErrors:n=!1,inspectFont:s=null}=e;for(let e in this.compiledGlyphs=Object.create(null),t)this[e]=t[e];this.isEvalSupported=!1!==i,this.disableFontFace=!0===r,this.ignoreErrors=!0===n,this._inspectFont=s}createNativeFontFace(){var t;let e;if(!this.data||this.disableFontFace)return null;if(this.cssFontInfo){let t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return null==(t=this._inspectFont)||t.call(this,this),e}createFontFaceRule(){var t;let e;if(!this.data||this.disableFontFace)return null;let i=(0,s.bytesToString)(this.data),r=`url(data:${this.mimetype};base64,${btoa(i)});`;if(this.cssFontInfo){let t=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(t+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${t}src:${r}}`}else e=`@font-face {font-family:"${this.loadedName}";src:${r}}`;return null==(t=this._inspectFont)||t.call(this,this,r),e}getPathGenerator(t,e){let i;if(void 0!==this.compiledGlyphs[e])return this.compiledGlyphs[e];try{i=t.get(this.loadedName+"_path_"+e)}catch(t){if(!this.ignoreErrors)throw t;return(0,s.warn)(`getPathGenerator - ignoring character: "${t}".`),this.compiledGlyphs[e]=function(t,e){}}if(this.isEvalSupported&&s.FeatureTest.isEvalSupported){let t=[];for(let e of i){let i=void 0!==e.args?e.args.join(","):"";t.push("c.",e.cmd,"(",i,`);
`)}return this.compiledGlyphs[e]=Function("c","size",t.join(""))}return this.compiledGlyphs[e]=function(t,e){for(let r of i)"scale"===r.cmd&&(r.args=[e,-e]),t[r.cmd].apply(t,r.args)}}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var r,n,s,o,l=i(1),h=i(142),c=i(147),d=i(148),u=i(3);let p=4096,f=16;class g{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,i){let r;return void 0!==this.cache[t]?(r=this.cache[t],this.canvasFactory.reset(r,e,i)):(r=this.canvasFactory.create(e,i),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(let t in this.cache){let e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function m(t,e,i,r,n,s,o,l,c,d){let[u,p,f,g,m,v]=(0,h.getCurrentTransform)(t);if(0===p&&0===f){let h=Math.round(o*u+m),b=Math.round(l*g+v),y=Math.abs(Math.round((o+c)*u+m)-h)||1,A=Math.abs(Math.round((l+d)*g+v)-b)||1;return t.setTransform(Math.sign(u),0,0,Math.sign(g),h,b),t.drawImage(e,i,r,n,s,0,0,y,A),t.setTransform(u,p,f,g,m,v),[y,A]}if(0===u&&0===g){let h=Math.round(l*f+m),b=Math.round(o*p+v),y=Math.abs(Math.round((l+d)*f+m)-h)||1,A=Math.abs(Math.round((o+c)*p+v)-b)||1;return t.setTransform(0,Math.sign(p),Math.sign(f),0,h,b),t.drawImage(e,i,r,n,s,0,0,A,y),t.setTransform(u,p,f,g,m,v),[A,y]}return t.drawImage(e,i,r,n,s,o,l,c,d),[Math.hypot(u,p)*c,Math.hypot(f,g)*d]}class v{constructor(t,e){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=l.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=l.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=l.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,t,e])}clone(){let t=Object.create(this);return t.clipBox=this.clipBox.slice(),t}setCurrentPoint(t,e){this.x=t,this.y=e}updatePathMinMax(t,e,i){[e,i]=l.Util.applyTransform([e,i],t),this.minX=Math.min(this.minX,e),this.minY=Math.min(this.minY,i),this.maxX=Math.max(this.maxX,e),this.maxY=Math.max(this.maxY,i)}updateRectMinMax(t,e){let i=l.Util.applyTransform(e,t),r=l.Util.applyTransform(e.slice(2),t);this.minX=Math.min(this.minX,i[0],r[0]),this.minY=Math.min(this.minY,i[1],r[1]),this.maxX=Math.max(this.maxX,i[0],r[0]),this.maxY=Math.max(this.maxY,i[1],r[1])}updateScalingPathMinMax(t,e){l.Util.scaleMinMax(t,e),this.minX=Math.min(this.minX,e[0]),this.maxX=Math.max(this.maxX,e[1]),this.minY=Math.min(this.minY,e[2]),this.maxY=Math.max(this.maxY,e[3])}updateCurvePathMinMax(t,e,i,r,n,s,o,h,c,d){let u=l.Util.bezierBoundingBox(e,i,r,n,s,o,h,c);d?(d[0]=Math.min(d[0],u[0],u[2]),d[1]=Math.max(d[1],u[0],u[2]),d[2]=Math.min(d[2],u[1],u[3]),d[3]=Math.max(d[3],u[1],u[3])):this.updateRectMinMax(t,u)}getPathBoundingBox(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.PathType.FILL,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[this.minX,this.minY,this.maxX,this.maxY];if(t===c.PathType.STROKE){e||(0,l.unreachable)("Stroke bounding box must include transform.");let t=l.Util.singularValueDecompose2dScale(e),r=t[0]*this.lineWidth/2,n=t[1]*this.lineWidth/2;i[0]-=r,i[1]-=n,i[2]+=r,i[3]+=n}return i}updateClipFromPath(){let t=l.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(t){this.clipBox=t,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.PathType.FILL,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return l.Util.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function b(t,e){let i,r,n,s;if("u">typeof ImageData&&e instanceof ImageData)return void t.putImageData(e,0,0);let o=e.height,h=e.width,c=o%f,d=(o-c)/f,u=0===c?d:d+1,p=t.createImageData(h,f),g,m=0,v=e.data,b=p.data;if(e.kind===l.ImageKind.GRAYSCALE_1BPP){let e=v.byteLength,s=new Uint32Array(b.buffer,0,b.byteLength>>2),o=s.length,y=h+7>>3,A=0xffffffff,S=l.FeatureTest.isLittleEndian?0xff000000:255;for(i=0;i<u;i++){for(n=i<d?f:c,g=0,r=0;r<n;r++){let t=e-m,i=0,r=t>y?h:8*t-7,n=-8&r,o=0,l=0;for(;i<n;i+=8)l=v[m++],s[g++]=128&l?A:S,s[g++]=64&l?A:S,s[g++]=32&l?A:S,s[g++]=16&l?A:S,s[g++]=8&l?A:S,s[g++]=4&l?A:S,s[g++]=2&l?A:S,s[g++]=1&l?A:S;for(;i<r;i++)0===o&&(l=v[m++],o=128),s[g++]=l&o?A:S,o>>=1}for(;g<o;)s[g++]=0;t.putImageData(p,0,i*f)}}else if(e.kind===l.ImageKind.RGBA_32BPP){for(r=0,s=h*f*4,i=0;i<d;i++)b.set(v.subarray(m,m+s)),m+=s,t.putImageData(p,0,r),r+=f;i<u&&(s=h*c*4,b.set(v.subarray(m,m+s)),t.putImageData(p,0,r))}else{if(e.kind!==l.ImageKind.RGB_24BPP)throw Error(`bad image kind: ${e.kind}`);for(s=h*(n=f),i=0;i<u;i++){for(i>=d&&(s=h*(n=c)),g=0,r=s;r--;)b[g++]=v[m++],b[g++]=v[m++],b[g++]=v[m++],b[g++]=255;t.putImageData(p,0,i*f)}}}function y(t,e){if(e.bitmap)return void t.drawImage(e.bitmap,0,0);let i=e.height,r=e.width,n=i%f,s=(i-n)/f,o=0===n?s:s+1,l=t.createImageData(r,f),h=0,c=e.data,u=l.data;for(let e=0;e<o;e++){let i=e<s?f:n;({srcPos:h}=(0,d.convertBlackAndWhiteToRGBA)({src:c,srcPos:h,dest:u,width:r,height:i,nonBlackColor:0})),t.putImageData(l,0,e*f)}}function A(t,e){for(let i of["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"])void 0!==t[i]&&(e[i]=t[i]);void 0!==t.setLineDash&&(e.setLineDash(t.getLineDash()),e.lineDashOffset=t.lineDashOffset)}function S(t){t.strokeStyle=t.fillStyle="#000000",t.fillRule="nonzero",t.globalAlpha=1,t.lineWidth=1,t.lineCap="butt",t.lineJoin="miter",t.miterLimit=10,t.globalCompositeOperation="source-over",t.font="10px sans-serif",void 0!==t.setLineDash&&(t.setLineDash([]),t.lineDashOffset=0),u.isNodeJS||(t.filter="none")}function _(t,e,i,r){let n=t.length;for(let s=3;s<n;s+=4){let n=t[s];if(0===n)t[s-3]=e,t[s-2]=i,t[s-1]=r;else if(n<255){let o=255-n;t[s-3]=t[s-3]*n+e*o>>8,t[s-2]=t[s-2]*n+i*o>>8,t[s-1]=t[s-1]*n+r*o>>8}}}function x(t,e,i){let r=t.length;for(let n=3;n<r;n+=4){let r=i?i[t[n]]:t[n];e[n]=e[n]*r*.00392156862745098|0}}function w(t,e,i){let r=t.length;for(let n=3;n<r;n+=4){let r=77*t[n-3]+152*t[n-2]+28*t[n-1];e[n]=i?e[n]*i[r>>8]>>8:e[n]*r>>16}}function C(t,e,i,r){let n=r[0],s=r[1],o=r[2]-n,l=r[3]-s;0!==o&&0!==l&&(function(t,e,i,r,n,s,o,l,h,c,d){let u,p=!!s,f=p?s[0]:0,g=p?s[1]:0,m=p?s[2]:0;u="Luminosity"===n?w:x;let v=Math.min(r,Math.ceil(1048576/i));for(let n=0;n<r;n+=v){let s=Math.min(v,r-n),b=t.getImageData(l-c,n+(h-d),i,s),y=e.getImageData(l,n+h,i,s);p&&_(b.data,f,g,m),u(b.data,y.data,o),e.putImageData(y,l,n+h)}}(e.context,i,o,l,e.subtype,e.backdrop,e.transferMap,n,s,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(i.canvas,0,0),t.restore())}function k(t,e){let i=l.Util.singularValueDecompose2dScale(t);i[0]=Math.fround(i[0]),i[1]=Math.fround(i[1]);let r=Math.fround((globalThis.devicePixelRatio||1)*h.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==e?e:i[0]<=r||i[1]<=r}let E=["butt","round","square"],T=["miter","round","bevel"],M={},P={},R=class{constructor(t,e,i,n,o,l,h,c){et(this,r),et(this,s);let{optionalContentConfig:d,markedContentStack:u=null}=l;this.ctx=t,this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=i,this.canvasFactory=n,this.filterFactory=o,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=d,this.cachedCanvases=new g(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=c,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing(t){let{transform:e,viewport:i,transparency:r=!1,background:n=null}=t,s=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,s,o),this.ctx.fillStyle=l,r){let t=this.cachedCanvases.getCanvas("transparent",s,o);this.compositeCtx=this.ctx,this.transparentCanvas=t.canvas,this.ctx=t.context,this.ctx.save(),this.ctx.transform(...(0,h.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),S(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=(0,h.getCurrentTransform)(this.ctx)}executeOperatorList(t,e,i,r){let n,s=t.argsArray,o=t.fnArray,h=e||0,c=s.length;if(c===h)return h;let d=c-h>10&&"function"==typeof i,u=d?Date.now()+15:0,p=0,f=this.commonObjs,g=this.objs;for(;;){if(void 0!==r&&h===r.nextBreakPoint)return r.breakIt(h,i),h;if((n=o[h])!==l.OPS.dependency)this[n].apply(this,s[h]);else for(let t of s[h]){let e=t.startsWith("g_")?f:g;if(!e.has(t))return e.get(t,i),h}if(++h===c)return h;if(d&&++p>10){if(Date.now()>u)return i(),h;p=0}}}endDrawing(){for(let t of(nt(this,r,n).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear(),this._cachedBitmapsMap.values())){for(let e of t.values())"u">typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),nt(this,s,o).call(this)}_scaleImage(t,e){let i=t.width,r=t.height,n,s,o=Math.max(Math.hypot(e[0],e[1]),1),l=Math.max(Math.hypot(e[2],e[3]),1),h=i,c=r,d="prescale1";for(;o>2&&h>1||l>2&&c>1;){let e=h,i=c;o>2&&h>1&&(e=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h/2),o/=h/e),l>2&&c>1&&(i=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,l/=c/i),(s=(n=this.cachedCanvases.getCanvas(d,e,i)).context).clearRect(0,0,e,i),s.drawImage(t,0,0,h,c,0,0,e,i),t=n.canvas,h=e,c=i,d="prescale1"===d?"prescale2":"prescale1"}return{img:t,paintWidth:h,paintHeight:c}}_createMaskCanvas(t){let e,i,r,n,s=this.ctx,{width:o,height:d}=t,u=this.current.fillColor,p=this.current.patternFill,f=(0,h.getCurrentTransform)(s);if((t.bitmap||t.data)&&t.count>1){let n=t.bitmap||t.data.buffer;i=JSON.stringify(p?f:[f.slice(0,4),u]),(e=this._cachedBitmapsMap.get(n))||(e=new Map,this._cachedBitmapsMap.set(n,e));let s=e.get(i);if(s&&!p)return{canvas:s,offsetX:Math.round(Math.min(f[0],f[2])+f[4]),offsetY:Math.round(Math.min(f[1],f[3])+f[5])};r=s}r||y((n=this.cachedCanvases.getCanvas("maskCanvas",o,d)).context,t);let g=l.Util.transform(f,[1/o,0,0,-1/d,0,0]);g=l.Util.transform(g,[1,0,0,1,0,-d]);let v=l.Util.applyTransform([0,0],g),b=l.Util.applyTransform([o,d],g),A=l.Util.normalizeRect([v[0],v[1],b[0],b[1]]),S=Math.round(A[2]-A[0])||1,_=Math.round(A[3]-A[1])||1,x=this.cachedCanvases.getCanvas("fillCanvas",S,_),w=x.context,C=Math.min(v[0],b[0]),E=Math.min(v[1],b[1]);w.translate(-C,-E),w.transform(...g),r||(r=(r=this._scaleImage(n.canvas,(0,h.getCurrentTransformInverse)(w))).img,e&&p&&e.set(i,r)),w.imageSmoothingEnabled=k((0,h.getCurrentTransform)(w),t.interpolate),m(w,r,0,0,r.width,r.height,0,0,o,d),w.globalCompositeOperation="source-in";let T=l.Util.transform((0,h.getCurrentTransformInverse)(w),[1,0,0,1,-C,-E]);return w.fillStyle=p?u.getPattern(s,this,T,c.PathType.FILL):u,w.fillRect(0,0,o,d),e&&!p&&(this.cachedCanvases.delete("fillCanvas"),e.set(i,x.canvas)),{canvas:x.canvas,offsetX:Math.round(C),offsetY:Math.round(E)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=E[t]}setLineJoin(t){this.ctx.lineJoin=T[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){let i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(let[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i[0],i[1]);break;case"CA":this.current.strokeAlpha=i;break;case"ca":this.current.fillAlpha=i,this.ctx.globalAlpha=i;break;case"BM":this.ctx.globalCompositeOperation=i;break;case"SMask":this.current.activeSMask=i?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(i)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){let t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw Error("beginSMaskMode called while already in smask mode");let t=this.ctx.canvas.width,e=this.ctx.canvas.height,i="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(i,t,e);this.suspendedCtx=this.ctx,this.ctx=r.context;let n=this.ctx;n.setTransform(...(0,h.getCurrentTransform)(this.suspendedCtx)),A(this.suspendedCtx,n),function(t,e){if(t._removeMirroring)throw Error("Context is already forwarding operations.");t.__originalSave=t.save,t.__originalRestore=t.restore,t.__originalRotate=t.rotate,t.__originalScale=t.scale,t.__originalTranslate=t.translate,t.__originalTransform=t.transform,t.__originalSetTransform=t.setTransform,t.__originalResetTransform=t.resetTransform,t.__originalClip=t.clip,t.__originalMoveTo=t.moveTo,t.__originalLineTo=t.lineTo,t.__originalBezierCurveTo=t.bezierCurveTo,t.__originalRect=t.rect,t.__originalClosePath=t.closePath,t.__originalBeginPath=t.beginPath,t._removeMirroring=()=>{t.save=t.__originalSave,t.restore=t.__originalRestore,t.rotate=t.__originalRotate,t.scale=t.__originalScale,t.translate=t.__originalTranslate,t.transform=t.__originalTransform,t.setTransform=t.__originalSetTransform,t.resetTransform=t.__originalResetTransform,t.clip=t.__originalClip,t.moveTo=t.__originalMoveTo,t.lineTo=t.__originalLineTo,t.bezierCurveTo=t.__originalBezierCurveTo,t.rect=t.__originalRect,t.closePath=t.__originalClosePath,t.beginPath=t.__originalBeginPath,delete t._removeMirroring},t.save=function(){e.save(),this.__originalSave()},t.restore=function(){e.restore(),this.__originalRestore()},t.translate=function(t,i){e.translate(t,i),this.__originalTranslate(t,i)},t.scale=function(t,i){e.scale(t,i),this.__originalScale(t,i)},t.transform=function(t,i,r,n,s,o){e.transform(t,i,r,n,s,o),this.__originalTransform(t,i,r,n,s,o)},t.setTransform=function(t,i,r,n,s,o){e.setTransform(t,i,r,n,s,o),this.__originalSetTransform(t,i,r,n,s,o)},t.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},t.rotate=function(t){e.rotate(t),this.__originalRotate(t)},t.clip=function(t){e.clip(t),this.__originalClip(t)},t.moveTo=function(t,i){e.moveTo(t,i),this.__originalMoveTo(t,i)},t.lineTo=function(t,i){e.lineTo(t,i),this.__originalLineTo(t,i)},t.bezierCurveTo=function(t,i,r,n,s,o){e.bezierCurveTo(t,i,r,n,s,o),this.__originalBezierCurveTo(t,i,r,n,s,o)},t.rect=function(t,i,r,n){e.rect(t,i,r,n),this.__originalRect(t,i,r,n)},t.closePath=function(){e.closePath(),this.__originalClosePath()},t.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}(n,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),A(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];let e=this.current.activeSMask;C(this.suspendedCtx,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(A(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();let t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),A(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(t,e,i,r,n,s){this.ctx.transform(t,e,i,r,n,s),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,i){let r=this.ctx,n=this.current,s,o,c=n.x,d=n.y,u=(0,h.getCurrentTransform)(r),p=0===u[0]&&0===u[3]||0===u[1]&&0===u[2],f=p?i.slice(0):null;for(let i=0,h=0,g=t.length;i<g;i++)switch(0|t[i]){case l.OPS.rectangle:c=e[h++],d=e[h++];let g=e[h++],m=e[h++],v=c+g,b=d+m;r.moveTo(c,d),0===g||0===m?r.lineTo(v,b):(r.lineTo(v,d),r.lineTo(v,b),r.lineTo(c,b)),p||n.updateRectMinMax(u,[c,d,v,b]),r.closePath();break;case l.OPS.moveTo:c=e[h++],d=e[h++],r.moveTo(c,d),p||n.updatePathMinMax(u,c,d);break;case l.OPS.lineTo:c=e[h++],d=e[h++],r.lineTo(c,d),p||n.updatePathMinMax(u,c,d);break;case l.OPS.curveTo:s=c,o=d,c=e[h+4],d=e[h+5],r.bezierCurveTo(e[h],e[h+1],e[h+2],e[h+3],c,d),n.updateCurvePathMinMax(u,s,o,e[h],e[h+1],e[h+2],e[h+3],c,d,f),h+=6;break;case l.OPS.curveTo2:s=c,o=d,r.bezierCurveTo(c,d,e[h],e[h+1],e[h+2],e[h+3]),n.updateCurvePathMinMax(u,s,o,c,d,e[h],e[h+1],e[h+2],e[h+3],f),c=e[h+2],d=e[h+3],h+=4;break;case l.OPS.curveTo3:s=c,o=d,c=e[h+2],d=e[h+3],r.bezierCurveTo(e[h],e[h+1],c,d,c,d),n.updateCurvePathMinMax(u,s,o,e[h],e[h+1],c,d,c,d,f),h+=4;break;case l.OPS.closePath:r.closePath()}p&&n.updateScalingPathMinMax(u,f),n.setCurrentPoint(c,d)}closePath(){this.ctx.closePath()}stroke(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.ctx,i=this.current.strokeColor;e.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof i&&null!=i&&i.getPattern?(e.save(),e.strokeStyle=i.getPattern(e,this,(0,h.getCurrentTransformInverse)(e),c.PathType.STROKE),this.rescaleAndStroke(!1),e.restore()):this.rescaleAndStroke(!0)),t&&this.consumePath(this.current.getClippedPathBoundingBox()),e.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.ctx,i=this.current.fillColor,r=!1;this.current.patternFill&&(e.save(),e.fillStyle=i.getPattern(e,this,(0,h.getCurrentTransformInverse)(e),c.PathType.FILL),r=!0);let n=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==n&&(this.pendingEOFill?(e.fill("evenodd"),this.pendingEOFill=!1):e.fill()),r&&e.restore(),t&&this.consumePath(n)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=M}eoClip(){this.pendingClip=P}beginText(){this.current.textMatrix=l.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){let t=this.pendingTextPaths,e=this.ctx;if(void 0!==t){for(let i of(e.save(),e.beginPath(),t))e.setTransform(...i.transform),e.translate(i.x,i.y),i.addToPath(e,i.fontSize);e.restore(),e.clip(),e.beginPath(),delete this.pendingTextPaths}else e.beginPath()}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var i;let r=this.commonObjs.get(t),n=this.current;if(!r)throw Error(`Can't find font for ${t}`);if(n.fontMatrix=r.fontMatrix||l.FONT_IDENTITY_MATRIX,0!==n.fontMatrix[0]&&0!==n.fontMatrix[3]||(0,l.warn)("Invalid font matrix for font "+t),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=r,this.current.fontSize=e,r.isType3Font)return;let s=r.loadedName||"sans-serif",o=(null==(i=r.systemFontInfo)?void 0:i.css)||`"${s}", ${r.fallbackName}`,h="normal";r.black?h="900":r.bold&&(h="bold");let c=r.italic?"italic":"normal",d=e;e<16?d=16:e>100&&(d=100),this.current.fontSizeScale=e/d,this.ctx.font=`${c} ${h} ${d}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t,e,i,r,n,s){this.current.textMatrix=[t,e,i,r,n,s],this.current.textMatrixScale=Math.hypot(t,e),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,i,r){let n,s=this.ctx,o=this.current,c=o.font,d=o.textRenderingMode,u=o.fontSize/o.fontSizeScale,p=d&l.TextRenderingMode.FILL_STROKE_MASK,f=!!(d&l.TextRenderingMode.ADD_TO_PATH_FLAG),g=o.patternFill&&!c.missingFile;(c.disableFontFace||f||g)&&(n=c.getPathGenerator(this.commonObjs,t)),c.disableFontFace||g?(s.save(),s.translate(e,i),s.beginPath(),n(s,u),r&&s.setTransform(...r),p!==l.TextRenderingMode.FILL&&p!==l.TextRenderingMode.FILL_STROKE||s.fill(),p!==l.TextRenderingMode.STROKE&&p!==l.TextRenderingMode.FILL_STROKE||s.stroke(),s.restore()):(p!==l.TextRenderingMode.FILL&&p!==l.TextRenderingMode.FILL_STROKE||s.fillText(t,e,i),p!==l.TextRenderingMode.STROKE&&p!==l.TextRenderingMode.FILL_STROKE||s.strokeText(t,e,i)),f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,h.getCurrentTransform)(s),x:e,y:i,fontSize:u,addToPath:n})}get isFontSubpixelAAEnabled(){let{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);let e=t.getImageData(0,0,10,10).data,i=!1;for(let t=3;t<e.length;t+=4)if(e[t]>0&&e[t]<255){i=!0;break}return(0,l.shadow)(this,"isFontSubpixelAAEnabled",i)}showText(t){let e,i=this.current,r=i.font;if(r.isType3Font)return this.showType3Text(t);let n=i.fontSize;if(0===n)return;let s=this.ctx,o=i.fontSizeScale,d=i.charSpacing,u=i.wordSpacing,p=i.fontDirection,f=i.textHScale*p,g=t.length,m=r.vertical,v=m?1:-1,b=r.defaultVMetrics,y=n*i.fontMatrix[0],A=i.textRenderingMode===l.TextRenderingMode.FILL&&!r.disableFontFace&&!i.patternFill;if(s.save(),s.transform(...i.textMatrix),s.translate(i.x,i.y+i.textRise),p>0?s.scale(f,-1):s.scale(f,1),i.patternFill){s.save();let t=i.fillColor.getPattern(s,this,(0,h.getCurrentTransformInverse)(s),c.PathType.FILL);e=(0,h.getCurrentTransform)(s),s.restore(),s.fillStyle=t}let S=i.lineWidth,_=i.textMatrixScale;if(0===_||0===S){let t=i.textRenderingMode&l.TextRenderingMode.FILL_STROKE_MASK;t!==l.TextRenderingMode.STROKE&&t!==l.TextRenderingMode.FILL_STROKE||(S=this.getSinglePixelWidth())}else S/=_;if(1!==o&&(s.scale(o,o),S/=o),s.lineWidth=S,r.isInvalidPDFjsFont){let e=[],r=0;for(let i of t)e.push(i.unicode),r+=i.width;s.fillText(e.join(""),0,0),i.x+=r*y*f,s.restore(),this.compose();return}let x,w=0;for(x=0;x<g;++x){let i=t[x];if("number"==typeof i){w+=v*i*n/1e3;continue}let l=!1,h=(i.isSpace?u:0)+d,c=i.fontChar,f=i.accent,g,S,_=i.width;if(m){let t=i.vmetric||b,e=-(i.vmetric?t[1]:.5*_)*y,r=t[2]*y;_=t?-t[0]:_,g=e/o,S=(w+r)/o}else g=w/o,S=0;if(r.remeasure&&_>0){let t=1e3*s.measureText(c).width/n*o;if(_<t&&this.isFontSubpixelAAEnabled){let e=_/t;l=!0,s.save(),s.scale(e,1),g/=e}else _!==t&&(g+=(_-t)/2e3*n/o)}if(this.contentVisible&&(i.isInFont||r.missingFile)){if(A&&!f)s.fillText(c,g,S);else if(this.paintChar(c,g,S,e),f){let t=g+n*f.offset.x/o,i=S-n*f.offset.y/o;this.paintChar(f.fontChar,t,i,e)}}w+=m?_*y-h*p:_*y+h*p,l&&s.restore()}m?i.y-=w:i.x+=w*f,s.restore(),this.compose()}showType3Text(t){let e,i,r,n,s=this.ctx,o=this.current,h=o.font,c=o.fontSize,d=o.fontDirection,u=h.vertical?1:-1,p=o.charSpacing,f=o.wordSpacing,g=o.textHScale*d,m=o.fontMatrix||l.FONT_IDENTITY_MATRIX,v=t.length;if(o.textRenderingMode!==l.TextRenderingMode.INVISIBLE&&0!==c){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),s.transform(...o.textMatrix),s.translate(o.x,o.y),s.scale(g,d),e=0;e<v;++e){if("number"==typeof(i=t[e])){n=u*i*c/1e3,this.ctx.translate(n,0),o.x+=n*g;continue}let d=(i.isSpace?f:0)+p,v=h.charProcOperatorList[i.operatorListId];if(!v){(0,l.warn)(`Type3 character "${i.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=i,this.save(),s.scale(c,c),s.transform(...m),this.executeOperatorList(v),this.restore()),r=l.Util.applyTransform([i.width,0],m)[0]*c+d,s.translate(r,0),o.x+=r*g}s.restore(),this.processingType3=null}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,i,r,n,s){this.ctx.rect(i,r,n-i,s-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(t){let e;if("TilingPattern"===t[0]){let i=t[1],r=this.baseTransform||(0,h.getCurrentTransform)(this.ctx),n={createCanvasGraphics:t=>new R(t,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new c.TilingPattern(t,i,this.ctx,n,r)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,i){let r=l.Util.makeHexColor(t,e,i);this.ctx.strokeStyle=r,this.current.strokeColor=r}setFillRGBColor(t,e,i){let r=l.Util.makeHexColor(t,e,i);this.ctx.fillStyle=r,this.current.fillColor=r,this.current.patternFill=!1}_getPattern(t){let e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(t)?e=this.cachedPatterns.get(t):(e=(0,c.getShadingPattern)(this.getObject(t)),this.cachedPatterns.set(t,e)),i&&(e.matrix=i),e}shadingFill(t){if(!this.contentVisible)return;let e=this.ctx;this.save(),e.fillStyle=this._getPattern(t).getPattern(e,this,(0,h.getCurrentTransformInverse)(e),c.PathType.SHADING);let i=(0,h.getCurrentTransformInverse)(e);if(i){let t=e.canvas,r=t.width,n=t.height,s=l.Util.applyTransform([0,0],i),o=l.Util.applyTransform([0,n],i),h=l.Util.applyTransform([r,0],i),c=l.Util.applyTransform([r,n],i),d=Math.min(s[0],o[0],h[0],c[0]),u=Math.min(s[1],o[1],h[1],c[1]),p=Math.max(s[0],o[0],h[0],c[0]),f=Math.max(s[1],o[1],h[1],c[1]);this.ctx.fillRect(d,u,p-d,f-u)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,l.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,l.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(t)&&6===t.length&&this.transform(...t),this.baseTransform=(0,h.getCurrentTransform)(this.ctx),e)){let t=e[2]-e[0],i=e[3]-e[1];this.ctx.rect(e[0],e[1],t,i),this.current.updateRectMinMax((0,h.getCurrentTransform)(this.ctx),e),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);let e=this.ctx;t.isolated||(0,l.info)("TODO: Support non-isolated groups."),t.knockout&&(0,l.warn)("Knockout groups not supported.");let i=(0,h.getCurrentTransform)(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw Error("Bounding box is required.");let r=l.Util.getAxialAlignedBoundingBox(t.bbox,(0,h.getCurrentTransform)(e)),n=[0,0,e.canvas.width,e.canvas.height],s=Math.floor((r=l.Util.intersect(r,n)||[0,0,0,0])[0]),o=Math.floor(r[1]),c=Math.max(Math.ceil(r[2])-s,1),d=Math.max(Math.ceil(r[3])-o,1),u=1,f=1;c>p&&(u=c/p,c=p),d>p&&(f=d/p,d=p),this.current.startNewPathAndClipBox([0,0,c,d]);let g="groupAt"+this.groupLevel;t.smask&&(g+="_smask_"+this.smaskCounter++%2);let m=this.cachedCanvases.getCanvas(g,c,d),v=m.context;v.scale(1/u,1/f),v.translate(-s,-o),v.transform(...i),t.smask?this.smaskStack.push({canvas:m.canvas,context:v,offsetX:s,offsetY:o,scaleX:u,scaleY:f,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(s,o),e.scale(u,f),e.save()),A(e,v),this.ctx=v,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;let e=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();let t=(0,h.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...t);let i=l.Util.getAxialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],t);this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(i)}}beginAnnotation(t,e,i,s,o){if(nt(this,r,n).call(this),S(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(e)&&4===e.length){let r=e[2]-e[0],n=e[3]-e[1];if(o&&this.annotationCanvasMap){(i=i.slice())[4]-=e[0],i[5]-=e[1],(e=e.slice())[0]=e[1]=0,e[2]=r,e[3]=n;let[s,o]=l.Util.singularValueDecompose2dScale((0,h.getCurrentTransform)(this.ctx)),{viewportScale:c}=this,d=Math.ceil(r*this.outputScaleX*c),u=Math.ceil(n*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(d,u);let{canvas:p,context:f}=this.annotationCanvas;this.annotationCanvasMap.set(t,p),this.annotationCanvas.savedCtx=this.ctx,this.ctx=f,this.ctx.save(),this.ctx.setTransform(s,0,0,-o,0,n*o),S(this.ctx)}else S(this.ctx),this.ctx.rect(e[0],e[1],r,n),this.ctx.clip(),this.endPath()}this.current=new v(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...i),this.transform(...s)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),nt(this,s,o).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;let e=t.count;(t=this.getObject(t.data,t)).count=e;let i=this.ctx,r=this.processingType3;if(r&&(void 0===r.compiled&&(r.compiled=function(t){let{width:e,height:i}=t;if(e>1e3||i>1e3)return null;let r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),n=e+1,s,o,l,h=new Uint8Array(n*(i+1)),c=e+7&-8,d=new Uint8Array(c*i),u=0;for(let e of t.data){let t=128;for(;t>0;)d[u++]=e&t?0:255,t>>=1}let p=0;for(0!==d[u=0]&&(h[0]=1,++p),o=1;o<e;o++)d[u]!==d[u+1]&&(h[o]=d[u]?2:1,++p),u++;for(0!==d[u]&&(h[o]=2,++p),s=1;s<i;s++){u=s*c,l=s*n,d[u-c]!==d[u]&&(h[l]=d[u]?1:8,++p);let t=4*!!d[u]+8*!!d[u-c];for(o=1;o<e;o++)r[t=(t>>2)+4*!!d[u+1]+8*!!d[u-c+1]]&&(h[l+o]=r[t],++p),u++;if(d[u-c]!==d[u]&&(h[l+o]=d[u]?2:4,++p),p>1e3)return null}for(u=c*(i-1),l=s*n,0!==d[u]&&(h[l]=8,++p),o=1;o<e;o++)d[u]!==d[u+1]&&(h[l+o]=d[u]?4:8,++p),u++;if(0!==d[u]&&(h[l+o]=4,++p),p>1e3)return null;let f=new Int32Array([0,n,-1,0,-n,0,0,0,1]),g=new Path2D;for(s=0;p&&s<=i;s++){let t=s*n,i=t+e;for(;t<i&&!h[t];)t++;if(t===i)continue;g.moveTo(t%n,s);let r=t,o=h[t];do{let e=f[o];do t+=e;while(!h[t]);let i=h[t];5!==i&&10!==i?(o=i,h[t]=0):(o=i&51*o>>4,h[t]&=o>>2|o<<2),g.lineTo(t%n,t/n|0),h[t]||--p}while(r!==t);--s}return d=null,h=null,function(t){t.save(),t.scale(1/e,-1/i),t.translate(0,-i),t.fill(g),t.beginPath(),t.restore()}}(t)),r.compiled))return void r.compiled(i);let n=this._createMaskCanvas(t),s=n.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(s,n.offsetX,n.offsetY),i.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;t=this.getObject(t.data,t);let o=this.ctx;o.save();let c=(0,h.getCurrentTransform)(o);o.transform(e,i,r,n,0,0);let d=this._createMaskCanvas(t);o.setTransform(1,0,0,1,d.offsetX-c[4],d.offsetY-c[5]);for(let t=0,h=s.length;t<h;t+=2){let h=l.Util.transform(c,[e,i,r,n,s[t],s[t+1]]),[u,p]=l.Util.applyTransform([0,0],h);o.drawImage(d.canvas,u,p)}o.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;let e=this.ctx,i=this.current.fillColor,r=this.current.patternFill;for(let n of t){let{data:t,width:s,height:o,transform:l}=n,d=this.cachedCanvases.getCanvas("maskCanvas",s,o),u=d.context;u.save(),y(u,this.getObject(t,n)),u.globalCompositeOperation="source-in",u.fillStyle=r?i.getPattern(u,this,(0,h.getCurrentTransformInverse)(e),c.PathType.FILL):i,u.fillRect(0,0,s,o),u.restore(),e.save(),e.transform(...l),e.scale(1,-1),m(e,d.canvas,0,0,s,o,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;let e=this.getObject(t);e?this.paintInlineImageXObject(e):(0,l.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(t,e,i,r){if(!this.contentVisible)return;let n=this.getObject(t);if(!n)return void(0,l.warn)("Dependent image isn't ready yet");let s=n.width,o=n.height,h=[];for(let t=0,n=r.length;t<n;t+=2)h.push({transform:[e,0,0,i,r[t],r[t+1]],x:0,y:0,w:s,h:o});this.paintInlineImageXObjectGroup(n,h)}applyTransferMapsToCanvas(t){return"none"!==this.current.transferMaps&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if("none"===this.current.transferMaps)return t.bitmap;let{bitmap:e,width:i,height:r}=t,n=this.cachedCanvases.getCanvas("inlineImage",i,r),s=n.context;return s.filter=this.current.transferMaps,s.drawImage(e,0,0),s.filter="none",n.canvas}paintInlineImageXObject(t){let e;if(!this.contentVisible)return;let i=t.width,r=t.height,n=this.ctx;if(this.save(),u.isNodeJS||(n.filter="none"),n.scale(1/i,-1/r),t.bitmap)e=this.applyTransferMapsToBitmap(t);else if("function"==typeof HTMLElement&&t instanceof HTMLElement||!t.data)e=t;else{let n=this.cachedCanvases.getCanvas("inlineImage",i,r).context;b(n,t),e=this.applyTransferMapsToCanvas(n)}let s=this._scaleImage(e,(0,h.getCurrentTransformInverse)(n));n.imageSmoothingEnabled=k((0,h.getCurrentTransform)(n),t.interpolate),m(n,s.img,0,0,s.paintWidth,s.paintHeight,0,-r,i,r),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){let i;if(!this.contentVisible)return;let r=this.ctx;if(t.bitmap)i=t.bitmap;else{let e=t.width,r=t.height,n=this.cachedCanvases.getCanvas("inlineImage",e,r).context;b(n,t),i=this.applyTransferMapsToCanvas(n)}for(let t of e)r.save(),r.transform(...t.transform),r.scale(1,-1),m(r,i,t.x,t.y,t.w,t.h,0,-1,1,1),r.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t){let e=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(t);let i=this.ctx;this.pendingClip&&(e||(this.pendingClip===P?i.clip("evenodd"):i.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),i.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){let t=(0,h.getCurrentTransform)(this.ctx);if(0===t[1]&&0===t[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{let e=Math.abs(t[0]*t[3]-t[2]*t[1]),i=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(i,r)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){let t,e,{lineWidth:i}=this.current,{a:r,b:n,c:s,d:o}=this.ctx.getTransform();if(0===n&&0===s){let n=Math.abs(r),s=Math.abs(o);if(n===s)if(0===i)t=e=1/n;else{let r=n*i;t=e=r<1?1/r:1}else if(0===i)t=1/n,e=1/s;else{let r=n*i,o=s*i;t=r<1?1/r:1,e=o<1?1/o:1}}else{let l=Math.abs(r*o-n*s),h=Math.hypot(r,n),c=Math.hypot(s,o);if(0===i)t=c/l,e=h/l;else{let r=i*l;t=c>r?c/r:1,e=h>r?h/r:1}}this._cachedScaleForStroking[0]=t,this._cachedScaleForStroking[1]=e}return this._cachedScaleForStroking}rescaleAndStroke(t){let{ctx:e}=this,{lineWidth:i}=this.current,[r,n]=this.getScaleForStroking();if(e.lineWidth=i||1,1===r&&1===n)return void e.stroke();let s=e.getLineDash();if(t&&e.save(),e.scale(r,n),s.length>0){let t=Math.max(r,n);e.setLineDash(s.map(e=>e/t)),e.lineDashOffset/=t}e.stroke(),t&&e.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}},F=R;for(let t in r=new WeakSet,n=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},s=new WeakSet,o=function(){if(this.pageColors){let t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==t){let e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},e.CanvasGraphics=F,l.OPS)void 0!==F.prototype[t]&&(F.prototype[l.OPS[t]]=F.prototype[t])},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=function(t){switch(t[0]){case"RadialAxial":return new h(t);case"Mesh":return new u(t);case"Dummy":return new p}throw Error(`Unknown IR type: ${t[0]}`)};var r=i(1),n=i(142);let s={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function o(t,e){if(!e)return;let i=e[2]-e[0],r=e[3]-e[1],n=new Path2D;n.rect(e[0],e[1],i,r),t.clip(n)}e.PathType=s;class l{constructor(){this.constructor===l&&(0,r.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,r.unreachable)("Abstract method `getPattern` called.")}}class h extends l{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;for(let i of("axial"===this._type?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1)),this._colorStops))e.addColorStop(i[0],i[1]);return e}getPattern(t,e,i,l){let h;if(l===s.STROKE||l===s.FILL){let s=e.current.getClippedPathBoundingBox(l,(0,n.getCurrentTransform)(t))||[0,0,0,0],c=Math.ceil(s[2]-s[0])||1,d=Math.ceil(s[3]-s[1])||1,u=e.cachedCanvases.getCanvas("pattern",c,d,!0),p=u.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-s[0],-s[1]),i=r.Util.transform(i,[1,0,0,1,s[0],s[1]]),p.transform(...e.baseTransform),this.matrix&&p.transform(...this.matrix),o(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),h=t.createPattern(u.canvas,"no-repeat");let f=new DOMMatrix(i);h.setTransform(f)}else o(t,this._bbox),h=this._createGradient(t);return h}}function c(t,e,i,r,n,s,o,l){let h,c,d,u,p,f,g,m,v,b=e.coords,y=e.colors,A=t.data,S=4*t.width;b[i+1]>b[r+1]&&(h=i,i=r,r=h,h=s,s=o,o=h),b[r+1]>b[n+1]&&(h=r,r=n,n=h,h=o,o=l,l=h),b[i+1]>b[r+1]&&(h=i,i=r,r=h,h=s,s=o,o=h);let _=(b[i]+e.offsetX)*e.scaleX,x=(b[i+1]+e.offsetY)*e.scaleY,w=(b[r]+e.offsetX)*e.scaleX,C=(b[r+1]+e.offsetY)*e.scaleY,k=(b[n]+e.offsetX)*e.scaleX,E=(b[n+1]+e.offsetY)*e.scaleY;if(x>=E)return;let T=y[s],M=y[s+1],P=y[s+2],R=y[o],F=y[o+1],O=y[o+2],I=y[l],D=y[l+1],L=y[l+2],N=Math.round(x),j=Math.round(E);for(let t=N;t<=j;t++){let e;if(t<C){let e;c=_-(_-w)*(e=t<x?0:(x-t)/(x-C)),d=T-(T-R)*e,u=M-(M-F)*e,p=P-(P-O)*e}else{let e;c=w-(w-k)*(e=t>E?1:C===E?0:(C-t)/(C-E)),d=R-(R-I)*e,u=F-(F-D)*e,p=O-(O-L)*e}f=_-(_-k)*(e=t<x?0:t>E?1:(x-t)/(x-E)),g=T-(T-I)*e,m=M-(M-D)*e,v=P-(P-L)*e;let i=Math.round(Math.min(c,f)),r=Math.round(Math.max(c,f)),n=S*t+4*i;for(let t=i;t<=r;t++)(e=(c-t)/(c-f))<0?e=0:e>1&&(e=1),A[n++]=d-(d-g)*e|0,A[n++]=u-(u-m)*e|0,A[n++]=p-(p-v)*e|0,A[n++]=255}}function d(t,e,i){let r,n,s=e.coords,o=e.colors;switch(e.type){case"lattice":let l=e.verticesPerRow,h=Math.floor(s.length/l)-1,d=l-1;for(r=0;r<h;r++){let e=r*l;for(let r=0;r<d;r++,e++)c(t,i,s[e],s[e+1],s[e+l],o[e],o[e+1],o[e+l]),c(t,i,s[e+l+1],s[e+1],s[e+l],o[e+l+1],o[e+1],o[e+l])}break;case"triangles":for(r=0,n=s.length;r<n;r+=3)c(t,i,s[r],s[r+1],s[r+2],o[r],o[r+1],o[r+2]);break;default:throw Error("illegal figure")}}class u extends l{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[7],this._background=t[8],this.matrix=null}_createMeshCanvas(t,e,i){let r=Math.floor(this._bounds[0]),n=Math.floor(this._bounds[1]),s=Math.ceil(this._bounds[2])-r,o=Math.ceil(this._bounds[3])-n,l=Math.min(Math.ceil(Math.abs(s*t[0]*1.1)),3e3),h=Math.min(Math.ceil(Math.abs(o*t[1]*1.1)),3e3),c=s/l,u=o/h,p={coords:this._coords,colors:this._colors,offsetX:-r,offsetY:-n,scaleX:1/c,scaleY:1/u},f=l+4,g=h+4,m=i.getCanvas("mesh",f,g,!1),v=m.context,b=v.createImageData(l,h);if(e){let t=b.data;for(let i=0,r=t.length;i<r;i+=4)t[i]=e[0],t[i+1]=e[1],t[i+2]=e[2],t[i+3]=255}for(let t of this._figures)d(b,t,p);return v.putImageData(b,2,2),{canvas:m.canvas,offsetX:r-2*c,offsetY:n-2*u,scaleX:c,scaleY:u}}getPattern(t,e,i,l){let h;if(o(t,this._bbox),l===s.SHADING)h=r.Util.singularValueDecompose2dScale((0,n.getCurrentTransform)(t));else if(h=r.Util.singularValueDecompose2dScale(e.baseTransform),this.matrix){let t=r.Util.singularValueDecompose2dScale(this.matrix);h=[h[0]*t[0],h[1]*t[1]]}let c=this._createMeshCanvas(h,l===s.SHADING?null:this._background,e.cachedCanvases);return l!==s.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(c.offsetX,c.offsetY),t.scale(c.scaleX,c.scaleY),t.createPattern(c.canvas,"no-repeat")}}class p extends l{getPattern(){return"hotpink"}}let f=1,g=2,m=class{constructor(t,e,i,r,n){this.operatorList=t[2],this.matrix=t[3]||[1,0,0,1,0,0],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.color=e,this.ctx=i,this.canvasGraphicsFactory=r,this.baseTransform=n}createPatternCanvas(t){let e=this.operatorList,i=this.bbox,s=this.xstep,o=this.ystep,l=this.paintType,h=this.tilingType,c=this.color,d=this.canvasGraphicsFactory;(0,r.info)("TilingType: "+h);let u=i[0],p=i[1],f=i[2],g=i[3],m=r.Util.singularValueDecompose2dScale(this.matrix),v=r.Util.singularValueDecompose2dScale(this.baseTransform),b=[m[0]*v[0],m[1]*v[1]],y=this.getSizeAndScale(s,this.ctx.canvas.width,b[0]),A=this.getSizeAndScale(o,this.ctx.canvas.height,b[1]),S=t.cachedCanvases.getCanvas("pattern",y.size,A.size,!0),_=S.context,x=d.createCanvasGraphics(_);x.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(x,l,c);let w=u,C=p,k=f,E=g;return u<0&&(w=0,k+=Math.abs(u)),p<0&&(C=0,E+=Math.abs(p)),_.translate(-y.scale*w,-A.scale*C),x.transform(y.scale,0,0,A.scale,0,0),_.save(),this.clipBbox(x,w,C,k,E),x.baseTransform=(0,n.getCurrentTransform)(x.ctx),x.executeOperatorList(e),x.endDrawing(),{canvas:S.canvas,scaleX:y.scale,scaleY:A.scale,offsetX:w,offsetY:C}}getSizeAndScale(t,e,i){t=Math.abs(t);let r=Math.max(m.MAX_PATTERN_SIZE,e),n=Math.ceil(t*i);return n>=r?n=r:i=n/t,{scale:i,size:n}}clipBbox(t,e,i,r,s){let o=r-e,l=s-i;t.ctx.rect(e,i,o,l),t.current.updateRectMinMax((0,n.getCurrentTransform)(t.ctx),[e,i,r,s]),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,i){let n=t.ctx,s=t.current;switch(e){case f:let o=this.ctx;n.fillStyle=o.fillStyle,n.strokeStyle=o.strokeStyle,s.fillColor=o.fillStyle,s.strokeColor=o.strokeStyle;break;case g:let l=r.Util.makeHexColor(i[0],i[1],i[2]);n.fillStyle=l,n.strokeStyle=l,s.fillColor=l,s.strokeColor=l;break;default:throw new r.FormatError(`Unsupported paint type: ${e}`)}}getPattern(t,e,i,n){let o=i;n!==s.SHADING&&(o=r.Util.transform(o,e.baseTransform),this.matrix&&(o=r.Util.transform(o,this.matrix)));let l=this.createPatternCanvas(e),h=new DOMMatrix(o);h=(h=h.translate(l.offsetX,l.offsetY)).scale(1/l.scaleX,1/l.scaleY);let c=t.createPattern(l.canvas,"repeat");return c.setTransform(h),c}},v=m;It(v,"MAX_PATTERN_SIZE",3e3),e.TilingPattern=v},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=n,e.convertToRGBA=function(t){switch(t.kind){case r.ImageKind.GRAYSCALE_1BPP:return n(t);case r.ImageKind.RGB_24BPP:return function(t){let{src:e,srcPos:i=0,dest:n,destPos:s=0,width:o,height:l}=t,h=0,c=e.length>>2,d=new Uint32Array(e.buffer,i,c);if(r.FeatureTest.isLittleEndian){for(;h<c-2;h+=3,s+=4){let t=d[h],e=d[h+1],i=d[h+2];n[s]=0xff000000|t,n[s+1]=t>>>24|e<<8|0xff000000,n[s+2]=e>>>16|i<<16|0xff000000,n[s+3]=i>>>8|0xff000000}for(let t=4*h,i=e.length;t<i;t+=3)n[s++]=e[t]|e[t+1]<<8|e[t+2]<<16|0xff000000}else{for(;h<c-2;h+=3,s+=4){let t=d[h],e=d[h+1],i=d[h+2];n[s]=255|t,n[s+1]=t<<24|e>>>8|255,n[s+2]=e<<16|i>>>16|255,n[s+3]=i<<8|255}for(let t=4*h,i=e.length;t<i;t+=3)n[s++]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|255}return{srcPos:i,destPos:s}}(t)}return null},e.grayToRGBA=function(t,e){if(r.FeatureTest.isLittleEndian)for(let i=0,r=t.length;i<r;i++)e[i]=65793*t[i]|0xff000000;else for(let i=0,r=t.length;i<r;i++)e[i]=0x1010100*t[i]|255};var r=i(1);function n(t){let{src:e,srcPos:i=0,dest:n,width:s,height:o,nonBlackColor:l=0xffffffff,inverseDecode:h=!1}=t,c=r.FeatureTest.isLittleEndian?0xff000000:255,[d,u]=h?[l,c]:[c,l],p=s>>3,f=7&s,g=e.length;n=new Uint32Array(n.buffer);let m=0;for(let t=0;t<o;t++){for(let t=i+p;i<t;i++){let t=i<g?e[i]:255;n[m++]=128&t?u:d,n[m++]=64&t?u:d,n[m++]=32&t?u:d,n[m++]=16&t?u:d,n[m++]=8&t?u:d,n[m++]=4&t?u:d,n[m++]=2&t?u:d,n[m++]=1&t?u:d}if(0===f)continue;let t=i<g?e[i++]:255;for(let e=0;e<f;e++)n[m++]=t&1<<7-e?u:d}return{srcPos:i,destPos:m}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;let i=Object.create(null);e.GlobalWorkerOptions=i,i.workerPort=null,i.workerSrc=""},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var r,n,s,o,l,h,c,d=i(1);let u=1,p=2,f=1,g=2,m=3,v=4,b=5,y=6,A=7,S=8;function _(t){switch(t instanceof Error||"object"==typeof t&&null!==t||(0,d.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),t.name){case"AbortException":return new d.AbortException(t.message);case"MissingPDFException":return new d.MissingPDFException(t.message);case"PasswordException":return new d.PasswordException(t.message,t.code);case"UnexpectedResponseException":return new d.UnexpectedResponseException(t.message,t.status);case"UnknownErrorException":return new d.UnknownErrorException(t.message,t.details);default:return new d.UnknownErrorException(t.message,t.toString())}}c=class{constructor(t,e,i){et(this,r),et(this,s),et(this,l),this.sourceName=t,this.targetName=e,this.comObj=i,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=t=>{let e=t.data;if(e.targetName!==this.sourceName)return;if(e.stream)return void nt(this,s,o).call(this,e);if(e.callback){let t=e.callbackId,i=this.callbackCapabilities[t];if(!i)throw Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],e.callback===u)i.resolve(e.data);else{if(e.callback!==p)throw Error("Unexpected callback case");i.reject(_(e.reason))}return}let l=this.actionHandler[e.action];if(!l)throw Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){let t=this.sourceName,r=e.sourceName;new Promise(function(t){t(l(e.data))}).then(function(n){i.postMessage({sourceName:t,targetName:r,callback:u,callbackId:e.callbackId,data:n})},function(n){i.postMessage({sourceName:t,targetName:r,callback:p,callbackId:e.callbackId,reason:_(n)})})}else e.streamId?nt(this,r,n).call(this,e):l(e.data)},i.addEventListener("message",this._onComObjOnMessage)}on(t,e){let i=this.actionHandler;if(i[t])throw Error(`There is already an actionName called "${t}"`);i[t]=e}send(t,e,i){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},i)}sendWithPromise(t,e,i){let r=this.callbackId++,n=new d.PromiseCapability;this.callbackCapabilities[r]=n;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:e},i)}catch(t){n.reject(t)}return n.promise}sendWithStream(t,e,i,r){let n=this.streamId++,s=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:i=>{let h=new d.PromiseCapability;return this.streamControllers[n]={controller:i,startCall:h,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:s,targetName:o,action:t,streamId:n,data:e,desiredSize:i.desiredSize},r),h.promise},pull:t=>{let e=new d.PromiseCapability;return this.streamControllers[n].pullCall=e,l.postMessage({sourceName:s,targetName:o,stream:y,streamId:n,desiredSize:t.desiredSize}),e.promise},cancel:t=>{(0,d.assert)(t instanceof Error,"cancel must have a valid reason");let e=new d.PromiseCapability;return this.streamControllers[n].cancelCall=e,this.streamControllers[n].isClosed=!0,l.postMessage({sourceName:s,targetName:o,stream:f,streamId:n,reason:_(t)}),e.promise}},i)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}},r=new WeakSet,n=function(t){let e=t.streamId,i=this.sourceName,r=t.sourceName,n=this.comObj,s=this,o=this.actionHandler[t.action],l={enqueue(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;let l=this.desiredSize;this.desiredSize-=s,l>0&&this.desiredSize<=0&&(this.sinkCapability=new d.PromiseCapability,this.ready=this.sinkCapability.promise),n.postMessage({sourceName:i,targetName:r,stream:v,streamId:e,chunk:t},o)},close(){this.isCancelled||(this.isCancelled=!0,n.postMessage({sourceName:i,targetName:r,stream:m,streamId:e}),delete s.streamSinks[e])},error(t){(0,d.assert)(t instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,n.postMessage({sourceName:i,targetName:r,stream:b,streamId:e,reason:_(t)}))},sinkCapability:new d.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[e]=l,new Promise(function(e){e(o(t.data,l))}).then(function(){n.postMessage({sourceName:i,targetName:r,stream:S,streamId:e,success:!0})},function(t){n.postMessage({sourceName:i,targetName:r,stream:S,streamId:e,reason:_(t)})})},s=new WeakSet,o=function(t){let e=t.streamId,i=this.sourceName,r=t.sourceName,n=this.comObj,s=this.streamControllers[e],o=this.streamSinks[e];switch(t.stream){case S:t.success?s.startCall.resolve():s.startCall.reject(_(t.reason));break;case A:t.success?s.pullCall.resolve():s.pullCall.reject(_(t.reason));break;case y:if(!o){n.postMessage({sourceName:i,targetName:r,stream:A,streamId:e,success:!0});break}o.desiredSize<=0&&t.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=t.desiredSize,new Promise(function(t){var e;t(null==(e=o.onPull)?void 0:e.call(o))}).then(function(){n.postMessage({sourceName:i,targetName:r,stream:A,streamId:e,success:!0})},function(t){n.postMessage({sourceName:i,targetName:r,stream:A,streamId:e,reason:_(t)})});break;case v:if((0,d.assert)(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(t.chunk);break;case m:if((0,d.assert)(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),nt(this,l,h).call(this,s,e);break;case b:(0,d.assert)(s,"error should have stream controller"),s.controller.error(_(t.reason)),nt(this,l,h).call(this,s,e);break;case g:t.success?s.cancelCall.resolve():s.cancelCall.reject(_(t.reason)),nt(this,l,h).call(this,s,e);break;case f:if(!o)break;new Promise(function(e){var i;e(null==(i=o.onCancel)?void 0:i.call(o,_(t.reason)))}).then(function(){n.postMessage({sourceName:i,targetName:r,stream:g,streamId:e,success:!0})},function(t){n.postMessage({sourceName:i,targetName:r,stream:g,streamId:e,reason:_(t)})}),o.sinkCapability.reject(_(t.reason)),o.isCancelled=!0,delete this.streamSinks[e];break;default:throw Error("Unexpected stream case")}},l=new WeakSet,h=async function(t,e){var i,r,n;await Promise.allSettled([null==(i=t.startCall)?void 0:i.promise,null==(r=t.pullCall)?void 0:r.promise,null==(n=t.cancelCall)?void 0:n.promise]),delete this.streamControllers[e]},e.MessageHandler=c},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var r,n,s,o=i(1);s=class{constructor(t){et(this,r,void 0),et(this,n,void 0);let{parsedData:e,rawData:i}=t;ut(this,r,e),ut(this,n,i)}getRaw(){return T(this,n)}get(t){return T(this,r).get(t)??null}getAll(){return(0,o.objectFromMap)(T(this,r))}has(t){return T(this,r).has(t)}},r=new WeakMap,n=new WeakMap,e.Metadata=s},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var r,n,s,o,l,h,c,d,u=i(1),p=i(144);let f=Symbol("INTERNAL");class g{constructor(t,e){et(this,r,!0),this.name=t,this.intent=e}get visible(){return T(this,r)}_setVisible(t,e){t!==f&&(0,u.unreachable)("Internal method `_setVisible` called."),ut(this,r,e)}}r=new WeakMap,d=class{constructor(t){if(et(this,h),et(this,n,null),et(this,s,new Map),et(this,o,null),et(this,l,null),this.name=null,this.creator=null,null!==t){for(let e of(this.name=t.name,this.creator=t.creator,ut(this,l,t.order),t.groups))T(this,s).set(e.id,new g(e.name,e.intent));if("OFF"===t.baseState)for(let t of T(this,s).values())t._setVisible(f,!1);for(let e of t.on)T(this,s).get(e)._setVisible(f,!0);for(let e of t.off)T(this,s).get(e)._setVisible(f,!1);ut(this,o,this.getHash())}}isVisible(t){if(0===T(this,s).size)return!0;if(!t)return(0,u.warn)("Optional content group not defined."),!0;if("OCG"===t.type)return T(this,s).has(t.id)?T(this,s).get(t.id).visible:((0,u.warn)(`Optional content group not found: ${t.id}`),!0);if("OCMD"===t.type){if(t.expression)return nt(this,h,c).call(this,t.expression);if(!t.policy||"AnyOn"===t.policy){for(let e of t.ids){if(!T(this,s).has(e))return(0,u.warn)(`Optional content group not found: ${e}`),!0;if(T(this,s).get(e).visible)return!0}return!1}if("AllOn"===t.policy){for(let e of t.ids){if(!T(this,s).has(e))return(0,u.warn)(`Optional content group not found: ${e}`),!0;if(!T(this,s).get(e).visible)return!1}return!0}if("AnyOff"===t.policy){for(let e of t.ids){if(!T(this,s).has(e))return(0,u.warn)(`Optional content group not found: ${e}`),!0;if(!T(this,s).get(e).visible)return!0}return!1}if("AllOff"===t.policy){for(let e of t.ids){if(!T(this,s).has(e))return(0,u.warn)(`Optional content group not found: ${e}`),!0;if(T(this,s).get(e).visible)return!1}return!0}return(0,u.warn)(`Unknown optional content policy ${t.policy}.`),!0}return(0,u.warn)(`Unknown group type ${t.type}.`),!0}setVisibility(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];T(this,s).has(t)?(T(this,s).get(t)._setVisible(f,!!e),ut(this,n,null)):(0,u.warn)(`Optional content group not found: ${t}`)}get hasInitialVisibility(){return this.getHash()===T(this,o)}getOrder(){return T(this,s).size?T(this,l)?T(this,l).slice():[...T(this,s).keys()]:null}getGroups(){return T(this,s).size>0?(0,u.objectFromMap)(T(this,s)):null}getGroup(t){return T(this,s).get(t)||null}getHash(){if(null!==T(this,n))return T(this,n);let t=new p.MurmurHash3_64;for(let[e,i]of T(this,s))t.update(`${e}:${i.visible}`);return ut(this,n,t.hexdigest())}},n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,h=new WeakSet,c=function(t){let e=t.length;if(e<2)return!0;let i=t[0];for(let r=1;r<e;r++){let e,n=t[r];if(Array.isArray(n))e=nt(this,h,c).call(this,n);else{if(!T(this,s).has(n))return(0,u.warn)(`Optional content group not found: ${n}`),!0;e=T(this,s).get(n).visible}switch(i){case"And":if(!e)return!1;break;case"Or":if(e)return!0;break;case"Not":return!e;default:return!0}}return"And"===i},e.OptionalContentConfig=d},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var r=i(1),n=i(142);e.PDFDataTransportStream=class{constructor(t,e){let{length:i,initialData:n,progressiveDone:s=!1,contentDispositionFilename:o=null,disableRange:l=!1,disableStream:h=!1}=t;if((0,r.assert)(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=s,this._contentDispositionFilename=o,(null==n?void 0:n.length)>0){let t=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;this._queuedChunks.push(t)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!h,this._isRangeSupported=!l,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((t,e)=>{this._onReceiveData({begin:t,chunk:e})}),this._pdfDataRangeTransport.addProgressListener((t,e)=>{this._onProgress({loaded:t,total:e})}),this._pdfDataRangeTransport.addProgressiveReadListener(t=>{this._onReceiveData({chunk:t})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(t){let{begin:e,chunk:i}=t,n=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(void 0===e)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{let t=this._rangeReaders.some(function(t){return t._begin===e&&(t._enqueue(n),!0)});(0,r.assert)(t,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return(null==(t=this._fullRequestReader)?void 0:t._loaded)??0}_onProgress(t){var e,i,r,n;void 0===t.total?null==(e=this._rangeReaders[0])||null==(i=e.onProgress)||i.call(e,{loaded:t.loaded}):null==(r=this._fullRequestReader)||null==(n=r.onProgress)||n.call(r,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;null==(t=this._fullRequestReader)||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){let e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){(0,r.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");let t=this._queuedChunks;return this._queuedChunks=null,new s(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let i=new o(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(i),i}cancelAllRequests(t){var e;for(let i of(null==(e=this._fullRequestReader)||e.cancel(t),this._rangeReaders.slice(0)))i.cancel(t);this._pdfDataRangeTransport.abort()}};class s{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;for(let s of(this._stream=t,this._done=i||!1,this._filename=(0,n.isPdfFile)(r)?r:null,this._queuedChunks=e||[],this._loaded=0,this._queuedChunks))this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let t=new r.PromiseCapability;return this._requests.push(t),t.promise}cancel(t){for(let t of(this._done=!0,this._requests))t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class o{constructor(t,e,i){this._stream=t,this._begin=e,this._end=i,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(0===this._requests.length)this._queuedChunk=t;else{for(let e of(this._requests.shift().resolve({value:t,done:!1}),this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let t=new r.PromiseCapability;return this._requests.push(t),t.promise}cancel(t){for(let t of(this._done=!0,this._requests))t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class i{static textContent(t){let e=[],r={items:e,styles:Object.create(null)};return function t(r){var n;if(!r)return;let s=null,o=r.name;if("#text"===o)s=r.value;else{if(!i.shouldBuildText(o))return;null!=r&&null!=(n=r.attributes)&&n.textContent?s=r.attributes.textContent:r.value&&(s=r.value)}if(null!==s&&e.push({str:s}),r.children)for(let e of r.children)t(e)}(t),r}static shouldBuildText(t){return"textarea"!==t&&"input"!==t&&"option"!==t&&"select"!==t}}e.XfaText=i},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var r=i(143);let n=function(t){return new Promise((e,i)=>{require$$6.readFile(t,(t,r)=>{!t&&r?e(new Uint8Array(r)):i(Error(t))})})};class s extends r.BaseFilterFactory{}e.NodeFilterFactory=s;class o extends r.BaseCanvasFactory{_createCanvas(t,e){return require$$6.createCanvas(t,e)}}e.NodeCanvasFactory=o;class l extends r.BaseCMapReaderFactory{_fetchData(t,e){return n(t).then(t=>({cMapData:t,compressionType:e}))}}e.NodeCMapReaderFactory=l;class h extends r.BaseStandardFontDataFactory{_fetchData(t){return n(t)}}e.NodeStandardFontDataFactory=h},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var r=i(1),n=i(157);let s=require$$6,o=require$$6,l=require$$6,h=require$$6,c=/^file:\/\/\/[a-zA-Z]:\//;e.PDFNodeStream=class{constructor(t){this.source=t,this.url=function(t){let e=h.parse(t);return"file:"===e.protocol||e.host?e:/^[a-z]:[/\\]/i.test(t)?h.parse(`file:///${t}`):(e.host||(e.protocol="file:"),e)}(t.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return(null==(t=this._fullRequestReader)?void 0:t._loaded)??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new m(this):new f(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let i=this.isFsUrl?new v(this,t,e):new g(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;for(let i of(null==(e=this._fullRequestReader)||e.cancel(t),this._rangeRequestReaders.slice(0)))i.cancel(t)}};class d{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;let e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=new r.PromiseCapability,this._headersCapability=new r.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return null===e?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=e.length,null==(t=this.onProgress)||t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new r.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class u{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new r.PromiseCapability;let e=t.source;this._isStreamingSupported=!e.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;let e=this._readableStream.read();return null===e?(this._readCapability=new r.PromiseCapability,this.read()):(this._loaded+=e.length,null==(t=this.onProgress)||t.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(t){this._readableStream?this._readableStream.destroy(t):this._error(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function p(t,e){return{protocol:t.protocol,auth:t.auth,host:t.hostname,port:t.port,path:t.path,method:"GET",headers:e}}class f extends d{constructor(t){super(t);let e=e=>{if(404===e.statusCode){let t=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=t,this._headersCapability.reject(t);return}this._headersCapability.resolve(),this._setReadableStream(e);let i=t=>this._readableStream.headers[t.toLowerCase()],{allowRangeRequests:s,suggestedLength:o}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=o||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(i)};this._request=null,"http:"===this._url.protocol?this._request=o.request(p(this._url,t.httpHeaders),e):this._request=l.request(p(this._url,t.httpHeaders),e),this._request.on("error",t=>{this._storedError=t,this._headersCapability.reject(t)}),this._request.end()}}class g extends u{constructor(t,e,i){for(let e in super(t),this._httpHeaders={},t.httpHeaders){let i=t.httpHeaders[e];void 0!==i&&(this._httpHeaders[e]=i)}this._httpHeaders.Range=`bytes=${e}-${i-1}`;let n=t=>{if(404!==t.statusCode)this._setReadableStream(t);else{let t=new r.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=t}};this._request=null,"http:"===this._url.protocol?this._request=o.request(p(this._url,this._httpHeaders),n):this._request=l.request(p(this._url,this._httpHeaders),n),this._request.on("error",t=>{this._storedError=t}),this._request.end()}}class m extends d{constructor(t){super(t);let e=decodeURIComponent(this._url.path);c.test(this._url.href)&&(e=e.replace(/^\//,"")),s.lstat(e,(t,i)=>{t?("ENOENT"===t.code&&(t=new r.MissingPDFException(`Missing PDF "${e}".`)),this._storedError=t,this._headersCapability.reject(t)):(this._contentLength=i.size,this._setReadableStream(s.createReadStream(e)),this._headersCapability.resolve())})}}class v extends u{constructor(t,e,i){super(t);let r=decodeURIComponent(this._url.path);c.test(this._url.href)&&(r=r.replace(/^\//,"")),this._setReadableStream(s.createReadStream(r,{start:e,end:i-1}))}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=function(t,e){return 404===t||0===t&&e.startsWith("file:")?new r.MissingPDFException('Missing PDF "'+e+'".'):new r.UnexpectedResponseException(`Unexpected server response (${t}) while retrieving PDF "${e}".`,t)},e.extractFilenameFromHeader=function(t){let e=t("Content-Disposition");if(e){let t=(0,n.getFilenameFromContentDispositionHeader)(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if((0,s.isPdfFile)(t))return t}return null},e.validateRangeRequestCapabilities=function(t){let{getResponseHeader:e,isHttp:i,rangeChunkSize:r,disableRange:n}=t,s={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(e("Content-Length"),10);return!Number.isInteger(o)||(s.suggestedLength=o,o<=2*r)||n||!i||"bytes"!==e("Accept-Ranges")||"identity"!==(e("Content-Encoding")||"identity")||(s.allowRangeRequests=!0),s},e.validateResponseStatus=function(t){return 200===t||206===t};var r=i(1),n=i(158),s=i(142)},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=function(t){let e=!0,i=n("filename\\*","i").exec(t);if(i){let t=l(i=i[1]);return o(t=c(t=h(t=unescape(t))))}if(i=function(t){let e,i=[],r=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(e=r.exec(t));){let[,t,r,n]=e;if((t=parseInt(t,10))in i){if(0===t)break}else i[t]=[r,n]}let s=[];for(let t=0;t<i.length&&t in i;++t){let[e,r]=i[t];r=l(r),e&&(r=unescape(r),0===t&&(r=h(r))),s.push(r)}return s.join("")}(t))return o(c(i));if(i=n("filename","i").exec(t)){let t=l(i=i[1]);return o(t=c(t))}function n(t,e){return RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',e)}function s(t,i){if(t){if(!/^[\x00-\xFF]+$/.test(i))return i;try{let n=new TextDecoder(t,{fatal:!0}),s=(0,r.stringToBytes)(i);i=n.decode(s),e=!1}catch{}}return i}function o(t){return e&&/[\x80-\xff]/.test(t)&&(t=s("utf-8",t),e&&(t=s("iso-8859-1",t))),t}function l(t){if(t.startsWith('"')){let e=t.slice(1).split('\\"');for(let t=0;t<e.length;++t){let i=e[t].indexOf('"');-1!==i&&(e[t]=e[t].slice(0,i),e.length=t+1),e[t]=e[t].replaceAll(/\\(.)/g,"$1")}t=e.join('"')}return t}function h(t){let e=t.indexOf("'");return -1===e?t:s(t.slice(0,e),t.slice(e+1).replace(/^[^']*'/,""))}function c(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(t,e,i,r){if("q"===i||"Q"===i)return s(e,r=(r=r.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}));try{r=atob(r)}catch{}return s(e,r)})}return""};var r=i(1)},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var r=i(1),n=i(157);class s{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=t,this.isHttp=/^https?:/i.test(t),this.httpHeaders=this.isHttp&&e.httpHeaders||Object.create(null),this.withCredentials=e.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(t,e,i){let r={begin:t,end:e};for(let t in i)r[t]=i[t];return this.request(r)}requestFull(t){return this.request(t)}request(t){let e=new XMLHttpRequest,i=this.currXhrId++,r=this.pendingRequests[i]={xhr:e};for(let t in e.open("GET",this.url),e.withCredentials=this.withCredentials,this.httpHeaders){let i=this.httpHeaders[t];void 0!==i&&e.setRequestHeader(t,i)}return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=206):r.expectedStatus=200,e.responseType="arraybuffer",t.onError&&(e.onerror=function(i){t.onError(e.status)}),e.onreadystatechange=this.onStateChange.bind(this,i),e.onprogress=this.onProgress.bind(this,i),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,e.send(null),i}onProgress(t,e){var i;let r=this.pendingRequests[t];r&&(null==(i=r.onProgress)||i.call(r,e))}onStateChange(t,e){var i,n,s;let o=this.pendingRequests[t];if(!o)return;let l=o.xhr;if(l.readyState>=2&&o.onHeadersReceived&&(o.onHeadersReceived(),delete o.onHeadersReceived),4!==l.readyState||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],0===l.status&&this.isHttp){null==(i=o.onError)||i.call(o,l.status);return}let h=l.status||200;if((200!==h||206!==o.expectedStatus)&&h!==o.expectedStatus){null==(n=o.onError)||n.call(o,l.status);return}let c=function(t){let e=t.response;return"string"!=typeof e?e:(0,r.stringToBytes)(e).buffer}(l);if(206===h){let t=l.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(t);o.onDone({begin:parseInt(e[1],10),chunk:c})}else c?o.onDone({begin:0,chunk:c}):null==(s=o.onError)||s.call(o,l.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){let e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}e.PDFNetworkStream=class{constructor(t){this._source=t,this._manager=new s(t.url,{httpHeaders:t.httpHeaders,withCredentials:t.withCredentials}),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){let e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new o(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){let i=new l(this._manager,t,e);return i.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;for(let i of(null==(e=this._fullRequestReader)||e.cancel(t),this._rangeRequestReaders.slice(0)))i.cancel(t)}};class o{constructor(t,e){this._manager=t;let i={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._fullRequestId=t.requestFull(i),this._headersReceivedCapability=new r.PromiseCapability,this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){let t=this._fullRequestId,e=this._manager.getRequestXhr(t),i=t=>e.getResponseHeader(t),{allowRangeRequests:r,suggestedLength:s}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersReceivedCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(let t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){for(let e of(this._storedError=(0,n.createResponseStatusError)(t,this._url),this._headersReceivedCapability.reject(this._storedError),this._requests))e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;null==(e=this.onProgress)||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};let t=new r.PromiseCapability;return this._requests.push(t),t.promise}cancel(t){for(let e of(this._done=!0,this._headersReceivedCapability.reject(t),this._requests))e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class l{constructor(t,e,i){this._manager=t;let r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._requestId=t.requestRange(e,i,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var t;null==(t=this.onClosed)||t.call(this,this)}_onDone(t){let e=t.chunk;for(let t of(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0,this._requests))t.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){for(let e of(this._storedError=(0,n.createResponseStatusError)(t,this._url),this._requests))e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){if(!this.isStreamingSupported){var e;null==(e=this.onProgress)||e.call(this,{loaded:t.loaded})}}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){let t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};let t=new r.PromiseCapability;return this._requests.push(t),t.promise}cancel(t){for(let t of(this._done=!0,this._requests))t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var r=i(1),n=i(157);function s(t,e,i){return{method:"GET",headers:t,signal:i.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function o(t){let e=new Headers;for(let i in t){let r=t[i];void 0!==r&&e.append(i,r)}return e}function l(t){return t instanceof Uint8Array?t.buffer:t instanceof ArrayBuffer?t:((0,r.warn)(`getArrayBuffer - unexpected data format: ${t}`),new Uint8Array(t).buffer)}e.PDFFetchStream=class{constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.httpHeaders=this.isHttp&&t.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return(null==(t=this._fullRequestReader)?void 0:t._loaded)??0}getFullReader(){return(0,r.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new h(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;let i=new c(this,t,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(t){var e;for(let i of(null==(e=this._fullRequestReader)||e.cancel(t),this._rangeRequestReaders.slice(0)))i.cancel(t)}};class h{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;let e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=new r.PromiseCapability,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._headers=o(this._stream.httpHeaders);let i=e.url;fetch(i,s(this._headers,this._withCredentials,this._abortController)).then(t=>{if(!(0,n.validateResponseStatus)(t.status))throw(0,n.createResponseStatusError)(t.status,i);this._reader=t.body.getReader(),this._headersCapability.resolve();let e=e=>t.headers.get(e),{allowRangeRequests:s,suggestedLength:o}=(0,n.validateRangeRequestCapabilities)({getResponseHeader:e,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=s,this._contentLength=o||this._contentLength,this._filename=(0,n.extractFilenameFromHeader)(e),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new r.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._headersCapability.promise;let{value:e,done:i}=await this._reader.read();return i?{value:e,done:i}:(this._loaded+=e.byteLength,null==(t=this.onProgress)||t.call(this,{loaded:this._loaded,total:this._contentLength}),{value:l(e),done:!1})}cancel(t){var e;null==(e=this._reader)||e.cancel(t),this._abortController.abort()}}class c{constructor(t,e,i){this._stream=t,this._reader=null,this._loaded=0;let l=t.source;this._withCredentials=l.withCredentials||!1,this._readCapability=new r.PromiseCapability,this._isStreamingSupported=!l.disableStream,this._abortController=new AbortController,this._headers=o(this._stream.httpHeaders),this._headers.append("Range",`bytes=${e}-${i-1}`);let h=l.url;fetch(h,s(this._headers,this._withCredentials,this._abortController)).then(t=>{if(!(0,n.validateResponseStatus)(t.status))throw(0,n.createResponseStatusError)(t.status,h);this._readCapability.resolve(),this._reader=t.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var t;await this._readCapability.promise;let{value:e,done:i}=await this._reader.read();return i?{value:e,done:i}:(this._loaded+=e.byteLength,null==(t=this.onProgress)||t.call(this,{loaded:this._loaded}),{value:l(e),done:!1})}cancel(t){var e;null==(e=this._reader)||e.cancel(t),this._abortController.abort()}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=function(t){!t.textContentSource&&(t.textContent||t.textContentStream)&&((0,n.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),t.textContentSource=t.textContent||t.textContentStream);let{container:e,viewport:i}=t,r=getComputedStyle(e),s=r.getPropertyValue("visibility"),o=parseFloat(r.getPropertyValue("--scale-factor"));"visible"===s&&o&&i.scale;let l=new u(t);return l._render(),l},e.updateTextLayer=function(t){let{container:e,viewport:i,textDivs:r,textDivProperties:s,isOffscreenCanvasSupported:o,mustRotate:l=!0,mustRescale:c=!0}=t;if(l&&(0,n.setLayerDimensions)(e,{rotation:i.rotation}),c){let t=h(0,o),e={prevFontSize:null,prevFontFamily:null,div:null,scale:i.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:t};for(let t of r)e.properties=s.get(t),e.div=t,d(e)}};var r=i(1),n=i(142);let s=30,o=.8,l=new Map;function h(t,e){let i;if(e&&r.FeatureTest.isOffscreenCanvasSupported)i=new OffscreenCanvas(t,t).getContext("2d",{alpha:!1});else{let e=document.createElement("canvas");e.width=e.height=t,i=e.getContext("2d",{alpha:!1})}return i}function c(t,e,i){let n,c,d=document.createElement("span"),u={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};t._textDivs.push(d);let p=r.Util.transform(t._transform,e.transform),f=Math.atan2(p[1],p[0]),g=i[e.fontName];g.vertical&&(f+=Math.PI/2);let m=Math.hypot(p[2],p[3]),v=m*function(t,e){let i=l.get(t);if(i)return i;let r=h(s,e);r.font=`${s}px ${t}`;let n=r.measureText(""),c=n.fontBoundingBoxAscent,d=Math.abs(n.fontBoundingBoxDescent);if(c){let e=c/(c+d);return l.set(t,e),r.canvas.width=r.canvas.height=0,e}r.strokeStyle="red",r.clearRect(0,0,s,s),r.strokeText("g",0,0);let u=r.getImageData(0,0,s,s).data;d=0;for(let t=u.length-1-3;t>=0;t-=4)if(u[t]>0){d=Math.ceil(t/4/s);break}r.clearRect(0,0,s,s),r.strokeText("A",0,s),u=r.getImageData(0,0,s,s).data,c=0;for(let t=0,e=u.length;t<e;t+=4)if(u[t]>0){c=s-Math.floor(t/4/s);break}if(r.canvas.width=r.canvas.height=0,c){let e=c/(c+d);return l.set(t,e),e}return l.set(t,o),o}(g.fontFamily,t._isOffscreenCanvasSupported);0===f?(n=p[4],c=p[5]-v):(n=p[4]+v*Math.sin(f),c=p[5]-v*Math.cos(f));let b="calc(var(--scale-factor)*",y=d.style;t._container===t._rootContainer?(y.left=`${(100*n/t._pageWidth).toFixed(2)}%`,y.top=`${(100*c/t._pageHeight).toFixed(2)}%`):(y.left=`${b}${n.toFixed(2)}px)`,y.top=`${b}${c.toFixed(2)}px)`),y.fontSize=`${b}${m.toFixed(2)}px)`,y.fontFamily=g.fontFamily,u.fontSize=m,d.setAttribute("role","presentation"),d.textContent=e.str,d.dir=e.dir,t._fontInspectorEnabled&&(d.dataset.fontName=e.fontName),0!==f&&(u.angle=180/Math.PI*f);let A=!1;if(e.str.length>1)A=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){let t=Math.abs(e.transform[0]),i=Math.abs(e.transform[3]);t!==i&&Math.max(t,i)/Math.min(t,i)>1.5&&(A=!0)}A&&(u.canvasWidth=g.vertical?e.height:e.width),t._textDivProperties.set(d,u),t._isReadableStream&&t._layoutText(d)}function d(t){let{div:e,scale:i,properties:r,ctx:n,prevFontSize:s,prevFontFamily:o}=t,{style:l}=e,h="";if(0!==r.canvasWidth&&r.hasText){let{fontFamily:c}=l,{canvasWidth:d,fontSize:u}=r;(s!==u||o!==c)&&(n.font=`${u*i}px ${c}`,t.prevFontSize=u,t.prevFontFamily=c);let{width:p}=n.measureText(e.textContent);p>0&&(h=`scaleX(${d*i/p})`)}0!==r.angle&&(h=`rotate(${r.angle}deg) ${h}`),h.length>0&&(l.transform=h)}class u{constructor(t){var e;let{textContentSource:i,container:s,viewport:o,textDivs:l,textDivProperties:c,textContentItemsStr:d,isOffscreenCanvasSupported:u}=t;this._textContentSource=i,this._isReadableStream=i instanceof ReadableStream,this._container=this._rootContainer=s,this._textDivs=l||[],this._textContentItemsStr=d||[],this._isOffscreenCanvasSupported=u,this._fontInspectorEnabled=!(null==(e=globalThis.FontInspector)||!e.enabled),this._reader=null,this._textDivProperties=c||new WeakMap,this._canceled=!1,this._capability=new r.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:o.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:h(0,u)};let{pageWidth:p,pageHeight:f,pageX:g,pageY:m}=o.rawDims;this._transform=[1,0,0,-1,-g,m+f],this._pageWidth=p,this._pageHeight=f,(0,n.setLayerDimensions)(s,o),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new r.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new r.AbortException("TextLayer task cancelled."))}_processItems(t,e){for(let i of t)if(void 0!==i.str)this._textContentItemsStr.push(i.str),c(this,i,e);else if("beginMarkedContentProps"===i.type||"beginMarkedContent"===i.type){let t=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==i.id&&this._container.setAttribute("id",`${i.id}`),t.append(this._container)}else"endMarkedContent"===i.type&&(this._container=this._container.parentNode)}_layoutText(t){let e=this._layoutTextParams.properties=this._textDivProperties.get(t);if(this._layoutTextParams.div=t,d(this._layoutTextParams),e.hasText&&this._container.append(t),e.hasEOL){let t=document.createElement("br");t.setAttribute("role","presentation"),this._container.append(t)}}_render(){let t=new r.PromiseCapability,e=Object.create(null);if(this._isReadableStream){let i=()=>{this._reader.read().then(r=>{let{value:n,done:s}=r;s?t.resolve():(Object.assign(e,n.styles),this._processItems(n.items,e),i())},t.reject)};this._reader=this._textContentSource.getReader(),i()}else{if(!this._textContentSource)throw Error('No "textContentSource" parameter specified.');{let{items:e,styles:i}=this._textContentSource;this._processItems(e,i),t.resolve()}}t.promise.then(()=>{e=null,function(t){if(t._canceled)return;let e=t._textDivs,i=t._capability;if(e.length>1e5)i.resolve();else{if(!t._isReadableStream)for(let i of e)t._layoutText(i);i.resolve()}}(this)},this._capability.reject)}}e.TextLayerRenderTask=u},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var r,n,s,o,l,h,c,d,u,p,f,g,m,v,b,y,A=i(1),S=i(141),_=i(163),x=i(164),w=i(142);let C=class{constructor(t){et(this,u),et(this,f),et(this,m),et(this,b),et(this,r,void 0),et(this,n,!1),et(this,s,this.pointerup.bind(this)),et(this,o,this.pointerdown.bind(this)),et(this,l,new Map),et(this,h,!1),et(this,c,!1),et(this,d,void 0),C._initialized||(C._initialized=!0,_.FreeTextEditor.initialize(t.l10n),x.InkEditor.initialize(t.l10n)),t.uiManager.registerEditorTypes([_.FreeTextEditor,x.InkEditor]),ut(this,d,t.uiManager),this.pageIndex=t.pageIndex,this.div=t.div,ut(this,r,t.accessibilityManager),T(this,d).addLayer(this)}get isEmpty(){return 0===T(this,l).size}updateToolbar(t){T(this,d).updateToolbar(t)}updateMode(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T(this,d).getMode();nt(this,b,y).call(this),t===A.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),T(this,d).unselectAll(),t!==A.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",t===A.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",t===A.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(t){if(!(!t&&T(this,d).getMode()!==A.AnnotationEditorType.INK)){if(!t){for(let t of T(this,l).values())if(t.isEmpty())return void t.setInBackground()}nt(this,m,v).call(this,{offsetX:0,offsetY:0}).setInBackground()}}setEditingState(t){T(this,d).setEditingState(t)}addCommands(t){T(this,d).addCommands(t)}enable(){for(let t of(this.div.style.pointerEvents="auto",T(this,l).values()))t.enableEditing()}disable(){for(let t of(this.div.style.pointerEvents="none",T(this,l).values()))t.disableEditing();nt(this,b,y).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(t){T(this,d).getActive()!==t&&T(this,d).setActiveEditor(t)}enableClick(){this.div.addEventListener("pointerdown",T(this,o)),this.div.addEventListener("pointerup",T(this,s))}disableClick(){this.div.removeEventListener("pointerdown",T(this,o)),this.div.removeEventListener("pointerup",T(this,s))}attach(t){T(this,l).set(t.id,t)}detach(t){var e;T(this,l).delete(t.id),null==(e=T(this,r))||e.removePointerInTextLayer(t.contentDiv)}remove(t){T(this,d).removeEditor(t),this.detach(t),t.div.style.display="none",setTimeout(()=>{t.div.style.display="",t.div.remove(),t.isAttachedToDOM=!1,document.activeElement===document.body&&T(this,d).focusMainContainer()},0),T(this,c)||this.addInkEditorIfNeeded(!1)}add(t){if(nt(this,u,p).call(this,t),T(this,d).addEditor(t),this.attach(t),!t.isAttachedToDOM){let e=t.render();this.div.append(e),t.isAttachedToDOM=!0}this.moveEditorInDOM(t),t.onceAdded(),T(this,d).addToAnnotationStorage(t)}moveEditorInDOM(t){var e;null==(e=T(this,r))||e.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?t.rebuild():this.add(t)}addANewEditor(t){this.addCommands({cmd:()=>{this.addOrRebuild(t)},undo:()=>{t.remove()},mustExec:!0})}addUndoableEditor(t){this.addCommands({cmd:()=>{this.addOrRebuild(t)},undo:()=>{t.remove()},mustExec:!1})}getNextId(){return T(this,d).getId()}deserialize(t){switch(t.annotationType){case A.AnnotationEditorType.FREETEXT:return _.FreeTextEditor.deserialize(t,this,T(this,d));case A.AnnotationEditorType.INK:return x.InkEditor.deserialize(t,this,T(this,d))}return null}setSelected(t){T(this,d).setSelected(t)}toggleSelected(t){T(this,d).toggleSelected(t)}isSelected(t){return T(this,d).isSelected(t)}unselect(t){T(this,d).unselect(t)}pointerup(t){let{isMac:e}=A.FeatureTest.platform;!(0!==t.button||t.ctrlKey&&e)&&t.target===this.div&&T(this,h)&&(ut(this,h,!1),T(this,n)?nt(this,m,v).call(this,t):ut(this,n,!0))}pointerdown(t){let{isMac:e}=A.FeatureTest.platform;if(0!==t.button||t.ctrlKey&&e||t.target!==this.div)return;ut(this,h,!0);let i=T(this,d).getActive();ut(this,n,!i||i.isEmpty())}drop(t){let e=t.dataTransfer.getData("text/plain"),i=T(this,d).getEditor(e);if(!i)return;t.preventDefault(),t.dataTransfer.dropEffect="move",nt(this,u,p).call(this,i);let r=this.div.getBoundingClientRect(),n=t.clientX-r.x,s=t.clientY-r.y;i.translate(n-i.startX,s-i.startY),this.moveEditorInDOM(i),i.div.focus()}dragover(t){t.preventDefault()}destroy(){var t,e;for(let i of((null==(t=T(this,d).getActive())?void 0:t.parent)===this&&T(this,d).setActiveEditor(null),T(this,l).values()))null==(e=T(this,r))||e.removePointerInTextLayer(i.contentDiv),i.setParent(null),i.isAttachedToDOM=!1,i.div.remove();this.div=null,T(this,l).clear(),T(this,d).removeLayer(this)}render(t){let{viewport:e}=t;for(let t of(this.viewport=e,(0,w.setLayerDimensions)(this.div,e),(0,S.bindEvents)(this,this.div,["dragover","drop"]),T(this,d).getEditors(this.pageIndex)))this.add(t);this.updateMode()}update(t){let{viewport:e}=t;T(this,d).commitOrRemove(),this.viewport=e,(0,w.setLayerDimensions)(this.div,{rotation:e.rotation}),this.updateMode()}get pageDimensions(){let{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}},k=C;r=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,h=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakSet,p=function(t){var e;t.parent!==this&&(this.attach(t),null==(e=t.parent)||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))},f=new WeakSet,g=function(t){switch(T(this,d).getMode()){case A.AnnotationEditorType.FREETEXT:return new _.FreeTextEditor(t);case A.AnnotationEditorType.INK:return new x.InkEditor(t)}return null},m=new WeakSet,v=function(t){let e=this.getNextId(),i=nt(this,f,g).call(this,{parent:this,id:e,x:t.offsetX,y:t.offsetY,uiManager:T(this,d)});return i&&this.add(i),i},b=new WeakSet,y=function(){for(let t of(ut(this,c,!0),T(this,l).values()))t.isEmpty()&&t.remove();ut(this,c,!1)},It(k,"_initialized",!1),e.AnnotationEditorLayer=k},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var r,n,s,o,l,h,c,d,u,p,f,g,m,v,b,y,A,S=i(1),_=i(141),x=i(140);let w=class extends x.AnnotationEditor{constructor(t){super({...t,name:"freeTextEditor"}),et(this,p),et(this,g),et(this,v),et(this,y),et(this,r,this.editorDivBlur.bind(this)),et(this,n,this.editorDivFocus.bind(this)),et(this,s,this.editorDivInput.bind(this)),et(this,o,this.editorDivKeydown.bind(this)),et(this,l,void 0),et(this,h,""),et(this,c,`${this.id}-editor`),et(this,d,!1),et(this,u,void 0),ut(this,l,t.color||w._defaultColor||x.AnnotationEditor._defaultLineColor),ut(this,u,t.fontSize||w._defaultFontSize)}static initialize(t){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(e=>[e,t.get(e)]));let e=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(e.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,e){switch(t){case S.AnnotationEditorParamsType.FREETEXT_SIZE:w._defaultFontSize=e;break;case S.AnnotationEditorParamsType.FREETEXT_COLOR:w._defaultColor=e}}updateParams(t,e){switch(t){case S.AnnotationEditorParamsType.FREETEXT_SIZE:nt(this,p,f).call(this,e);break;case S.AnnotationEditorParamsType.FREETEXT_COLOR:nt(this,g,m).call(this,e)}}static get defaultPropertiesToUpdate(){return[[S.AnnotationEditorParamsType.FREETEXT_SIZE,w._defaultFontSize],[S.AnnotationEditorParamsType.FREETEXT_COLOR,w._defaultColor||x.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[S.AnnotationEditorParamsType.FREETEXT_SIZE,T(this,u)],[S.AnnotationEditorParamsType.FREETEXT_COLOR,T(this,l)]]}getInitialTranslation(){let t=this.parentScale;return[-w._internalPadding*t,-(w._internalPadding+T(this,u))*t]}rebuild(){super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(S.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",T(this,o)),this.editorDiv.addEventListener("focus",T(this,n)),this.editorDiv.addEventListener("blur",T(this,r)),this.editorDiv.addEventListener("input",T(this,s)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",T(this,c)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",T(this,o)),this.editorDiv.removeEventListener("focus",T(this,n)),this.editorDiv.removeEventListener("blur",T(this,r)),this.editorDiv.removeEventListener("input",T(this,s)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(t){super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),T(this,d)||(ut(this,d,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),ut(this,h,nt(this,v,b).call(this).trimEnd()),nt(this,y,A).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(t){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&"Enter"===t.key&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(t){w._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){let t,e;if(this.div)return this.div;this.width&&(t=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",T(this,c)),this.enableEditing(),w._l10nPromise.get("editor_free_text2_aria_label").then(t=>{var e;return null==(e=this.editorDiv)?void 0:e.setAttribute("aria-label",t)}),w._l10nPromise.get("free_text2_default_content").then(t=>{var e;return null==(e=this.editorDiv)?void 0:e.setAttribute("default-content",t)}),this.editorDiv.contentEditable=!0;let{style:i}=this.editorDiv;if(i.fontSize=`calc(${T(this,u)}px * var(--scale-factor))`,i.color=T(this,l),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,_.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){let[i,r]=this.parentDimensions;for(let n of(this.setAt(t*i,e*r,this.width*i,this.height*r),T(this,h).split(`
`))){let t=document.createElement("div");t.append(n?document.createTextNode(n):document.createElement("br")),this.editorDiv.append(t)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(t,e,i){let r=super.deserialize(t,e,i);return ut(r,u,t.fontSize),ut(r,l,S.Util.makeHexColor(...t.color)),ut(r,h,t.value),r}serialize(){if(this.isEmpty())return null;let t=w._internalPadding*this.parentScale,e=this.getRect(t,t),i=x.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:T(this,l));return{annotationType:S.AnnotationEditorType.FREETEXT,color:i,fontSize:T(this,u),value:T(this,h),pageIndex:this.pageIndex,rect:e,rotation:this.rotation}}},C=w;r=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,h=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,p=new WeakSet,f=function(t){let e=t=>{this.editorDiv.style.fontSize=`calc(${t}px * var(--scale-factor))`,this.translate(0,-(t-T(this,u))*this.parentScale),ut(this,u,t),nt(this,y,A).call(this)},i=T(this,u);this.addCommands({cmd:()=>{e(t)},undo:()=>{e(i)},mustExec:!0,type:S.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},g=new WeakSet,m=function(t){let e=T(this,l);this.addCommands({cmd:()=>{ut(this,l,this.editorDiv.style.color=t)},undo:()=>{ut(this,l,this.editorDiv.style.color=e)},mustExec:!0,type:S.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},v=new WeakSet,b=function(){let t=this.editorDiv.getElementsByTagName("div");if(0===t.length)return this.editorDiv.innerText;let e=[];for(let i of t)e.push(i.innerText.replace(/\r\n?|\n/,""));return e.join(`
`)},y=new WeakSet,A=function(){let t,[e,i]=this.parentDimensions;if(this.isAttachedToDOM)t=this.div.getBoundingClientRect();else{let{currentLayer:e,div:i}=this,r=i.style.display;i.style.display="hidden",e.div.append(this.div),t=i.getBoundingClientRect(),i.remove(),i.style.display=r}this.width=t.width/e,this.height=t.height/i},It(C,"_freeTextDefaultContent",""),It(C,"_l10nPromise"),It(C,"_internalPadding",0),It(C,"_defaultColor",null),It(C,"_defaultFontSize",10),It(C,"_keyboardManager",new _.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],w.prototype.commitOrRemove]])),It(C,"_type","freetext"),e.FreeTextEditor=C},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var r,n,s,o,l,h,c,d,u,p,f,g,m,v,b,y,A,S,_,x,w,C,k,E,M,P,R,F,O,I,D,L,N,j,W,B,U,G,H,q,z,V,X,$,Y,K,J,Q,Z,tt,te,ti,tr,tn,ta,ts,to,tl,th,tc,td,tu,tp,tf,tg,tm,tv,tb,ty,tA,tS=i(1),t_=i(140),tx=i(141);let tw=16,tC=class extends t_.AnnotationEditor{constructor(t){super({...t,name:"inkEditor"}),et(this,A),et(this,_),et(this,w),et(this,k),et(this,M),et(this,R),et(this,O),et(this,D),et(this,N),et(this,W),et(this,U),et(this,H),et(this,z),et(this,X),et(this,Y),et(this,J),et(this,Z),et(this,te),et(this,tr),et(this,to),et(this,th),et(this,td),et(this,tp),et(this,tg),et(this,tv),et(this,ty),et(this,r,0),et(this,n,0),et(this,s,0),et(this,o,this.canvasContextMenu.bind(this)),et(this,l,this.canvasPointermove.bind(this)),et(this,h,this.canvasPointerleave.bind(this)),et(this,c,this.canvasPointerup.bind(this)),et(this,d,this.canvasPointerdown.bind(this)),et(this,u,new Path2D),et(this,p,!1),et(this,f,!1),et(this,g,!1),et(this,m,null),et(this,v,0),et(this,b,0),et(this,y,null),this.color=t.color||null,this.thickness=t.thickness||null,this.opacity=t.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(t){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(e=>[e,t.get(e)]))}static updateDefaultParams(t,e){switch(t){case tS.AnnotationEditorParamsType.INK_THICKNESS:tC._defaultThickness=e;break;case tS.AnnotationEditorParamsType.INK_COLOR:tC._defaultColor=e;break;case tS.AnnotationEditorParamsType.INK_OPACITY:tC._defaultOpacity=e/100}}updateParams(t,e){switch(t){case tS.AnnotationEditorParamsType.INK_THICKNESS:nt(this,A,S).call(this,e);break;case tS.AnnotationEditorParamsType.INK_COLOR:nt(this,_,x).call(this,e);break;case tS.AnnotationEditorParamsType.INK_OPACITY:nt(this,w,C).call(this,e)}}static get defaultPropertiesToUpdate(){return[[tS.AnnotationEditorParamsType.INK_THICKNESS,tC._defaultThickness],[tS.AnnotationEditorParamsType.INK_COLOR,tC._defaultColor||t_.AnnotationEditor._defaultLineColor],[tS.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*tC._defaultOpacity)]]}get propertiesToUpdate(){return[[tS.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||tC._defaultThickness],[tS.AnnotationEditorParamsType.INK_COLOR,this.color||tC._defaultColor||t_.AnnotationEditor._defaultLineColor],[tS.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??tC._defaultOpacity))]]}rebuild(){super.rebuild(),null!==this.div&&(this.canvas||(nt(this,Y,K).call(this),nt(this,J,Q).call(this)),this.isAttachedToDOM||(this.parent.add(this),nt(this,Z,tt).call(this)),nt(this,tv,tb).call(this))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,T(this,m).disconnect(),ut(this,m,null),super.remove())}setParent(t){!this.parent&&t?this._uiManager.removeShouldRescale(this):this.parent&&null===t&&this._uiManager.addShouldRescale(this),super.setParent(t)}onScaleChanging(){let[t,e]=this.parentDimensions,i=this.width*t,r=this.height*e;this.setDimensions(i,r)}enableEditMode(){T(this,p)||null===this.canvas||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",T(this,d)))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",T(this,d)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}commit(){T(this,p)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ut(this,p,!0),this.div.classList.add("disabled"),nt(this,tv,tb).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin(t){super.focusin(t),this.enableEditMode()}canvasPointerdown(t){0===t.button&&this.isInEditMode()&&!T(this,p)&&(this.setInForeground(),t.preventDefault(),"mouse"!==t.type&&this.div.focus(),nt(this,R,F).call(this,t.offsetX,t.offsetY))}canvasContextMenu(t){t.preventDefault()}canvasPointermove(t){t.preventDefault(),nt(this,O,I).call(this,t.offsetX,t.offsetY)}canvasPointerup(t){t.preventDefault(),nt(this,X,$).call(this,t)}canvasPointerleave(t){nt(this,X,$).call(this,t)}render(){let t,e;if(this.div)return this.div;this.width&&(t=this.x,e=this.y),super.render(),tC._l10nPromise.get("editor_ink2_aria_label").then(t=>{var e;return null==(e=this.div)?void 0:e.setAttribute("aria-label",t)});let[i,r,n,s]=nt(this,k,E).call(this);if(this.setAt(i,r,0,0),this.setDims(n,s),nt(this,Y,K).call(this),this.width){let[i,r]=this.parentDimensions;this.setAt(t*i,e*r,this.width*i,this.height*r),ut(this,g,!0),nt(this,Z,tt).call(this),this.setDims(this.width*i,this.height*r),nt(this,z,V).call(this),nt(this,ty,tA).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return nt(this,J,Q).call(this),this.div}setDimensions(t,e){let i=Math.round(t),n=Math.round(e);if(T(this,v)===i&&T(this,b)===n)return;ut(this,v,i),ut(this,b,n),this.canvas.style.visibility="hidden",T(this,r)&&Math.abs(T(this,r)-t/e)>.01&&(e=Math.ceil(t/T(this,r)),this.setDims(t,e));let[s,o]=this.parentDimensions;this.width=t/s,this.height=e/o,T(this,p)&&nt(this,te,ti).call(this,t,e),nt(this,Z,tt).call(this),nt(this,z,V).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(t,e,i){var o,l;let h=super.deserialize(t,e,i);h.thickness=t.thickness,h.color=tS.Util.makeHexColor(...t.color),h.opacity=t.opacity;let[c,d]=h.pageDimensions,u=h.width*c,f=h.height*d,g=h.parentScale,m=t.thickness/2;for(let{bezier:e}of(ut(h,r,u/f),ut(h,p,!0),ut(h,v,Math.round(u)),ut(h,b,Math.round(f)),t.paths)){let t=[];h.paths.push(t);let i=g*(e[0]-m),r=g*(f-e[1]-m);for(let n=2,s=e.length;n<s;n+=6){let s=g*(e[n]-m),o=g*(f-e[n+1]-m),l=g*(e[n+2]-m),h=g*(f-e[n+3]-m),c=g*(e[n+4]-m),d=g*(f-e[n+5]-m);t.push([[i,r],[s,o],[l,h],[c,d]]),i=c,r=d}let n=nt(this,ta,ts).call(this,t);h.bezierPath2D.push(n)}let y=nt(o=h,tp,tf).call(o);return ut(h,s,Math.max(tw,y[2]-y[0])),ut(h,n,Math.max(tw,y[3]-y[1])),nt(l=h,te,ti).call(l,u,f),h}serialize(){if(this.isEmpty())return null;let t=this.getRect(0,0),e=this.rotation%180==0?t[3]-t[1]:t[2]-t[0],i=t_.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:tS.AnnotationEditorType.INK,color:i,thickness:this.thickness,opacity:this.opacity,paths:nt(this,to,tl).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:t,rotation:this.rotation}}},tk=tC;r=new WeakMap,n=new WeakMap,s=new WeakMap,o=new WeakMap,l=new WeakMap,h=new WeakMap,c=new WeakMap,d=new WeakMap,u=new WeakMap,p=new WeakMap,f=new WeakMap,g=new WeakMap,m=new WeakMap,v=new WeakMap,b=new WeakMap,y=new WeakMap,A=new WeakSet,S=function(t){let e=this.thickness;this.addCommands({cmd:()=>{this.thickness=t,nt(this,tv,tb).call(this)},undo:()=>{this.thickness=e,nt(this,tv,tb).call(this)},mustExec:!0,type:tS.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},_=new WeakSet,x=function(t){let e=this.color;this.addCommands({cmd:()=>{this.color=t,nt(this,z,V).call(this)},undo:()=>{this.color=e,nt(this,z,V).call(this)},mustExec:!0,type:tS.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},w=new WeakSet,C=function(t){t/=100;let e=this.opacity;this.addCommands({cmd:()=>{this.opacity=t,nt(this,z,V).call(this)},undo:()=>{this.opacity=e,nt(this,z,V).call(this)},mustExec:!0,type:tS.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},k=new WeakSet,E=function(){let{parentRotation:t,parentDimensions:[e,i]}=this;switch(t){case 90:return[0,i,i,e];case 180:return[e,i,e,i];case 270:return[e,0,i,e];default:return[0,0,e,i]}},M=new WeakSet,P=function(){let{ctx:t,color:e,opacity:i,thickness:r,parentScale:n,scaleFactor:s}=this;t.lineWidth=r*n/s,t.lineCap="round",t.lineJoin="round",t.miterLimit=10,t.strokeStyle=`${e}${(0,tx.opacityToHex)(i)}`},R=new WeakSet,F=function(t,e){this.canvas.addEventListener("contextmenu",T(this,o)),this.canvas.addEventListener("pointerleave",T(this,h)),this.canvas.addEventListener("pointermove",T(this,l)),this.canvas.addEventListener("pointerup",T(this,c)),this.canvas.removeEventListener("pointerdown",T(this,d)),this.isEditing=!0,T(this,g)||(ut(this,g,!0),nt(this,Z,tt).call(this),this.thickness||(this.thickness=tC._defaultThickness),this.color||(this.color=tC._defaultColor||t_.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=tC._defaultOpacity)),this.currentPath.push([t,e]),ut(this,f,!1),nt(this,M,P).call(this),ut(this,y,()=>{nt(this,W,B).call(this),T(this,y)&&window.requestAnimationFrame(T(this,y))}),window.requestAnimationFrame(T(this,y))},O=new WeakSet,I=function(t,e){let[i,r]=this.currentPath.at(-1);if(this.currentPath.length>1&&t===i&&e===r)return;let n=this.currentPath,s=T(this,u);n.push([t,e]),ut(this,f,!0),n.length<=2?(s.moveTo(...n[0]),s.lineTo(t,e)):(3===n.length&&(ut(this,u,s=new Path2D),s.moveTo(...n[0])),nt(this,U,G).call(this,s,...n.at(-3),...n.at(-2),t,e))},D=new WeakSet,L=function(){if(0===this.currentPath.length)return;let t=this.currentPath.at(-1);T(this,u).lineTo(...t)},N=new WeakSet,j=function(t,e){let i;if(ut(this,y,null),t=Math.min(Math.max(t,0),this.canvas.width),e=Math.min(Math.max(e,0),this.canvas.height),nt(this,O,I).call(this,t,e),nt(this,D,L).call(this),1!==this.currentPath.length)i=nt(this,H,q).call(this);else{let r=[t,e];i=[[r,r.slice(),r.slice(),r]]}let r=T(this,u),n=this.currentPath;this.currentPath=[],ut(this,u,new Path2D),this.addCommands({cmd:()=>{this.allRawPaths.push(n),this.paths.push(i),this.bezierPath2D.push(r),this.rebuild()},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(nt(this,Y,K).call(this),nt(this,J,Q).call(this)),nt(this,tv,tb).call(this))},mustExec:!0})},W=new WeakSet,B=function(){if(!T(this,f))return;ut(this,f,!1),this.thickness,this.parentScale;let t=this.currentPath.slice(-3),{ctx:e}=(t.map(t=>t[0]),t.map(t=>t[1]),this);for(let t of(e.save(),e.clearRect(0,0,this.canvas.width,this.canvas.height),this.bezierPath2D))e.stroke(t);e.stroke(T(this,u)),e.restore()},U=new WeakSet,G=function(t,e,i,r,n,s,o){let l=(e+r)/2,h=(i+n)/2,c=(r+s)/2,d=(n+o)/2;t.bezierCurveTo(l+2*(r-l)/3,h+2*(n-h)/3,c+2*(r-c)/3,d+2*(n-d)/3,c,d)},H=new WeakSet,q=function(){let t=this.currentPath;if(t.length<=2)return[[t[0],t[0],t.at(-1),t.at(-1)]];let e=[],i,[r,n]=t[0];for(i=1;i<t.length-2;i++){let[s,o]=t[i],[l,h]=t[i+1],c=(s+l)/2,d=(o+h)/2,u=[r+2*(s-r)/3,n+2*(o-n)/3],p=[c+2*(s-c)/3,d+2*(o-d)/3];e.push([[r,n],u,p,[c,d]]),[r,n]=[c,d]}let[s,o]=t[i],[l,h]=t[i+1],c=[r+2*(s-r)/3,n+2*(o-n)/3],d=[l+2*(s-l)/3,h+2*(o-h)/3];return e.push([[r,n],c,d,[l,h]]),e},z=new WeakSet,V=function(){if(this.isEmpty())return void nt(this,tr,tn).call(this);nt(this,M,P).call(this);let{canvas:t,ctx:e}=this;for(let i of(e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height),nt(this,tr,tn).call(this),this.bezierPath2D))e.stroke(i)},X=new WeakSet,$=function(t){this.canvas.removeEventListener("pointerleave",T(this,h)),this.canvas.removeEventListener("pointermove",T(this,l)),this.canvas.removeEventListener("pointerup",T(this,c)),this.canvas.addEventListener("pointerdown",T(this,d)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",T(this,o))},10),nt(this,N,j).call(this,t.offsetX,t.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Y=new WeakSet,K=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",tC._l10nPromise.get("editor_ink_canvas_aria_label").then(t=>{var e;return null==(e=this.canvas)?void 0:e.setAttribute("aria-label",t)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},J=new WeakSet,Q=function(){ut(this,m,new ResizeObserver(t=>{let e=t[0].contentRect;e.width&&e.height&&this.setDimensions(e.width,e.height)})),T(this,m).observe(this.div)},Z=new WeakSet,tt=function(){if(!T(this,g))return;let[t,e]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*t),this.canvas.height=Math.ceil(this.height*e),nt(this,tr,tn).call(this)},te=new WeakSet,ti=function(t,e){let i=nt(this,tg,tm).call(this),r=(t-i)/T(this,s),o=(e-i)/T(this,n);this.scaleFactor=Math.min(r,o)},tr=new WeakSet,tn=function(){let t=nt(this,tg,tm).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+t,this.translationY*this.scaleFactor+t)},ta=new WeakSet,ts=function(t){let e=new Path2D;for(let i=0,r=t.length;i<r;i++){let[r,n,s,o]=t[i];0===i&&e.moveTo(...r),e.bezierCurveTo(n[0],n[1],s[0],s[1],o[0],o[1])}return e},to=new WeakSet,tl=function(t,e,i,r){let n,s,o=[],l=this.thickness/2;for(let h of this.paths){n=[],s=[];for(let o=0,c=h.length;o<c;o++){let[c,d,u,p]=h[o],f=t*(c[0]+e)+l,g=r-t*(c[1]+i)-l,m=t*(d[0]+e)+l,v=r-t*(d[1]+i)-l,b=t*(u[0]+e)+l,y=r-t*(u[1]+i)-l,A=t*(p[0]+e)+l,S=r-t*(p[1]+i)-l;0===o&&(n.push(f,g),s.push(f,g)),n.push(m,v,b,y,A,S),nt(this,th,tc).call(this,f,g,m,v,b,y,A,S,4,s)}o.push({bezier:n,points:s})}return o},th=new WeakSet,tc=function(t,e,i,r,n,s,o,l,h,c){if(nt(this,td,tu).call(this,t,e,i,r,n,s,o,l))c.push(o,l);else{for(let d=1;d<h-1;d++){let u=d/h,p=1-u,f=u*t+p*i,g=u*e+p*r,m=u*i+p*n,v=u*r+p*s;f=u*f+p*m,g=u*g+p*v,m=u*m+p*(u*n+p*o),v=u*v+p*(u*s+p*l),f=u*f+p*m,g=u*g+p*v,c.push(f,g)}c.push(o,l)}},td=new WeakSet,tu=function(t,e,i,r,n,s,o,l){return Math.max((3*i-2*t-o)**2,(3*n-t-2*o)**2)+Math.max((3*r-2*e-l)**2,(3*s-e-2*l)**2)<=10},tp=new WeakSet,tf=function(){let t=1/0,e=-1/0,i=1/0,r=-1/0;for(let n of this.paths)for(let[s,o,l,h]of n){let n=tS.Util.bezierBoundingBox(...s,...o,...l,...h);t=Math.min(t,n[0]),i=Math.min(i,n[1]),e=Math.max(e,n[2]),r=Math.max(r,n[3])}return[t,i,e,r]},tg=new WeakSet,tm=function(){return T(this,p)?Math.ceil(this.thickness*this.parentScale):0},tv=new WeakSet,tb=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return;if(!T(this,p))return void nt(this,z,V).call(this);let e=nt(this,tp,tf).call(this),i=nt(this,tg,tm).call(this);ut(this,s,Math.max(tw,e[2]-e[0])),ut(this,n,Math.max(tw,e[3]-e[1]));let o=Math.ceil(i+T(this,s)*this.scaleFactor),l=Math.ceil(i+T(this,n)*this.scaleFactor),[h,c]=this.parentDimensions;this.width=o/h,this.height=l/c,ut(this,r,o/l),nt(this,ty,tA).call(this);let d=this.translationX,u=this.translationY;this.translationX=-e[0],this.translationY=-e[1],nt(this,Z,tt).call(this),nt(this,z,V).call(this),ut(this,v,o),ut(this,b,l),this.setDims(o,l);let f=t?i/this.scaleFactor/2:0;this.translate(d-this.translationX-f,u-this.translationY-f)},ty=new WeakSet,tA=function(){let{style:t}=this.div;T(this,r)>=1?(t.minHeight="16px",t.minWidth=`${Math.round(T(this,r)*tw)}px`):(t.minWidth="16px",t.minHeight=`${Math.round(tw/T(this,r))}px`)},et(tk,ta),It(tk,"_defaultColor",null),It(tk,"_defaultOpacity",1),It(tk,"_defaultThickness",1),It(tk,"_l10nPromise"),It(tk,"_type","ink"),e.InkEditor=tk},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationLayer=void 0;var r,n,s,o,l,h,c,d,u=i(1),p=i(142),f=i(139),g=i(166),m=i(167);let v=1e3,b=new WeakSet;function y(t){return{width:t[2]-t[0],height:t[3]-t[1]}}class A{static create(t){switch(t.data.annotationType){case u.AnnotationType.LINK:return new _(t);case u.AnnotationType.TEXT:return new x(t);case u.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new C(t);case"Btn":return t.data.radioButton?new E(t):t.data.checkBox?new k(t):new T(t);case"Ch":return new M(t)}return new w(t);case u.AnnotationType.POPUP:return new R(t);case u.AnnotationType.FREETEXT:return new O(t);case u.AnnotationType.LINE:return new I(t);case u.AnnotationType.SQUARE:return new D(t);case u.AnnotationType.CIRCLE:return new L(t);case u.AnnotationType.POLYLINE:return new N(t);case u.AnnotationType.CARET:return new W(t);case u.AnnotationType.INK:return new B(t);case u.AnnotationType.POLYGON:return new j(t);case u.AnnotationType.HIGHLIGHT:return new U(t);case u.AnnotationType.UNDERLINE:return new G(t);case u.AnnotationType.SQUIGGLY:return new H(t);case u.AnnotationType.STRIKEOUT:return new q(t);case u.AnnotationType.STAMP:return new z(t);case u.AnnotationType.FILEATTACHMENT:return new V(t);default:return new S(t)}}}class S{constructor(t){let{isRenderable:e=!1,ignoreBorder:i=!1,createQuadrilaterals:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,e&&(this.container=this._createContainer(i)),r&&(this.quadrilaterals=this._createQuadrilaterals(i))}_createContainer(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],{data:e,page:i,viewport:r}=this,n=document.createElement("section");n.setAttribute("data-annotation-id",e.id),e.noRotate&&n.classList.add("norotate");let{pageWidth:s,pageHeight:o,pageX:l,pageY:h}=r.rawDims,{width:c,height:d}=y(e.rect),p=u.Util.normalizeRect([e.rect[0],i.view[3]-e.rect[1]+i.view[1],e.rect[2],i.view[3]-e.rect[3]+i.view[1]]);if(!t&&e.borderStyle.width>0){n.style.borderWidth=`${e.borderStyle.width}px`;let t=e.borderStyle.horizontalCornerRadius,i=e.borderStyle.verticalCornerRadius;if(t>0||i>0){let e=`calc(${t}px * var(--scale-factor)) / calc(${i}px * var(--scale-factor))`;n.style.borderRadius=e}else if(this instanceof E){let t=`calc(${c}px * var(--scale-factor)) / calc(${d}px * var(--scale-factor))`;n.style.borderRadius=t}switch(e.borderStyle.style){case u.AnnotationBorderStyleType.SOLID:n.style.borderStyle="solid";break;case u.AnnotationBorderStyleType.DASHED:n.style.borderStyle="dashed";break;case u.AnnotationBorderStyleType.BEVELED:(0,u.warn)("Unimplemented border style: beveled");break;case u.AnnotationBorderStyleType.INSET:(0,u.warn)("Unimplemented border style: inset");break;case u.AnnotationBorderStyleType.UNDERLINE:n.style.borderBottomStyle="solid"}let r=e.borderColor||null;r?n.style.borderColor=u.Util.makeHexColor(0|r[0],0|r[1],0|r[2]):n.style.borderWidth=0}n.style.left=100*(p[0]-l)/s+"%",n.style.top=100*(p[1]-h)/o+"%";let{rotation:f}=e;return e.hasOwnCanvas||0===f?(n.style.width=100*c/s+"%",n.style.height=100*d/o+"%"):this.setRotation(f,n),n}setRotation(t){let e,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container,{pageWidth:n,pageHeight:s}=this.viewport.rawDims,{width:o,height:l}=y(this.data.rect);t%180==0?(e=100*o/n,i=100*l/s):(e=100*l/n,i=100*o/s),r.style.width=`${e}%`,r.style.height=`${i}%`,r.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){let t=(t,e,i)=>{let r=i.detail[t];i.target.style[e]=g.ColorConverters[`${r[0]}_HTML`](r.slice(1))};return(0,u.shadow)(this,"_commonActions",{display:t=>{let e=t.detail.display%2==1;this.container.style.visibility=e?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:e,print:0===t.detail.display||3===t.detail.display})},print:t=>{this.annotationStorage.setValue(this.data.id,{print:t.detail.print})},hidden:t=>{this.container.style.visibility=t.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:t.detail.hidden})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.detail.readonly?t.target.setAttribute("readonly",""):t.target.removeAttribute("readonly")},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:t=>{let e=t.detail.rotation;this.setRotation(e),this.annotationStorage.setValue(this.data.id,{rotation:e})}})}_dispatchEventFromSandbox(t,e){let i=this._commonActions;for(let r of Object.keys(e.detail)){let n=t[r]||i[r];null==n||n(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;let e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;let i=this._commonActions;for(let[r,n]of Object.entries(e)){let s=i[r];s&&(s({detail:{[r]:n},target:t}),delete e[r])}}_createQuadrilaterals(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.data.quadPoints)return null;let e=[],i=this.data.rect;for(let i of this.data.quadPoints)this.data.rect=[i[2].x,i[2].y,i[1].x,i[1].y],e.push(this._createContainer(t));return this.data.rect=i,e}_createPopup(t,e){let i=this.container;this.quadrilaterals&&(t||(t=this.quadrilaterals),i=this.quadrilaterals[0]),t||((t=document.createElement("div")).classList.add("popupTriggerArea"),i.append(t));let r=new F({container:i,trigger:t,color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,hideWrapper:!0}).render();r.style.left="100%",i.append(r)}_renderQuadrilaterals(t){for(let e of this.quadrilaterals)e.classList.add(t);return this.quadrilaterals}render(){(0,u.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=[];if(this._fieldObjects){let r=this._fieldObjects[t];if(r)for(let{page:t,id:n,exportValues:s}of r){if(-1===t||n===e)continue;let r="string"==typeof s?s:null,o=document.querySelector(`[data-element-id="${n}"]`);!o||b.has(o)?i.push({id:n,exportValue:r,domElement:o}):(0,u.warn)(`_getElementsByName - element not allowed: ${n}`)}return i}for(let r of document.getElementsByName(t)){let{exportValue:t}=r,n=r.getAttribute("data-element-id");n!==e&&b.has(r)&&i.push({id:n,exportValue:t,domElement:r})}return i}}class _ extends S{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(t,{isRenderable:!0,ignoreBorder:!(null==e||!e.ignoreBorder),createQuadrilaterals:!0}),et(this,r),et(this,s),this.isTooltipOnly=t.data.isTooltipOnly}render(){let{data:t,linkService:e}=this,i=document.createElement("a");i.setAttribute("data-element-id",t.id);let r=!1;return t.url?(e.addLinkAttributes(i,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(i,t.action),r=!0):t.attachment?(this._bindAttachment(i,t.attachment),r=!0):t.setOCGState?(nt(this,s,o).call(this,i,t.setOCGState),r=!0):t.dest?(this._bindLink(i,t.dest),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,t),r=!0),t.resetForm?(this._bindResetFormAction(i,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((t,e)=>{let r=0===e?i:i.cloneNode();return t.append(r),t}):(this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container)}_bindLink(t,e){t.href=this.linkService.getDestinationHash(e),t.onclick=()=>(e&&this.linkService.goToDestination(e),!1),(e||""===e)&&nt(this,r,n).call(this)}_bindNamedAction(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(e),!1),nt(this,r,n).call(this)}_bindAttachment(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>{var t;return null==(t=this.downloadManager)||t.openOrDownloadData(this.container,e.content,e.filename),!1},nt(this,r,n).call(this)}_bindJSAction(t,e){t.href=this.linkService.getAnchorUrl("");let i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(let r of Object.keys(e.actions)){let n=i.get(r);n&&(t[n]=()=>{var t;return null==(t=this.linkService.eventBus)||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e.id,name:r}}),!1})}t.onclick||(t.onclick=()=>!1),nt(this,r,n).call(this)}_bindResetFormAction(t,e){let i=t.onclick;i||(t.href=this.linkService.getAnchorUrl("")),nt(this,r,n).call(this),this._fieldObjects?t.onclick=()=>{null==i||i();let{fields:t,refs:r,include:n}=e,s=[];if(0!==t.length||0!==r.length){let e=new Set(r);for(let i of t)for(let{id:t}of this._fieldObjects[i]||[])e.add(t);for(let t of Object.values(this._fieldObjects))for(let i of t)e.has(i.id)===n&&s.push(i)}else for(let t of Object.values(this._fieldObjects))s.push(...t);let o=this.annotationStorage,l=[];for(let t of s){let{id:e}=t;switch(l.push(e),t.type){case"text":{let i=t.defaultValue||"";o.setValue(e,{value:i});break}case"checkbox":case"radiobutton":{let i=t.defaultValue===t.exportValues;o.setValue(e,{value:i});break}case"combobox":case"listbox":{let i=t.defaultValue||"";o.setValue(e,{value:i});break}default:continue}let i=document.querySelector(`[data-element-id="${e}"]`);i&&(b.has(i)?i.dispatchEvent(new Event("resetform")):(0,u.warn)(`_bindResetFormAction - element not allowed: ${e}`))}if(this.enableScripting){var h;null==(h=this.linkService.eventBus)||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:l,name:"ResetForm"}})}return!1}:((0,u.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(t.onclick=()=>!1))}}r=new WeakSet,n=function(){this.container.setAttribute("data-internal-link","")},s=new WeakSet,o=function(t,e){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(e),!1),nt(this,r,n).call(this)};class x extends S{constructor(t){var e,i,r;super(t,{isRenderable:!!(t.data.hasPopup||null!=(e=t.data.titleObj)&&e.str||null!=(i=t.data.contentsObj)&&i.str||null!=(r=t.data.richText)&&r.str)})}render(){this.container.classList.add("textAnnotation");let t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.append(t),this.container}}class w extends S{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(t){if(this.data.hasOwnCanvas){var e;(null==(e=t.previousSibling)?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1}}_getKeyModifier(t){let{isWin:e,isMac:i}=u.FeatureTest.platform;return e&&t.ctrlKey||i&&t.metaKey}_setEventListener(t,e,i,r){e.includes("mouse")?t.addEventListener(e,t=>{var e;null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(t),shift:t.shiftKey,modifier:this._getKeyModifier(t)}})}):t.addEventListener(e,t=>{var e;null==(e=this.linkService.eventBus)||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(t)}})})}_setEventListeners(t,e,i){for(let[n,s]of e){var r;("Action"===s||null!=(r=this.data.actions)&&r[s])&&this._setEventListener(t,n,s,i)}}_setBackgroundColor(t){let e=this.data.backgroundColor||null;t.style.backgroundColor=null===e?"transparent":u.Util.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){let e,i=["left","center","right"],{fontColor:r}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||9,s=t.style,o=t=>Math.round(10*t)/10;if(this.data.multiLine){let t=Math.abs(this.data.rect[3]-this.data.rect[1]-2),i=t/(Math.round(t/(u.LINE_FACTOR*n))||1);e=Math.min(n,o(i/u.LINE_FACTOR))}else e=Math.min(n,o(Math.abs(this.data.rect[3]-this.data.rect[1]-2)/u.LINE_FACTOR));s.fontSize=`calc(${e}px * var(--scale-factor))`,s.color=u.Util.makeHexColor(r[0],r[1],r[2]),null!==this.data.textAlignment&&(s.textAlign=i[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class C extends w{constructor(t){super(t,{isRenderable:t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,e,i,r){let n=this.annotationStorage;for(let s of this._getElementsByName(t.name,t.id))s.domElement&&(s.domElement[e]=i),n.setValue(s.id,{[r]:i})}render(){let t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let i=null;if(this.renderForms){var r,n;let s=t.getValue(e,{value:this.data.fieldValue}),o=s.value||"",l=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let h=s.formattedValue||(null==(r=this.data.textContent)?void 0:r.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));let c={userValue:o,formattedValue:h,lastCommittedValue:null,commitKey:1};this.data.multiLine?((i=document.createElement("textarea")).textContent=h??o,this.data.doNotScroll&&(i.style.overflowY="hidden")):((i=document.createElement("input")).type="text",i.setAttribute("value",h??o),this.data.doNotScroll&&(i.style.overflowX="hidden")),this.data.hasOwnCanvas&&(i.hidden=!0),b.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,i.name=this.data.fieldName,i.tabIndex=v,this._setRequired(i,this.data.required),l&&(i.maxLength=l),i.addEventListener("input",r=>{t.setValue(e,{value:r.target.value}),this.setPropertyOnSiblings(i,"value",r.target.value,"value"),c.formattedValue=null}),i.addEventListener("resetform",t=>{let e=this.data.defaultFieldValue??"";i.value=c.userValue=e,c.formattedValue=null});let d=t=>{let{formattedValue:e}=c;null!=e&&(t.target.value=e),t.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){i.addEventListener("focus",t=>{let{target:e}=t;c.userValue&&(e.value=c.userValue),c.lastCommittedValue=e.value,c.commitKey=1}),i.addEventListener("updatefromsandbox",i=>{this.showElementAndHideCanvas(i.target);let r={value(i){c.userValue=i.detail.value??"",t.setValue(e,{value:c.userValue.toString()}),i.target.value=c.userValue},formattedValue(i){let{formattedValue:r}=i.detail;c.formattedValue=r,null!=r&&i.target!==document.activeElement&&(i.target.value=r),t.setValue(e,{formattedValue:r})},selRange(t){t.target.setSelectionRange(...t.detail.selRange)},charLimit:i=>{var r;let{charLimit:n}=i.detail,{target:s}=i;if(0===n)return void s.removeAttribute("maxLength");s.setAttribute("maxLength",n);let o=c.userValue;o&&!(o.length<=n)&&(s.value=c.userValue=o=o.slice(0,n),t.setValue(e,{value:o}),null==(r=this.linkService.eventBus)||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:o,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}}))}};this._dispatchEventFromSandbox(r,i)}),i.addEventListener("keydown",t=>{var i;c.commitKey=1;let r=-1;if("Escape"===t.key?r=0:"Enter"!==t.key||this.data.multiLine?"Tab"===t.key&&(c.commitKey=3):r=2,-1===r)return;let{value:n}=t.target;c.lastCommittedValue!==n&&(c.lastCommittedValue=n,c.userValue=n,null==(i=this.linkService.eventBus)||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:n,willCommit:!0,commitKey:r,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}}))});let r=d;d=null,i.addEventListener("blur",t=>{if(!t.relatedTarget)return;let{value:i}=t.target;if(c.userValue=i,c.lastCommittedValue!==i){var n;null==(n=this.linkService.eventBus)||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:i,willCommit:!0,commitKey:c.commitKey,selStart:t.target.selectionStart,selEnd:t.target.selectionEnd}})}r(t)}),null!=(n=this.data.actions)&&n.Keystroke&&i.addEventListener("beforeinput",t=>{var i;c.lastCommittedValue=null;let{data:r,target:n}=t,{value:s,selectionStart:o,selectionEnd:l}=n,h=o,d=l;switch(t.inputType){case"deleteWordBackward":{let t=s.substring(0,o).match(/\w*[^\w]*$/);t&&(h-=t[0].length);break}case"deleteWordForward":{let t=s.substring(o).match(/^[^\w]*\w*/);t&&(d+=t[0].length);break}case"deleteContentBackward":o===l&&(h-=1);break;case"deleteContentForward":o===l&&(d+=1)}t.preventDefault(),null==(i=this.linkService.eventBus)||i.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:s,change:r||"",willCommit:!1,selStart:h,selEnd:d}})}),this._setEventListeners(i,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.value)}if(d&&i.addEventListener("blur",d),this.data.comb){let t=(this.data.rect[2]-this.data.rect[0])/l;i.classList.add("comb"),i.style.letterSpacing=`calc(${t}px * var(--scale-factor) - 1ch)`}}else(i=document.createElement("div")).textContent=this.data.fieldValue,i.style.verticalAlign="middle",i.style.display="table-cell";return this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class k extends w{constructor(t){super(t,{isRenderable:t.renderForms})}render(){let t=this.annotationStorage,e=this.data,i=e.id,r=t.getValue(i,{value:e.exportValue===e.fieldValue}).value;"string"==typeof r&&(r="Off"!==r,t.setValue(i,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");let n=document.createElement("input");return b.add(n),n.setAttribute("data-element-id",i),n.disabled=e.readOnly,this._setRequired(n,this.data.required),n.type="checkbox",n.name=e.fieldName,r&&n.setAttribute("checked",!0),n.setAttribute("exportValue",e.exportValue),n.tabIndex=v,n.addEventListener("change",r=>{let{name:n,checked:s}=r.target;for(let r of this._getElementsByName(n,i)){let i=s&&r.exportValue===e.exportValue;r.domElement&&(r.domElement.checked=i),t.setValue(r.id,{value:i})}t.setValue(i,{value:s})}),n.addEventListener("resetform",t=>{let i=e.defaultFieldValue||"Off";t.target.checked=i===e.exportValue}),this.enableScripting&&this.hasJSActions&&(n.addEventListener("updatefromsandbox",e=>{let r={value(e){e.target.checked="Off"!==e.detail.value,t.setValue(i,{value:e.target.checked})}};this._dispatchEventFromSandbox(r,e)}),this._setEventListeners(n,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.checked)),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class E extends w{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");let t=this.annotationStorage,e=this.data,i=e.id,r=t.getValue(i,{value:e.fieldValue===e.buttonValue}).value;"string"==typeof r&&(r=r!==e.buttonValue,t.setValue(i,{value:r}));let n=document.createElement("input");if(b.add(n),n.setAttribute("data-element-id",i),n.disabled=e.readOnly,this._setRequired(n,this.data.required),n.type="radio",n.name=e.fieldName,r&&n.setAttribute("checked",!0),n.tabIndex=v,n.addEventListener("change",e=>{let{name:r,checked:n}=e.target;for(let e of this._getElementsByName(r,i))t.setValue(e.id,{value:!1});t.setValue(i,{value:n})}),n.addEventListener("resetform",t=>{let i=e.defaultFieldValue;t.target.checked=null!=i&&i===e.buttonValue}),this.enableScripting&&this.hasJSActions){let r=e.buttonValue;n.addEventListener("updatefromsandbox",e=>{let n={value:e=>{let n=r===e.detail.value;for(let r of this._getElementsByName(e.target.name)){let e=n&&r.id===i;r.domElement&&(r.domElement.checked=e),t.setValue(r.id,{value:e})}}};this._dispatchEventFromSandbox(n,e)}),this._setEventListeners(n,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],t=>t.target.checked)}return this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class T extends _{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){let t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(t.title=this.data.alternativeText);let e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",t=>{this._dispatchEventFromSandbox({},t)})),t}}class M extends w{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");let t=this.annotationStorage,e=this.data.id,i=t.getValue(e,{value:this.data.fieldValue}),r=document.createElement("select");b.add(r),r.setAttribute("data-element-id",e),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=v;let n=this.data.combo&&this.data.options.length>0;for(let t of(this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",t=>{let e=this.data.defaultFieldValue;for(let t of r.options)t.selected=t.value===e}),this.data.options)){let e=document.createElement("option");e.textContent=t.displayValue,e.value=t.exportValue,i.value.includes(t.exportValue)&&(e.setAttribute("selected",!0),n=!1),r.append(e)}let s=null;if(n){let t=document.createElement("option");t.value=" ",t.setAttribute("hidden",!0),t.setAttribute("selected",!0),r.prepend(t),s=()=>{t.remove(),r.removeEventListener("input",s),s=null},r.addEventListener("input",s)}let o=t=>{let e=t?"value":"textContent",{options:i,multiple:n}=r;return n?Array.prototype.filter.call(i,t=>t.selected).map(t=>t[e]):-1===i.selectedIndex?null:i[i.selectedIndex][e]},l=o(!1),h=t=>{let e=t.target.options;return Array.prototype.map.call(e,t=>({displayValue:t.textContent,exportValue:t.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",i=>{let n={value(i){var n;null==(n=s)||n();let h=i.detail.value,c=new Set(Array.isArray(h)?h:[h]);for(let t of r.options)t.selected=c.has(t.value);t.setValue(e,{value:o(!0)}),l=o(!1)},multipleSelection(t){r.multiple=!0},remove(i){let n=r.options,s=i.detail.remove;n[s].selected=!1,r.remove(s),n.length>0&&-1===Array.prototype.findIndex.call(n,t=>t.selected)&&(n[0].selected=!0),t.setValue(e,{value:o(!0),items:h(i)}),l=o(!1)},clear(i){for(;0!==r.length;)r.remove(0);t.setValue(e,{value:null,items:[]}),l=o(!1)},insert(i){let{index:n,displayValue:s,exportValue:c}=i.detail.insert,d=r.children[n],u=document.createElement("option");u.textContent=s,u.value=c,d?d.before(u):r.append(u),t.setValue(e,{value:o(!0),items:h(i)}),l=o(!1)},items(i){let{items:n}=i.detail;for(;0!==r.length;)r.remove(0);for(let t of n){let{displayValue:e,exportValue:i}=t,n=document.createElement("option");n.textContent=e,n.value=i,r.append(n)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(e,{value:o(!0),items:h(i)}),l=o(!1)},indices(i){let r=new Set(i.detail.indices);for(let t of i.target.options)t.selected=r.has(t.index);t.setValue(e,{value:o(!0)}),l=o(!1)},editable(t){t.target.disabled=!t.detail.editable}};this._dispatchEventFromSandbox(n,i)}),r.addEventListener("input",i=>{var r;let n=o(!0);t.setValue(e,{value:n}),i.preventDefault(),null==(r=this.linkService.eventBus)||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:l,changeEx:n,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],t=>t.target.value)):r.addEventListener("input",function(i){t.setValue(e,{value:o(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}let P=class extends S{constructor(t){var e,i,r;let{data:n}=t;super(t,{isRenderable:!P.IGNORE_TYPES.has(n.parentType)&&!!(null!=(e=n.titleObj)&&e.str||null!=(i=n.contentsObj)&&i.str||null!=(r=n.richText)&&r.str)})}render(){this.container.classList.add("popupAnnotation");let t=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===t.length)return this.container;let e=new F({container:this.container,trigger:Array.from(t),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),i=this.page,r=u.Util.normalizeRect([this.data.parentRect[0],i.view[3]-this.data.parentRect[1]+i.view[1],this.data.parentRect[2],i.view[3]-this.data.parentRect[3]+i.view[1]]),n=r[0]+this.data.parentRect[2]-this.data.parentRect[0],s=r[1],{pageWidth:o,pageHeight:l,pageX:h,pageY:c}=this.viewport.rawDims;return this.container.style.left=100*(n-h)/o+"%",this.container.style.top=100*(s-c)/l+"%",this.container.append(e.render()),this.container}},R=P;It(R,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class F{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){var t,e;let i=document.createElement("div");i.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?i:this.container,this.hideElement.hidden=!0;let r=document.createElement("div");r.classList.add("popup");let n=this.color;if(n){let t=.7*(255-n[0])+n[0],e=.7*(255-n[1])+n[1],i=.7*(255-n[2])+n[2];r.style.backgroundColor=u.Util.makeHexColor(0|t,0|e,0|i)}let s=document.createElement("h1");s.dir=this.titleObj.dir,s.textContent=this.titleObj.str,r.append(s);let o=p.PDFDateString.toDateObject(this.modificationDate);if(o){let t=document.createElement("span");t.classList.add("popupDate"),t.textContent="{{date}}, {{time}}",t.dataset.l10nId="annotation_date_string",t.dataset.l10nArgs=JSON.stringify({date:o.toLocaleDateString(),time:o.toLocaleTimeString()}),r.append(t)}if(null==(t=this.richText)||!t.str||null!=(e=this.contentsObj)&&e.str&&this.contentsObj.str!==this.richText.str){let t=this._formatContents(this.contentsObj);r.append(t)}else m.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:r}),r.lastChild.classList.add("richText","popupContent");for(let t of(Array.isArray(this.trigger)||(this.trigger=[this.trigger]),this.trigger))t.addEventListener("click",this._toggle.bind(this)),t.addEventListener("mouseover",this._show.bind(this,!1)),t.addEventListener("mouseout",this._hide.bind(this,!1));return r.addEventListener("click",this._hide.bind(this,!0)),i.append(r),i}_formatContents(t){let{str:e,dir:i}=t,r=document.createElement("p");r.classList.add("popupContent"),r.dir=i;let n=e.split(/(?:\r\n?|\n)/);for(let t=0,e=n.length;t<e;++t){let i=n[t];r.append(document.createTextNode(i)),t<e-1&&r.append(document.createElement("br"))}return r}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.pinned=!1),this.hideElement.hidden||this.pinned||(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class O extends S{constructor(t){var e,i,r;super(t,{isRenderable:!!(t.data.hasPopup||null!=(e=t.data.titleObj)&&e.str||null!=(i=t.data.contentsObj)&&i.str||null!=(r=t.data.richText)&&r.str),ignoreBorder:!0}),this.textContent=t.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){let t=document.createElement("div");for(let e of(t.classList.add("annotationTextContent"),t.setAttribute("role","comment"),this.textContent)){let i=document.createElement("span");i.textContent=e,t.append(i)}this.container.append(t)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class I extends S{constructor(t){var e,i,r;super(t,{isRenderable:!!(t.data.hasPopup||null!=(e=t.data.titleObj)&&e.str||null!=(i=t.data.contentsObj)&&i.str||null!=(r=t.data.richText)&&r.str),ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");let t=this.data,{width:e,height:i}=y(t.rect),r=this.svgFactory.create(e,i,!0),n=this.svgFactory.createElement("svg:line");return n.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),n.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),n.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),n.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),n.setAttribute("stroke-width",t.borderStyle.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),r.append(n),this.container.append(r),this._createPopup(n,t),this.container}}class D extends S{constructor(t){var e,i,r;super(t,{isRenderable:!!(t.data.hasPopup||null!=(e=t.data.titleObj)&&e.str||null!=(i=t.data.contentsObj)&&i.str||null!=(r=t.data.richText)&&r.str),ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");let t=this.data,{width:e,height:i}=y(t.rect),r=this.svgFactory.create(e,i,!0),n=t.borderStyle.width,s=this.svgFactory.createElement("svg:rect");return s.setAttribute("x",n/2),s.setAttribute("y",n/2),s.setAttribute("width",e-n),s.setAttribute("height",i-n),s.setAttribute("stroke-width",n||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),this._createPopup(s,t),this.container}}class L extends S{constructor(t){var e,i,r;super(t,{isRenderable:!!(t.data.hasPopup||null!=(e=t.data.titleObj)&&e.str||null!=(i=t.data.contentsObj)&&i.str||null!=(r=t.data.richText)&&r.str),ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");let t=this.data,{width:e,height:i}=y(t.rect),r=this.svgFactory.create(e,i,!0),n=t.borderStyle.width,s=this.svgFactory.createElement("svg:ellipse");return s.setAttribute("cx",e/2),s.setAttribute("cy",i/2),s.setAttribute("rx",e/2-n/2),s.setAttribute("ry",i/2-n/2),s.setAttribute("stroke-width",n||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),this._createPopup(s,t),this.container}}class N extends S{constructor(t){var e,i,r;super(t,{isRenderable:!!(t.data.hasPopup||null!=(e=t.data.titleObj)&&e.str||null!=(i=t.data.contentsObj)&&i.str||null!=(r=t.data.richText)&&r.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let t=this.data,{width:e,height:i}=y(t.rect),r=this.svgFactory.create(e,i,!0),n=[];for(let e of t.vertices){let i=e.x-t.rect[0],r=t.rect[3]-e.y;n.push(i+","+r)}n=n.join(" ");let s=this.svgFactory.createElement(this.svgElementName);return s.setAttribute("points",n),s.setAttribute("stroke-width",t.borderStyle.width||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),this._createPopup(s,t),this.container}}class j extends N{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class W extends S{constructor(t){var e,i,r;super(t,{isRenderable:!!(t.data.hasPopup||null!=(e=t.data.titleObj)&&e.str||null!=(i=t.data.contentsObj)&&i.str||null!=(r=t.data.richText)&&r.str),ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class B extends S{constructor(t){var e,i,r;super(t,{isRenderable:!!(t.data.hasPopup||null!=(e=t.data.titleObj)&&e.str||null!=(i=t.data.contentsObj)&&i.str||null!=(r=t.data.richText)&&r.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);let t=this.data,{width:e,height:i}=y(t.rect),r=this.svgFactory.create(e,i,!0);for(let e of t.inkLists){let i=[];for(let r of e){let e=r.x-t.rect[0],n=t.rect[3]-r.y;i.push(`${e},${n}`)}i=i.join(" ");let n=this.svgFactory.createElement(this.svgElementName);n.setAttribute("points",i),n.setAttribute("stroke-width",t.borderStyle.width||1),n.setAttribute("stroke","transparent"),n.setAttribute("fill","transparent"),this._createPopup(n,t),r.append(n)}return this.container.append(r),this.container}}class U extends S{constructor(t){var e,i,r;super(t,{isRenderable:!!(t.data.hasPopup||null!=(e=t.data.titleObj)&&e.str||null!=(i=t.data.contentsObj)&&i.str||null!=(r=t.data.richText)&&r.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class G extends S{constructor(t){var e,i,r;super(t,{isRenderable:!!(t.data.hasPopup||null!=(e=t.data.titleObj)&&e.str||null!=(i=t.data.contentsObj)&&i.str||null!=(r=t.data.richText)&&r.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class H extends S{constructor(t){var e,i,r;super(t,{isRenderable:!!(t.data.hasPopup||null!=(e=t.data.titleObj)&&e.str||null!=(i=t.data.contentsObj)&&i.str||null!=(r=t.data.richText)&&r.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class q extends S{constructor(t){var e,i,r;super(t,{isRenderable:!!(t.data.hasPopup||null!=(e=t.data.titleObj)&&e.str||null!=(i=t.data.contentsObj)&&i.str||null!=(r=t.data.richText)&&r.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class z extends S{constructor(t){var e,i,r;super(t,{isRenderable:!!(t.data.hasPopup||null!=(e=t.data.titleObj)&&e.str||null!=(i=t.data.contentsObj)&&i.str||null!=(r=t.data.richText)&&r.str),ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class V extends S{constructor(t){var e;super(t,{isRenderable:!0});let{filename:i,content:r}=this.data.file;this.filename=(0,p.getFilenameFromUrl)(i,!0),this.content=r,null==(e=this.linkService.eventBus)||e.dispatch("fileattachmentannotation",{source:this,filename:i,content:r})}render(){var t,e;let i;return this.container.classList.add("fileAttachmentAnnotation"),this.data.hasAppearance?i=document.createElement("div"):(i=document.createElement("img")).src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`,i.classList.add("popupTriggerArea"),i.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(null!=(t=this.data.titleObj)&&t.str||null!=(e=this.data.contentsObj)&&e.str||this.data.richText)&&this._createPopup(i,this.data),this.container.append(i),this.container}_download(){var t;null==(t=this.downloadManager)||t.openOrDownloadData(this.container,this.content,this.filename)}}let X=class{static render(t){var e,i;let{annotations:r,div:n,viewport:s,accessibilityManager:o}=t;(0,p.setLayerDimensions)(n,s);let g={data:null,layer:n,page:t.page,viewport:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new p.DOMSVGFactory,annotationStorage:t.annotationStorage||new f.AnnotationStorage,enableScripting:!0===t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects},m=0;for(let t of r){if(t.noHTML)continue;if(t.annotationType!==u.AnnotationType.POPUP){let{width:e,height:i}=y(t.rect);if(e<=0||i<=0)continue}g.data=t;let r=A.create(g);if(!r.isRenderable)continue;let s=r.render();if(t.hidden&&(s.style.visibility="hidden"),Array.isArray(s))for(let i of s)i.style.zIndex=m++,nt(e=X,l,h).call(e,i,t.id,n,o);else s.style.zIndex=m++,r instanceof R?n.prepend(s):nt(i=X,l,h).call(i,s,t.id,n,o)}nt(this,c,d).call(this,n,t.annotationCanvasMap)}static update(t){let{annotationCanvasMap:e,div:i,viewport:r}=t;(0,p.setLayerDimensions)(i,{rotation:r.rotation}),nt(this,c,d).call(this,i,e),i.hidden=!1}},$=X;l=new WeakSet,h=function(t,e,i,r){let n=t.firstChild||t;n.id=`${p.AnnotationPrefix}${e}`,i.append(t),null==r||r.moveElementInDOM(i,t,n,!1)},c=new WeakSet,d=function(t,e){if(e){for(let[i,r]of e){let e=t.querySelector(`[data-annotation-id="${i}"]`);if(!e)continue;let{firstChild:n}=e;n?"CANVAS"===n.nodeName?n.replaceWith(r):n.before(r):e.append(r)}e.clear()}},et($,l),et($,c),e.AnnotationLayer=$},(t,e)=>{function i(t){return Math.floor(255*Math.max(0,Math.min(1,t))).toString(16).padStart(2,"0")}Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0,e.ColorConverters=class{static CMYK_G(t){let[e,i,r,n]=t;return["G",1-Math.min(1,.3*e+.59*r+.11*i+n)]}static G_CMYK(t){let[e]=t;return["CMYK",0,0,0,1-e]}static G_RGB(t){let[e]=t;return["RGB",e,e,e]}static G_HTML(t){let[e]=t,r=i(e);return`#${r}${r}${r}`}static RGB_G(t){let[e,i,r]=t;return["G",.3*e+.59*i+.11*r]}static RGB_HTML(t){let[e,r,n]=t;return`#${i(e)}${i(r)}${i(n)}`}static T_HTML(){return"#00000000"}static CMYK_RGB(t){let[e,i,r,n]=t;return["RGB",1-Math.min(1,e+n),1-Math.min(1,r+n),1-Math.min(1,i+n)]}static CMYK_HTML(t){let e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK(t){let[e,i,r]=t,n=1-e,s=1-i,o=1-r;return["CMYK",n,s,o,Math.min(n,s,o)]}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var r=i(154);e.XfaLayer=class{static setupStorage(t,e,i,r,n){let s=r.getValue(e,{value:null});switch(i.name){case"textarea":if(null!==s.value&&(t.textContent=s.value),"print"===n)break;t.addEventListener("input",t=>{r.setValue(e,{value:t.target.value})});break;case"input":if("radio"===i.attributes.type||"checkbox"===i.attributes.type){if(s.value===i.attributes.xfaOn?t.setAttribute("checked",!0):s.value===i.attributes.xfaOff&&t.removeAttribute("checked"),"print"===n)break;t.addEventListener("change",t=>{r.setValue(e,{value:t.target.checked?t.target.getAttribute("xfaOn"):t.target.getAttribute("xfaOff")})})}else{if(null!==s.value&&t.setAttribute("value",s.value),"print"===n)break;t.addEventListener("input",t=>{r.setValue(e,{value:t.target.value})})}break;case"select":if(null!==s.value)for(let t of i.children)t.attributes.value===s.value&&(t.attributes.selected=!0);t.addEventListener("input",t=>{let i=t.target.options,n=-1===i.selectedIndex?"":i[i.selectedIndex].value;r.setValue(e,{value:n})})}}static setAttributes(t){let{html:e,element:i,storage:r=null,intent:n,linkService:s}=t,{attributes:o}=i,l=e instanceof HTMLAnchorElement;for(let[t,i]of("radio"===o.type&&(o.name=`${o.name}-${n}`),Object.entries(o)))if(null!=i)switch(t){case"class":i.length&&e.setAttribute(t,i.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",i);break;case"style":Object.assign(e.style,i);break;case"textContent":e.textContent=i;break;default:l&&("href"===t||"newWindow"===t)||e.setAttribute(t,i)}l&&s.addLinkAttributes(e,o.href,o.newWindow),r&&o.dataId&&this.setupStorage(e,o.dataId,i,r)}static render(t){let e=t.annotationStorage,i=t.linkService,n=t.xfaHtml,s=t.intent||"display",o=document.createElement(n.name);n.attributes&&this.setAttributes({html:o,element:n,intent:s,linkService:i});let l=[[n,-1,o]],h=t.div;if(h.append(o),t.viewport){let e=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=e}"richText"!==s&&h.setAttribute("class","xfaLayer xfaFont");let c=[];for(;l.length>0;){var d;let t,[n,o,h]=l.at(-1);if(o+1===n.children.length){l.pop();continue}let u=n.children[++l.at(-1)[1]];if(null===u)continue;let{name:p}=u;if("#text"===p){let t=document.createTextNode(u.value);c.push(t),h.append(t);continue}if(t=null!=u&&null!=(d=u.attributes)&&d.xmlns?document.createElementNS(u.attributes.xmlns,p):document.createElement(p),h.append(t),u.attributes&&this.setAttributes({html:t,element:u,storage:e,intent:s,linkService:i}),u.children&&u.children.length>0)l.push([u,-1,t]);else if(u.value){let e=document.createTextNode(u.value);r.XfaText.shouldBuildText(p)&&c.push(e),t.append(e)}}for(let t of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))t.setAttribute("readOnly",!0);return{textDivs:c}}static update(t){let e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}},(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var r=i(142),n=i(1),s=i(3);let o=class{constructor(){(0,n.unreachable)("Not implemented: SVGGraphics")}};e.SVGGraphics=o;{let t=function(t){let e=[],i=[];for(let r of t)"save"!==r.fn?"restore"===r.fn?e=i.pop():e.push(r):(e.push({fnId:92,fn:"group",items:[]}),i.push(e),e=e.at(-1).items);return e},i=function(t){if(Number.isInteger(t))return t.toString();let e=t.toFixed(10),i=e.length-1;if("0"!==e[i])return e;do i--;while("0"===e[i]);return e.substring(0,"."===e[i]?i:i+1)},l=function(t){if(0===t[4]&&0===t[5]){if(0===t[1]&&0===t[2])return 1===t[0]&&1===t[3]?"":`scale(${i(t[0])} ${i(t[3])})`;if(t[0]===t[3]&&t[1]===-t[2])return`rotate(${i(180*Math.acos(t[0])/Math.PI)})`}else if(1===t[0]&&0===t[1]&&0===t[2]&&1===t[3])return`translate(${i(t[4])} ${i(t[5])})`;return`matrix(${i(t[0])} ${i(t[1])} ${i(t[2])} ${i(t[3])} ${i(t[4])} ${i(t[5])})`},h="normal",c="normal",d="#000000",u="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/1999/xlink",f=["butt","round","square"],g=["miter","round","bevel"],m=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(URL.createObjectURL&&"u">typeof Blob&&!i)return URL.createObjectURL(new Blob([t],{type:e}));let r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=`data:${e};base64,`;for(let e=0,i=t.length;e<i;e+=3){let s=255&t[e],o=255&t[e+1],l=255&t[e+2];n+=r[s>>2]+r[(3&s)<<4|o>>4]+r[e+1<i?(15&o)<<2|l>>6:64]+r[e+2<i?63&l:64]}return n},v=function(){let t=new Uint8Array([137,80,78,71,13,10,26,10]),e=new Int32Array(256);for(let t=0;t<256;t++){let i=t;for(let t=0;t<8;t++)i=1&i?0xedb88320^i>>1&0x7fffffff:i>>1&0x7fffffff;e[t]=i}function i(t,i,r,n){let s=n,o=i.length;r[s]=o>>24&255,r[s+1]=o>>16&255,r[s+2]=o>>8&255,r[s+3]=255&o,r[s+=4]=255&t.charCodeAt(0),r[s+1]=255&t.charCodeAt(1),r[s+2]=255&t.charCodeAt(2),r[s+3]=255&t.charCodeAt(3),s+=4,r.set(i,s);let l=function(t,i,r){let n=-1;for(let s=i;s<r;s++){let i=255&(n^t[s]);n=n>>>8^e[i]}return -1^n}(r,n+4,s+=i.length);r[s]=l>>24&255,r[s+1]=l>>16&255,r[s+2]=l>>8&255,r[s+3]=255&l}function r(t){let e=t.length,i=65535,r=Math.ceil(e/65535),n=new Uint8Array(2+e+5*r+4),s=0;n[s++]=120,n[s++]=156;let o=0;for(;e>i;)n[s++]=0,n[s++]=255,n[s++]=255,n[s++]=0,n[s++]=0,n.set(t.subarray(o,o+i),s),s+=i,o+=i,e-=i;n[s++]=1,n[s++]=255&e,n[s++]=e>>8&255,n[s++]=255&~e,n[s++]=(65535&~e)>>8&255,n.set(t.subarray(o),s),s+=t.length-o;let l=function(t,e,i){let r=1,n=0;for(let e=0;e<i;++e)n=(n+(r=(r+(255&t[e]))%65521))%65521;return n<<16|r}(t,0,t.length);return n[s++]=l>>24&255,n[s++]=l>>16&255,n[s++]=l>>8&255,n[s++]=255&l,n}function o(e,o,l,h){let c,d,u,p=e.width,f=e.height,g=e.data;switch(o){case n.ImageKind.GRAYSCALE_1BPP:d=0,c=1,u=p+7>>3;break;case n.ImageKind.RGB_24BPP:d=2,c=8,u=3*p;break;case n.ImageKind.RGBA_32BPP:d=6,c=8,u=4*p;break;default:throw Error("invalid format")}let v=new Uint8Array((1+u)*f),b=0,y=0;for(let t=0;t<f;++t)v[b++]=0,v.set(g.subarray(y,y+u),b),y+=u,b+=u;if(o===n.ImageKind.GRAYSCALE_1BPP&&h){b=0;for(let t=0;t<f;t++){b++;for(let t=0;t<u;t++)v[b++]^=255}}let A=new Uint8Array([p>>24&255,p>>16&255,p>>8&255,255&p,f>>24&255,f>>16&255,f>>8&255,255&f,c,d,0,0,0]),S=function(t){if(!s.isNodeJS)return r(t);try{let e;e=parseInt(process.versions.node)>=8?t:Buffer.from(t);let i=require$$6.deflateSync(e,{level:9});return i instanceof Uint8Array?i:new Uint8Array(i)}catch(t){(0,n.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+t)}return r(t)}(v),_=new Uint8Array(t.length+36+A.length+S.length),x=0;return _.set(t,x),i("IHDR",A,_,x+=t.length),i("IDATA",S,_,x+=12+A.length),x+=12+S.length,i("IEND",new Uint8Array(0),_,x),m(_,"image/png",l)}return function(t,e,i){return o(t,void 0===t.kind?n.ImageKind.GRAYSCALE_1BPP:t.kind,e,i)}}();class b{constructor(){this.fontSizeScale=1,this.fontWeight=c,this.fontSize=0,this.textMatrix=n.IDENTITY_MATRIX,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=n.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=d,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(t,e){this.x=t,this.y=e}}let y=0,A=0,S=0;e.SVGGraphics=o=class{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(let s in(0,r.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new r.DOMSVGFactory,this.current=new b,this.transformMatrix=n.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=t,this.objs=e,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!i,this._operatorIdMapping=[],n.OPS)this._operatorIdMapping[n.OPS[s]]=s}getObject(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof t?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}save(){this.transformStack.push(this.transformMatrix);let t=this.current;this.extraStack.push(t),this.current=t.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(t){this.save(),this.executeOpTree(t),this.restore()}loadDependencies(t){let e=t.fnArray,i=t.argsArray;for(let t=0,r=e.length;t<r;t++)if(e[t]===n.OPS.dependency)for(let e of i[t]){let t=e.startsWith("g_")?this.commonObjs:this.objs,i=new Promise(i=>{t.get(e,i)});this.current.dependencies.push(i)}return Promise.all(this.current.dependencies)}transform(t,e,i,r,s,o){let l=[t,e,i,r,s,o];this.transformMatrix=n.Util.transform(this.transformMatrix,l),this.tgrp=null}getSVG(t,e){this.viewport=e;let i=this._initialize(e);return this.loadDependencies(t).then(()=>(this.transformMatrix=n.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(t)),i))}convertOpList(e){let i=this._operatorIdMapping,r=e.argsArray,n=e.fnArray,s=[];for(let t=0,e=n.length;t<e;t++){let e=n[t];s.push({fnId:e,fn:i[e],args:r[t]})}return t(s)}executeOpTree(t){for(let e of t){let t=e.fn,i=e.fnId,r=e.args;switch(0|i){case n.OPS.beginText:this.beginText();break;case n.OPS.dependency:break;case n.OPS.setLeading:this.setLeading(r);break;case n.OPS.setLeadingMoveText:this.setLeadingMoveText(r[0],r[1]);break;case n.OPS.setFont:this.setFont(r);break;case n.OPS.showText:case n.OPS.showSpacedText:this.showText(r[0]);break;case n.OPS.endText:this.endText();break;case n.OPS.moveText:this.moveText(r[0],r[1]);break;case n.OPS.setCharSpacing:this.setCharSpacing(r[0]);break;case n.OPS.setWordSpacing:this.setWordSpacing(r[0]);break;case n.OPS.setHScale:this.setHScale(r[0]);break;case n.OPS.setTextMatrix:this.setTextMatrix(r[0],r[1],r[2],r[3],r[4],r[5]);break;case n.OPS.setTextRise:this.setTextRise(r[0]);break;case n.OPS.setTextRenderingMode:this.setTextRenderingMode(r[0]);break;case n.OPS.setLineWidth:this.setLineWidth(r[0]);break;case n.OPS.setLineJoin:this.setLineJoin(r[0]);break;case n.OPS.setLineCap:this.setLineCap(r[0]);break;case n.OPS.setMiterLimit:this.setMiterLimit(r[0]);break;case n.OPS.setFillRGBColor:this.setFillRGBColor(r[0],r[1],r[2]);break;case n.OPS.setStrokeRGBColor:this.setStrokeRGBColor(r[0],r[1],r[2]);break;case n.OPS.setStrokeColorN:this.setStrokeColorN(r);break;case n.OPS.setFillColorN:this.setFillColorN(r);break;case n.OPS.shadingFill:this.shadingFill(r[0]);break;case n.OPS.setDash:this.setDash(r[0],r[1]);break;case n.OPS.setRenderingIntent:this.setRenderingIntent(r[0]);break;case n.OPS.setFlatness:this.setFlatness(r[0]);break;case n.OPS.setGState:this.setGState(r[0]);break;case n.OPS.fill:this.fill();break;case n.OPS.eoFill:this.eoFill();break;case n.OPS.stroke:this.stroke();break;case n.OPS.fillStroke:this.fillStroke();break;case n.OPS.eoFillStroke:this.eoFillStroke();break;case n.OPS.clip:this.clip("nonzero");break;case n.OPS.eoClip:this.clip("evenodd");break;case n.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case n.OPS.paintImageXObject:this.paintImageXObject(r[0]);break;case n.OPS.paintInlineImageXObject:this.paintInlineImageXObject(r[0]);break;case n.OPS.paintImageMaskXObject:this.paintImageMaskXObject(r[0]);break;case n.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(r[0],r[1]);break;case n.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case n.OPS.closePath:this.closePath();break;case n.OPS.closeStroke:this.closeStroke();break;case n.OPS.closeFillStroke:this.closeFillStroke();break;case n.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case n.OPS.nextLine:this.nextLine();break;case n.OPS.transform:this.transform(r[0],r[1],r[2],r[3],r[4],r[5]);break;case n.OPS.constructPath:this.constructPath(r[0],r[1]);break;case n.OPS.endPath:this.endPath();break;case 92:this.group(e.items);break;default:(0,n.warn)(`Unimplemented operator ${t}`)}}}setWordSpacing(t){this.current.wordSpacing=t}setCharSpacing(t){this.current.charSpacing=t}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(t,e,r,n,s,o){let l=this.current;l.textMatrix=l.lineMatrix=[t,e,r,n,s,o],l.textMatrixScale=Math.hypot(t,e),l.x=l.lineX=0,l.y=l.lineY=0,l.xcoords=[],l.ycoords=[],l.tspan=this.svgFactory.createElement("svg:tspan"),l.tspan.setAttributeNS(null,"font-family",l.fontFamily),l.tspan.setAttributeNS(null,"font-size",`${i(l.fontSize)}px`),l.tspan.setAttributeNS(null,"y",i(-l.y)),l.txtElement=this.svgFactory.createElement("svg:text"),l.txtElement.append(l.tspan)}beginText(){let t=this.current;t.x=t.lineX=0,t.y=t.lineY=0,t.textMatrix=n.IDENTITY_MATRIX,t.lineMatrix=n.IDENTITY_MATRIX,t.textMatrixScale=1,t.tspan=this.svgFactory.createElement("svg:tspan"),t.txtElement=this.svgFactory.createElement("svg:text"),t.txtgrp=this.svgFactory.createElement("svg:g"),t.xcoords=[],t.ycoords=[]}moveText(t,e){let r=this.current;r.x=r.lineX+=t,r.y=r.lineY+=e,r.xcoords=[],r.ycoords=[],r.tspan=this.svgFactory.createElement("svg:tspan"),r.tspan.setAttributeNS(null,"font-family",r.fontFamily),r.tspan.setAttributeNS(null,"font-size",`${i(r.fontSize)}px`),r.tspan.setAttributeNS(null,"y",i(-r.y))}showText(t){let e=this.current,r=e.font,s=e.fontSize;if(0===s)return;let o=e.fontSizeScale,p=e.charSpacing,f=e.wordSpacing,g=e.fontDirection,m=e.textHScale*g,v=r.vertical,b=v?1:-1,y=r.defaultVMetrics,A=s*e.fontMatrix[0],S=0;for(let i of t){if(null===i){S+=g*f;continue}if("number"==typeof i){S+=b*i*s/1e3;continue}let t=(i.isSpace?f:0)+p,n=i.fontChar,l,h,c=i.width;if(v){let t,e=i.vmetric||y;t=-(t=i.vmetric?e[1]:.5*c)*A;let r=e[2]*A;c=e?-e[0]:c,l=t/o,h=(S+r)/o}else l=S/o,h=0;(i.isInFont||r.missingFile)&&(e.xcoords.push(e.x+l),v&&e.ycoords.push(-e.y+h),e.tspan.textContent+=n),S+=v?c*A-t*g:c*A+t*g}e.tspan.setAttributeNS(null,"x",e.xcoords.map(i).join(" ")),v?e.tspan.setAttributeNS(null,"y",e.ycoords.map(i).join(" ")):e.tspan.setAttributeNS(null,"y",i(-e.y)),v?e.y-=S:e.x+=S*m,e.tspan.setAttributeNS(null,"font-family",e.fontFamily),e.tspan.setAttributeNS(null,"font-size",`${i(e.fontSize)}px`),e.fontStyle!==h&&e.tspan.setAttributeNS(null,"font-style",e.fontStyle),e.fontWeight!==c&&e.tspan.setAttributeNS(null,"font-weight",e.fontWeight);let _=e.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;if(_===n.TextRenderingMode.FILL||_===n.TextRenderingMode.FILL_STROKE?(e.fillColor!==d&&e.tspan.setAttributeNS(null,"fill",e.fillColor),e.fillAlpha<1&&e.tspan.setAttributeNS(null,"fill-opacity",e.fillAlpha)):e.textRenderingMode===n.TextRenderingMode.ADD_TO_PATH?e.tspan.setAttributeNS(null,"fill","transparent"):e.tspan.setAttributeNS(null,"fill","none"),_===n.TextRenderingMode.STROKE||_===n.TextRenderingMode.FILL_STROKE){let t=1/(e.textMatrixScale||1);this._setStrokeAttributes(e.tspan,t)}let x=e.textMatrix;0!==e.textRise&&(x=x.slice(),x[5]+=e.textRise),e.txtElement.setAttributeNS(null,"transform",`${l(x)} scale(${i(m)}, -1)`),e.txtElement.setAttributeNS(u,"xml:space","preserve"),e.txtElement.append(e.tspan),e.txtgrp.append(e.txtElement),this._ensureTransformGroup().append(e.txtElement)}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}addFontStyle(t){if(!t.data)throw Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));let e=m(t.data,t.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${t.loadedName}"; src: url(${e}); }
`}setFont(t){let e=this.current,r=this.commonObjs.get(t[0]),s=t[1];e.font=r,!this.embedFonts||r.missingFile||this.embeddedFonts[r.loadedName]||(this.addFontStyle(r),this.embeddedFonts[r.loadedName]=r),e.fontMatrix=r.fontMatrix||n.FONT_IDENTITY_MATRIX;let o="normal";r.black?o="900":r.bold&&(o="bold");let l=r.italic?"italic":"normal";s<0?(s=-s,e.fontDirection=-1):e.fontDirection=1,e.fontSize=s,e.fontFamily=r.loadedName,e.fontWeight=o,e.fontStyle=l,e.tspan=this.svgFactory.createElement("svg:tspan"),e.tspan.setAttributeNS(null,"y",i(-e.y)),e.xcoords=[],e.ycoords=[]}endText(){var t;let e=this.current;e.textRenderingMode&n.TextRenderingMode.ADD_TO_PATH_FLAG&&null!=(t=e.txtElement)&&t.hasChildNodes()&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(t){t>0&&(this.current.lineWidth=t)}setLineCap(t){this.current.lineCap=f[t]}setLineJoin(t){this.current.lineJoin=g[t]}setMiterLimit(t){this.current.miterLimit=t}setStrokeAlpha(t){this.current.strokeAlpha=t}setStrokeRGBColor(t,e,i){this.current.strokeColor=n.Util.makeHexColor(t,e,i)}setFillAlpha(t){this.current.fillAlpha=t}setFillRGBColor(t,e,i){this.current.fillColor=n.Util.makeHexColor(t,e,i),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(t){this.current.strokeColor=this._makeColorN_Pattern(t)}setFillColorN(t){this.current.fillColor=this._makeColorN_Pattern(t)}shadingFill(t){let e=this.viewport.width,i=this.viewport.height,r=n.Util.inverseTransform(this.transformMatrix),s=n.Util.applyTransform([0,0],r),o=n.Util.applyTransform([0,i],r),l=n.Util.applyTransform([e,0],r),h=n.Util.applyTransform([e,i],r),c=Math.min(s[0],o[0],l[0],h[0]),d=Math.min(s[1],o[1],l[1],h[1]),u=Math.max(s[0],o[0],l[0],h[0]),p=Math.max(s[1],o[1],l[1],h[1]),f=this.svgFactory.createElement("svg:rect");f.setAttributeNS(null,"x",c),f.setAttributeNS(null,"y",d),f.setAttributeNS(null,"width",u-c),f.setAttributeNS(null,"height",p-d),f.setAttributeNS(null,"fill",this._makeShadingPattern(t)),this.current.fillAlpha<1&&f.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(f)}_makeColorN_Pattern(t){return"TilingPattern"===t[0]?this._makeTilingPattern(t):this._makeShadingPattern(t)}_makeTilingPattern(t){let e=t[1],i=t[2],r=t[3]||n.IDENTITY_MATRIX,[s,o,l,h]=t[4],c=t[5],d=t[6],u=t[7],p="shading"+S++,[f,g,m,v]=n.Util.normalizeRect([...n.Util.applyTransform([s,o],r),...n.Util.applyTransform([l,h],r)]),[b,y]=n.Util.singularValueDecompose2dScale(r),A=c*b,_=d*y,x=this.svgFactory.createElement("svg:pattern");x.setAttributeNS(null,"id",p),x.setAttributeNS(null,"patternUnits","userSpaceOnUse"),x.setAttributeNS(null,"width",A),x.setAttributeNS(null,"height",_),x.setAttributeNS(null,"x",`${f}`),x.setAttributeNS(null,"y",`${g}`);let w=this.svg,C=this.transformMatrix,k=this.current.fillColor,E=this.current.strokeColor,T=this.svgFactory.create(m-f,v-g);if(this.svg=T,this.transformMatrix=r,2===u){let t=n.Util.makeHexColor(...e);this.current.fillColor=t,this.current.strokeColor=t}return this.executeOpTree(this.convertOpList(i)),this.svg=w,this.transformMatrix=C,this.current.fillColor=k,this.current.strokeColor=E,x.append(T.childNodes[0]),this.defs.append(x),`url(#${p})`}_makeShadingPattern(t){switch("string"==typeof t&&(t=this.objs.get(t)),t[0]){case"RadialAxial":let e,i="shading"+S++,r=t[3];switch(t[1]){case"axial":let s=t[4],o=t[5];(e=this.svgFactory.createElement("svg:linearGradient")).setAttributeNS(null,"id",i),e.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),e.setAttributeNS(null,"x1",s[0]),e.setAttributeNS(null,"y1",s[1]),e.setAttributeNS(null,"x2",o[0]),e.setAttributeNS(null,"y2",o[1]);break;case"radial":let l=t[4],h=t[5],c=t[6],d=t[7];(e=this.svgFactory.createElement("svg:radialGradient")).setAttributeNS(null,"id",i),e.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),e.setAttributeNS(null,"cx",h[0]),e.setAttributeNS(null,"cy",h[1]),e.setAttributeNS(null,"r",d),e.setAttributeNS(null,"fx",l[0]),e.setAttributeNS(null,"fy",l[1]),e.setAttributeNS(null,"fr",c);break;default:throw Error(`Unknown RadialAxial type: ${t[1]}`)}for(let t of r){let i=this.svgFactory.createElement("svg:stop");i.setAttributeNS(null,"offset",t[0]),i.setAttributeNS(null,"stop-color",t[1]),e.append(i)}return this.defs.append(e),`url(#${i})`;case"Mesh":return(0,n.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw Error(`Unknown IR type: ${t[0]}`)}}setDash(t,e){this.current.dashArray=t,this.current.dashPhase=e}constructPath(t,e){let r=this.current,s=r.x,o=r.y,l=[],h=0;for(let r of t)switch(0|r){case n.OPS.rectangle:s=e[h++],o=e[h++];let t=s+e[h++],c=o+e[h++];l.push("M",i(s),i(o),"L",i(t),i(o),"L",i(t),i(c),"L",i(s),i(c),"Z");break;case n.OPS.moveTo:s=e[h++],o=e[h++],l.push("M",i(s),i(o));break;case n.OPS.lineTo:s=e[h++],o=e[h++],l.push("L",i(s),i(o));break;case n.OPS.curveTo:s=e[h+4],o=e[h+5],l.push("C",i(e[h]),i(e[h+1]),i(e[h+2]),i(e[h+3]),i(s),i(o)),h+=6;break;case n.OPS.curveTo2:l.push("C",i(s),i(o),i(e[h]),i(e[h+1]),i(e[h+2]),i(e[h+3])),s=e[h+2],o=e[h+3],h+=4;break;case n.OPS.curveTo3:s=e[h+2],o=e[h+3],l.push("C",i(e[h]),i(e[h+1]),i(s),i(o),i(s),i(o)),h+=4;break;case n.OPS.closePath:l.push("Z")}l=l.join(" "),r.path&&t.length>0&&t[0]!==n.OPS.rectangle&&t[0]!==n.OPS.moveTo?l=r.path.getAttributeNS(null,"d")+l:(r.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(r.path)),r.path.setAttributeNS(null,"d",l),r.path.setAttributeNS(null,"fill","none"),r.element=r.path,r.setCurrentPoint(s,o)}endPath(){let t=this.current;if(t.path=null,!this.pendingClip)return;if(!t.element){this.pendingClip=null;return}let e="clippath"+y++,i=this.svgFactory.createElement("svg:clipPath");i.setAttributeNS(null,"id",e),i.setAttributeNS(null,"transform",l(this.transformMatrix));let r=t.element.cloneNode(!0);if("evenodd"===this.pendingClip?r.setAttributeNS(null,"clip-rule","evenodd"):r.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,i.append(r),this.defs.append(i),t.activeClipUrl){for(let e of(t.clipGroup=null,this.extraStack))e.clipGroup=null;i.setAttributeNS(null,"clip-path",t.activeClipUrl)}t.activeClipUrl=`url(#${e})`,this.tgrp=null}clip(t){this.pendingClip=t}closePath(){let t=this.current;if(t.path){let e=`${t.path.getAttributeNS(null,"d")}Z`;t.path.setAttributeNS(null,"d",e)}}setLeading(t){this.current.leading=-t}setTextRise(t){this.current.textRise=t}setTextRenderingMode(t){this.current.textRenderingMode=t}setHScale(t){this.current.textHScale=t/100}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(let[e,i]of t)switch(e){case"LW":this.setLineWidth(i);break;case"LC":this.setLineCap(i);break;case"LJ":this.setLineJoin(i);break;case"ML":this.setMiterLimit(i);break;case"D":this.setDash(i[0],i[1]);break;case"RI":this.setRenderingIntent(i);break;case"FL":this.setFlatness(i);break;case"Font":this.setFont(i);break;case"CA":this.setStrokeAlpha(i);break;case"ca":this.setFillAlpha(i);break;default:(0,n.warn)(`Unimplemented graphic state operator ${e}`)}}fill(){let t=this.current;t.element&&(t.element.setAttributeNS(null,"fill",t.fillColor),t.element.setAttributeNS(null,"fill-opacity",t.fillAlpha),this.endPath())}stroke(){let t=this.current;t.element&&(this._setStrokeAttributes(t.element),t.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.current,n=r.dashArray;1!==e&&n.length>0&&(n=n.map(function(t){return e*t})),t.setAttributeNS(null,"stroke",r.strokeColor),t.setAttributeNS(null,"stroke-opacity",r.strokeAlpha),t.setAttributeNS(null,"stroke-miterlimit",i(r.miterLimit)),t.setAttributeNS(null,"stroke-linecap",r.lineCap),t.setAttributeNS(null,"stroke-linejoin",r.lineJoin),t.setAttributeNS(null,"stroke-width",i(e*r.lineWidth)+"px"),t.setAttributeNS(null,"stroke-dasharray",n.map(i).join(" ")),t.setAttributeNS(null,"stroke-dashoffset",i(e*r.dashPhase)+"px")}eoFill(){var t;null==(t=this.current.element)||t.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var t;null==(t=this.current.element)||t.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){let t=this.svgFactory.createElement("svg:rect");t.setAttributeNS(null,"x","0"),t.setAttributeNS(null,"y","0"),t.setAttributeNS(null,"width","1px"),t.setAttributeNS(null,"height","1px"),t.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(t)}paintImageXObject(t){let e=this.getObject(t);e?this.paintInlineImageXObject(e):(0,n.warn)(`Dependent image with object ID ${t} is not ready yet`)}paintInlineImageXObject(t,e){let r=t.width,n=t.height,s=v(t,this.forceDataSchema,!!e),o=this.svgFactory.createElement("svg:rect");o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y","0"),o.setAttributeNS(null,"width",i(r)),o.setAttributeNS(null,"height",i(n)),this.current.element=o,this.clip("nonzero");let l=this.svgFactory.createElement("svg:image");l.setAttributeNS(p,"xlink:href",s),l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y",i(-n)),l.setAttributeNS(null,"width",i(r)+"px"),l.setAttributeNS(null,"height",i(n)+"px"),l.setAttributeNS(null,"transform",`scale(${i(1/r)} ${i(-1/n)})`),e?e.append(l):this._ensureTransformGroup().append(l)}paintImageMaskXObject(t){let e=this.getObject(t.data,t);if(e.bitmap)return void(0,n.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");let r=this.current,s=e.width,o=e.height,l=r.fillColor;r.maskId="mask"+A++;let h=this.svgFactory.createElement("svg:mask");h.setAttributeNS(null,"id",r.maskId);let c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x","0"),c.setAttributeNS(null,"y","0"),c.setAttributeNS(null,"width",i(s)),c.setAttributeNS(null,"height",i(o)),c.setAttributeNS(null,"fill",l),c.setAttributeNS(null,"mask",`url(#${r.maskId})`),this.defs.append(h),this._ensureTransformGroup().append(c),this.paintInlineImageXObject(e,h)}paintFormXObjectBegin(t,e){if(Array.isArray(t)&&6===t.length&&this.transform(t[0],t[1],t[2],t[3],t[4],t[5]),e){let t=e[2]-e[0],r=e[3]-e[1],n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x",e[0]),n.setAttributeNS(null,"y",e[1]),n.setAttributeNS(null,"width",i(t)),n.setAttributeNS(null,"height",i(r)),this.current.element=n,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(t){let e=this.svgFactory.create(t.width,t.height),i=this.svgFactory.createElement("svg:defs");e.append(i),this.defs=i;let r=this.svgFactory.createElement("svg:g");return r.setAttributeNS(null,"transform",l(t.transform)),e.append(r),this.svg=r,e}_ensureClipGroup(){if(!this.current.clipGroup){let t=this.svgFactory.createElement("svg:g");t.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(t),this.current.clipGroup=t}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",l(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t].call(i.exports,i,i.exports,__w_pdfjs_require__),i.exports}var __nested_webpack_exports__={};return(()=>{var t=__nested_webpack_exports__;Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(t,"AnnotationEditorLayer",{enumerable:!0,get:function(){return s.AnnotationEditorLayer}}),Object.defineProperty(t,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(t,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(t,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return o.AnnotationEditorUIManager}}),Object.defineProperty(t,"AnnotationLayer",{enumerable:!0,get:function(){return l.AnnotationLayer}}),Object.defineProperty(t,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(t,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(t,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(t,"GlobalWorkerOptions",{enumerable:!0,get:function(){return h.GlobalWorkerOptions}}),Object.defineProperty(t,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(t,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(t,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(t,"PDFDataRangeTransport",{enumerable:!0,get:function(){return i.PDFDataRangeTransport}}),Object.defineProperty(t,"PDFDateString",{enumerable:!0,get:function(){return r.PDFDateString}}),Object.defineProperty(t,"PDFWorker",{enumerable:!0,get:function(){return i.PDFWorker}}),Object.defineProperty(t,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(t,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(t,"PixelsPerInch",{enumerable:!0,get:function(){return r.PixelsPerInch}}),Object.defineProperty(t,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(t,"RenderingCancelledException",{enumerable:!0,get:function(){return r.RenderingCancelledException}}),Object.defineProperty(t,"SVGGraphics",{enumerable:!0,get:function(){return c.SVGGraphics}}),Object.defineProperty(t,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(t,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(t,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(t,"XfaLayer",{enumerable:!0,get:function(){return d.XfaLayer}}),Object.defineProperty(t,"build",{enumerable:!0,get:function(){return i.build}}),Object.defineProperty(t,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(t,"getDocument",{enumerable:!0,get:function(){return i.getDocument}}),Object.defineProperty(t,"getFilenameFromUrl",{enumerable:!0,get:function(){return r.getFilenameFromUrl}}),Object.defineProperty(t,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return r.getPdfFilenameFromUrl}}),Object.defineProperty(t,"getXfaPageViewport",{enumerable:!0,get:function(){return r.getXfaPageViewport}}),Object.defineProperty(t,"isDataScheme",{enumerable:!0,get:function(){return r.isDataScheme}}),Object.defineProperty(t,"isPdfFile",{enumerable:!0,get:function(){return r.isPdfFile}}),Object.defineProperty(t,"loadScript",{enumerable:!0,get:function(){return r.loadScript}}),Object.defineProperty(t,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(t,"renderTextLayer",{enumerable:!0,get:function(){return n.renderTextLayer}}),Object.defineProperty(t,"setLayerDimensions",{enumerable:!0,get:function(){return r.setLayerDimensions}}),Object.defineProperty(t,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(t,"updateTextLayer",{enumerable:!0,get:function(){return n.updateTextLayer}}),Object.defineProperty(t,"version",{enumerable:!0,get:function(){return i.version}});var e=__w_pdfjs_require__(1),i=__w_pdfjs_require__(138),r=__w_pdfjs_require__(142),n=__w_pdfjs_require__(161),s=__w_pdfjs_require__(162),o=__w_pdfjs_require__(141),l=__w_pdfjs_require__(165),h=__w_pdfjs_require__(149),c=__w_pdfjs_require__(168),d=__w_pdfjs_require__(167)})(),__nested_webpack_exports__})())}(pdf_min$2);var pdf_minExports=pdf_min$2.exports;let pdf_min=getDefaultExportFromCjs(pdf_minExports),pdf_min$1=Object.freeze(Object.defineProperty({__proto__:null,default:pdf_min},Symbol.toStringTag,{value:"Module"}))}}]);